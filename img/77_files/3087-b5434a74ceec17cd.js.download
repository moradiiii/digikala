(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3087],{71998:function(e,t,s){"use strict";s.d(t,{_:function(){return a}});var i=s(1249),n=s(8398),a=(0,s(1324).q)({url:function(e){var t=e.productId;return"product/".concat(t,"/comments-media/")},transformer:function(e){var t=e.data;return null==t?void 0:t.map(function(e){return(0,i.T)({data:e})})},inputTransformer:n.d})},3087:function(e,t,s){"use strict";s.d(t,{d:function(){return nJ}});var i,n,a,r=s(70865),l=s(96670),o=s(52322),c=s(2784),d=s(43997),u=s(97729),p=s.n(u),m=s(5632),x=s(64665),h=s(691),f=s(93309),v=s(64177),g=s(8155),j=s(92428),b=s(37310),N=s(85933),y=s(80786),w=s(99125),I=s(42306),C=s(4818),S=s(21497),P=s(21154),k=s(22848),_=s(41435),T=s(99239),D=s(82332),M=s(3572),O=s(91178),A=s(30297),R=s(88425),E=s(66383),V=s(50930),z=s(29690),B=s(57931),L=s(98780),F=s(31909),U=s(64997),Z=s(98723),q=s(50603),J=s(16330),Q=s(73154),H=s(93008),G=s(26442),$=s(72873),K=s(8830),Y=s(57120),W=s(51275),X=s(6013),ee=s(92619),et=s(79593),es=s(72677),ei=s(64698),en=s(44806),ea=s(57394),er=s(47324),el=s(62726),eo=s(50020),ec=s(67387),ed=s(72762);function eu(e){var t=e.isOpen,s=e.onClose,i=e.hasSelectedDkService,n=e.handleDkService,a=e.checkoutCartToggleDkServicePending,r=e.dkService||{},l=r.description,c=r.minPrice,d=r.maxPrice,u=l.split("\n"),p=(0,o.jsxs)("div",{className:"flex mx-1 items-center",children:[(0,o.jsx)("div",{className:"ml-1",children:(0,ed.j)(c)}),(0,o.jsx)(L.J,{className:"pb-1",icon:"toman",size:18})]}),m=(0,o.jsxs)("div",{className:"flex mx-1 items-center",children:[(0,o.jsx)("div",{className:"ml-1",children:(0,ed.j)(d)}),(0,o.jsx)(L.J,{className:"pb-1",icon:"toman",size:18})]});return(0,o.jsxs)(ec.R,{isOpen:t,onClose:s,header:(0,o.jsx)("div",{className:"flex justify-between items-center",children:(0,o.jsx)("p",{className:"text-h5 text-neutral-700",children:"شرایط و جزئیات نصب در محل"})}),children:[(0,o.jsx)("div",{className:"tab-content mx-3 pb-16",children:(0,o.jsxs)("div",{className:"py-4",children:[(0,o.jsx)("div",{className:"text-body-1 text-neutral-650",children:"هزینه نصب و راه‌اندازی پس از ثبت سفارش به شما اعلام می‌شود. پس از اطلاع از هزینه، در صورت تمایل می‌توانید درخواست نصب را نهایی کنید."}),(0,o.jsxs)("div",{className:"flex text-body-1 text-neutral-650",children:["محدوده قیمت خدمات از ",p," تا ",m]}),(0,o.jsxs)("h2",{className:"text-body1-strong text-icon-high-emphasis flex justify-start items-center gap-2 mt-2",children:["قدرت‌گرفته از",(0,o.jsx)("span",{className:"flex justify-center items-center",children:(0,o.jsx)(L.J,{icon:"cube-brand-service-logotype",color:"primary",size:20,className:"!w-18 justify-center items-center mr-7"})})]}),(0,o.jsx)("ul",{className:"rounded-md bg-app-background p-2 mt-4",children:u.map(function(e){return(0,o.jsx)("li",{children:e.trim()})})})]})}),(0,o.jsx)("div",{className:"w-full flex items-center p-4 fixed bottom-0 left-0 bg-white",children:(0,o.jsx)(B.z,{color:"primary",size:"large",className:"grow",mode:i?"outlined":"filled",onClick:n({checked:!i,callback:s}),loading:a,children:i?"حذف خدمات از سبد خرید":"افزودن خدمات به سبد خرید"})})]})}function ep(e){var t=e.className,s=e.defaultVariant,i=e.isDkServiceModalOpen,n=e.onDkServiceModalClose,a=e.onDkServiceModalOpen,r=e.dkService,l=(0,d.I0)(),u=r.serviceID,p=s.productVariantId,m=(0,W.HF)(p),x=(m||{}).cartItemHasDkService,h=(0,E.Z)((0,c.useState)(!(0,eo.k)(m)&&!!x),2),f=h[0],v=h[1];(0,c.useEffect)(function(){(0,eo.k)(m)||l((0,el.k4)(x))},[m]);var g=0!==((null==m?void 0:m.cartItemQuantity)||0),j=(0,ea.J)({action:er.Fk}),b=j.request,N=j.pending,y=function(e){var t=e.checked,s=e.callback;return function(){g?b({cartItemId:m.cartItemId,cartItemVariantId:p,cartItemHasDkService:t,dkServiceId:u}).then(function(){v(t),null==s||s(!0)}):(l((0,el.k4)(t)),v(t),null==s||s(!1))}};return(0,o.jsxs)("div",{className:(0,es.d)("flex flex-col justify-start items-start py-5 gap-3",t),children:[(0,o.jsx)("h4",{className:"text-h5-180 text-neutral-850",children:"خدمات نصب و راه‌اندازی"}),(0,o.jsxs)("div",{className:(0,es.d)("border-complete-200 w-full flex rounded-md px-3 py-2.5 gap-3 my-[1px] cursor-pointer",{"!border-secondary-500":f}),onClick:y({checked:!f}),children:[(0,o.jsxs)("div",{className:"flex-grow flex justify-center items-center gap-3",children:[(0,o.jsx)(en.X,{hasDefaultPadding:!1,className:"p-[3px]",value:f,disabled:N,onClick:function(e){e&&e.stopPropagation&&e.stopPropagation()}}),(0,o.jsxs)("div",{className:"flex-grow flex flex-col items-start gap-0.5",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(L.J,{icon:"cube-cat-service",color:"primary",size:16}),(0,o.jsx)("p",{className:"text-button-2-180 mr-2",children:"نصب در محل"})]}),(0,o.jsx)("span",{className:"text-body-3 text-neutral-400",children:"هزینه خدمات بعد از خرید کالا مشخص می‌شود"})]})]}),(0,o.jsx)(B.z,{mode:"text",removePadding:!0,onClick:function(){null==a||a()},children:(0,o.jsxs)("span",{className:"flex gap-1/5 justify-center items-center text-button-2 text-icon-high-emphasis",children:["جزئیات",(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:18})]})})]}),(0,o.jsx)(eu,{hasSelectedDkService:f,handleDkService:y,isOpen:i,onClose:n,checkoutCartToggleDkServicePending:N,dkService:r})]})}var em=s(18638),ex=s(33140),eh=s(22600),ef=s(30095),ev=s(96951),eg=s(5978),ej=s(43670),eb=s(97615),eN=s(19459),ey=s(11559),ew=s(27314),eI=s(65708),eC=s(75490),eS=s(94039);function eP(e){var t,s=e.productId,i=e.userReactions,n=(0,d.v9)(X.p.isLoggedIn),a=(0,ew.e)().redirect,r=(0,E.Z)((0,c.useState)(!1),2),l=r[0],u=r[1],p=(0,ey.E)({apiMethod:eS.O,onSuccess:function(){return(0,eC.p)({message:"کالا در لیست علاقه‌مندی‌ها ذخیره شد.",actionLink:G.Yz,autoHideDuration:5e3,type:eN._.MULTI_LINE})}}),m=p.request,x=p.pending,h=(0,ey.E)({apiMethod:eb.a,onSuccess:function(){return(0,eC.p)({message:"کالا از لیست علاقه‌مندی‌ها حذف شد.",autoHideDuration:5e3,type:eN._.MULTI_LINE})}}),f=h.request,v=h.pending,g=((null==i?void 0:null===(t=i.product)||void 0===t?void 0:t.productUserReactions)||{}).productIsFavorite;return(0,c.useEffect)(function(){u(g)},[g]),(0,o.jsx)(L.J,{CROId:"pdp-favorite",icon:l?"favoriteOn":"favoriteOff",size:20,color:l?"primary":"high-emphasis",onClick:function(){if(!x&&!v){if((0,eI.dk)({productId:s,sectionName:eI.b$.LIKE,navigationType:eI.OQ.CLICK}),!n){a({toLoginRegisterRoute:!0,withBackUrl:!0});return}l?f({productId:s}).then(function(){u(!1)}):m({productId:s}).then(function(){u(!0)})}},className:(0,es.d)("cursor-pointer p-1.5 select-none",{"text-primary-500":l})})}var ek=s(98788),e_=s(22970),eT=s(26867),eD=s(4547);function eM(e){var t,s=e.productId,i=e.productTitle,n=(0,K.R)({modalId:"share-modal"}),a=n.isOpen,r=n.onOpen,l=n.onClose,c=function(){(0,eI.dk)({productId:s,sectionName:eI.b$.SHARE,navigationType:eI.OQ.CLICK})},d=(t=(0,ek.Z)(function(){var e,t,s,n;return(0,e_.__generator)(this,function(a){switch(a.label){case 0:if(!navigator.share)return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),s=(t=null===(e=document.querySelector)||void 0===e?void 0:e.call(document,"link[rel=canonical]"))?t.href:window.location.href,[4,navigator.share({url:s,text:i,title:"اشتراک‌گذاری"}).then(function(){c()})];case 2:return a.sent(),[3,4];case 3:return n=a.sent(),(0,eD.g)("Share Error on PDP",n),[3,4];case 4:return[3,6];case 5:r(),c(),a.label=6;case 6:return[2]}})}),function(){return t.apply(this,arguments)});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(L.J,{onClick:d,icon:"cube-action-share",size:20,className:"cursor-pointer p-1.5"}),(0,o.jsx)(eT.V,{showModal:a,onClose:l})]})}var eO=s(18577),eA=s(97411);function eR(e){var t=e.breadcrumbs,s=void 0===t?[]:t,i=e.isBrand,n=e.product,a=e.className,r=n||{},l=r.productBrand,c=r.productCategory,d=r.productBrandCategoryUrl,u=l||{},p=u.brandVisibility,m=u.brandCode,x=u.brandTitle,h=(c||{}).categoryTitle;return i&&p?(0,o.jsxs)("div",{className:(0,eO.dh)("flex justify-start items-center w-full overflow-hidden",a),children:[(0,o.jsx)(Z.r,{to:(0,G.bR)({brandCode:m}),className:(0,eO.dh)("text-body-1 !font-medium whitespace-nowrap overflow-hidden text-ellipsis shrink",{"text-neutral-400":!i,"text-neutral-500 underline underline-offset-[6px]":i}),children:x}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",className:"mx-[6px]",size:12,color:(0,eO.$l)("color-icon-high-emphasis")}),(0,o.jsx)(Z.r,{to:d,className:(0,eO.dh)("text-body-1 !font-medium whitespace-nowrap overflow-hidden text-ellipsis shrink",{"text-neutral-400":!i,"text-neutral-500 underline underline-offset-[6px]":i}),children:"".concat(h," ").concat(x)})]}):(0,o.jsx)("nav",{className:a,children:(0,o.jsx)(eA.l,{items:[(0,o.jsx)("div",{className:"pr-4"})].concat((0,V.Z)(s.map(function(e,t){return(0,o.jsxs)("div",{className:(0,eO.dh)("flex justify-center items-center"),children:[(0,o.jsx)(Z.r,{to:e.breadcrumbUrl,className:"text-body-1 py-[3px] !font-medium text-neutral-500 whitespace-nowrap underline underline-offset-[6px]",children:e.breadcrumbTitle}),t!==s.length-1&&(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",className:"mx-[6px]",size:12,color:(0,eO.$l)("color-icon-high-emphasis")})]})})),[(0,o.jsx)("div",{className:"pr-4"})])})})}var eE=s(37326),eV=s(6562),ez=s(97969),eB=s(94133),eL=s(3107),eF=s(36948),eU=s(47072),eZ=s(4236),eq=s(45756),eJ=s(43202),eQ=s(74808),eH=s(43505),eG=s(25180),e$=s(27876),eK=s(51207),eY=s(52216),eW=s(76778),eX=s(8247);function e0(e){var t=e.productId,s=e.pager,i=e.setPage,n=e.comments,a=e.moreCommentsCount,r=e.paginationSize,l=e.collapsedMaxItemsCount,d=(0,c.useRef)(!1),u=(0,eK.S)({enabled:!(0,_.x)(n),threshold:0,onIntersect:function(){d.current||((0,eQ.vl)({productId:t}),d.current=!0)}}).targetRef,p=(0,E.Z)((0,c.useState)(!1),2),m=p[0],x=p[1],h=s||{},f=h.pagerCurrentPage,v=h.pagerTotalPages;return(0,c.useEffect)(function(){x(1!==f)},[v,f]),(0,o.jsxs)("div",{ref:u,children:[!(0,_.x)(n)&&n.slice(0,l).map(function(e){var t=(e||{}).commentId;return(0,o.jsx)(eX.B,{comment:e,className:"br-list-vertical-no-padding-200"},t)}),m&&!(0,_.x)(n)&&n.slice(l).map(function(e){return(0,o.jsx)(eX.B,{comment:e,className:"br-list-vertical-no-padding-200"},e.commentId)}),!(0,_.x)(n)&&n.length>l&&!m&&(0,o.jsx)("div",{className:"border-complete-t-200 py-3",children:(0,o.jsxs)(B.z,{shape:"text",onClick:function(){(0,eI.dk)({productId:t,sectionName:eI.b$.COMMENTS,navigationType:eI.OQ.CLICK,isShowMore:!0}),(0,eQ.Pw)({type:"desktop_more"}),x(!0)},className:"text-secondary-500",CROId:"pdp-comments-more",children:[(0,o.jsxs)("p",{className:"text-secondary-500",children:[(0,eY.U)(a)," دیدگاه دیگر"]}),(0,o.jsx)(L.J,{size:16,className:"mr-1",icon:"expandMore",color:"secondary"})]})}),m&&(0,o.jsx)(e$.t,{clickAction:function(e){i(e),(0,eW.X5)(eF.FK.COMMENT_SECTION)},pageSize:r,pagerTotalPages:v,pagerCurrentPage:f})]})}function e1(e){var t=e.className,s=e.description,i=e.productTitle,n=(e.productImage,e.rate),a=e.rateCount,r=e.productId,l=(e.intentSentimentData,e.changeSearch,e.activeIntentId,e.ratings);return e.updateMoreCommentsCount,(0,o.jsxs)("div",{className:t,children:[(0,o.jsx)(eU.D,{title:"دیدگاه‌ها",description:s||"",withLine:!0}),(0,o.jsxs)("div",{className:"flex items-start",children:[(0,o.jsx)("div",{className:"flex justify-start items-start mt-5",children:(0,o.jsx)(eH.B,{productTitle:i,rate:n,count:a,link:(0,G.zs)({productId:r}),ratings:l})}),(0,o.jsxs)("div",{className:"py-3",children:[(0,o.jsx)("p",{className:"text-subtitle-strong",children:"شما هم می‌توانید در مورد این کالا نظر دهید."}),(0,o.jsx)("p",{className:"text-neutral-500 text-button-2",children:"اگر این محصول را قبلا از دیجیکالا خریده باشید، دیدگاه شما به عنوان خریدار ثبت خواهد شد. همچنین در صورت تمایل می‌توانید به صورت ناشناس نیز دیدگاه خود را ثبت کنید"})]})]})]})}var e2=s(59437),e5=s(29565),e3=s(2562),e4=s.n(e3);function e6(e){var t=e.className,s=e.commentsMediaImages,i=null==s?void 0:s.map(function(e){return(0,o.jsx)(e5.D,{alt:"",width:57,height:57,src:e.mediaUrl,onClick:function(){(0,eW.zq)({id:e.commentId,commentFileIndex:e.commentFileIndex}),(0,eQ.w2)({type:"out"})},CROId:eq.h.PDP_PICS_IN_COMMENT,className:(0,es.d)("ml-2 my-2 rounded overflow-hidden cursor-pointer object-cover shrink-0",e4().pdpCommentSectionThumbnailItem)},e.mediaUrl)});return(0,o.jsx)("div",{className:t,children:!(0,_.x)(s)&&(0,o.jsxs)("div",{className:"mt-5 border-complete-b-200",children:[(0,o.jsx)(eA.l,{isNavigationButtonSmall:!0,items:i}),(0,o.jsx)("span",{"data-cro-id":"pdp-customer-pics-down",children:(0,o.jsx)(e2.e,{mode:"anchor",label:"مشاهده همه",className:"mb-5 mt-3",onClick:function(){(0,eQ.Pw)({type:"desktop_gallery"}),(0,eW.zq)()}})})]})})}var e8=s(19297),e7=s.n(e8);function e9(e){var t=e.rate,s=e.params,i=void 0===s?{}:s,n=e.changePage,a=e.sort,d=e.onSortOptionClick,u=e.pager,p=e.ratings,m=void 0===p?[]:p,x=e.comments,h=void 0===x?[]:x,f=e.rateCount,v=e.className,g=e.productId,j=e.description,b=e.productTitle,N=e.productImage,y=e.commentsMediaImages,w=e.productSuggestionCount,I=e.productSuggestionPercentage,C=e.intentSentimentData,S=e.changeSearch,P=i[eJ.uR],k=i.intentId,T=(u||{}).pagerTotalItems,D=(0,E.Z)((0,c.useState)((T||0)-4),2),M=D[0],O=D[1],A=(0,c.useCallback)(function(e,t){O((t?e:T)-4)},[T]);return(0,_.x)(h)&&(0,_.x)(y)?(0,o.jsx)(e1,{className:v,description:j,productTitle:b,rate:t,rateCount:f,productImage:N,productId:g,intentSentimentData:C,changeSearch:S,activeIntentId:k,ratings:m,updateMoreCommentsCount:A}):(0,o.jsxs)("div",{className:v,children:[(0,o.jsx)(eU.D,{withLine:!0,title:"امتیاز و دیدگاه کاربران",titleClassName:"text-h5",description:j||""}),(0,o.jsxs)("div",{className:"flex justify-start items-start mt-3",children:[(0,o.jsx)(eH.B,{rate:t,count:f,productTitle:b,link:(0,G.zs)({productId:g}),ratings:m,className:e7().PdpCommentSectionDesktopThumbnail__summaryDesktop}),(0,o.jsxs)("div",{className:"grow min-w-0",children:[(0,o.jsx)(e6,{commentsMediaImages:y,productSuggestionCount:w,productSuggestionPercentage:I}),(0,o.jsx)(eZ.R,{onSortOptionClick:d,pager:u,sort:(0,l.Z)((0,r.Z)({},a),{sortActiveOptionId:P}),itemTitle:"دیدگاه",sortItemCROId:eq.h.PDP_COMMENT_SORT,onSortItemClick:eQ.CP}),!(0,_.x)(C)&&(0,o.jsx)(eG._,{changeSearch:S,activeIntentId:k,intentSentimentData:C,updateMoreCommentsCount:A,className:"border-complete-b-200"}),(0,o.jsx)(e0,{productId:g,pager:u,setPage:n,comments:h,paginationSize:20,collapsedMaxItemsCount:4,moreCommentsCount:k?M:T-4})]})]})]})}var te=s(73739),tt=s(91975),ts=s(34356),ti=s(80803),tn=s(58013),ta=s(77251),tr=s(57033);function tl(e){var t=e.children,s=e.className;return(0,o.jsx)("div",{className:(0,es.d)("mb-1 bg-neutral-000 shadow-1 px-4 py-3 relative",s),children:t})}function to(e){var t=e.items,s=e.loadMore,i=e.pager,n=e.onLikeDislike,a=(0,c.useMemo)(function(){return function(e){var t=(0,tn.Z)({},(0,ta.Z)(e));return(0,o.jsx)(tl,{children:(0,o.jsx)(eX.B,{comment:t,onLikeDislike:n})})}},[]);return(0,o.jsx)(tr.S,{hidePagination:!0,itemsPerRow:1,pager:i,fetchPage:s,items:t,itemComponent:a,borderLeftClassName:"border-complete-l-200",borderBottomClassName:"border-complete-b-200",itemClassName:"overflow-x-hidden w-full ,"})}var tc=s(45264),td=s.n(tc);function tu(e){var t=e.commentsMedia,s=e.className,i=(0,c.useMemo)(function(){var e;return null==t?void 0:null===(e=t.slice)||void 0===e?void 0:e.call(t,0,6).map(function(e){return e.commentFiles.map(function(t,s){var i;return(0,o.jsx)(e5.D,{alt:"",width:84,height:84,objectFit:"cover",src:t.mediaUrl,className:(0,es.d)("ml-3 border-complete flex items-center justify-center",td().mediaSlideItem),onClick:(i=null==e?void 0:e.commentId,function(){null===eW.zq||void 0===eW.zq||(0,eW.zq)({id:i}),(0,eQ.w2)({type:"in"})}),CROId:eq.h.PDP_PICS_IN_COMMENT},s)})})},[t]);return(0,o.jsx)(eA.l,{className:s,items:i})}var tp=s(98996),tm=s.n(tp);function tx(e){var t=e.closeCommentSectionModal,s=e.isCommentSectionModalOpen,i=(e.productTitle,e.items),n=e.pager,a=e.commentsMedia,d=e.intentSentimentData,u=e.changeSearch,p=e.activeIntentId,m=e.isLoading,h=e.fetchNextPage,f=e.rate,v=e.rateCount,g=e.sort,j=e.params,b=e.onLikeDislike,N=e.productId,y=j[eJ.uR],w=(0,ti.d)(),C=w.isOpen,S=w.onClose,P=w.onOpen,k=(0,c.useMemo)(function(){return Object.entries(i||{}).filter(function(e){var t=(0,E.Z)(e,2)[1];return!(0,_.x)(t)}).flatMap(function(e){var t=(0,E.Z)(e,2),s=(t[0],t[1]);return null==s?void 0:s.comments})},[i,null==n?void 0:n.pagerCurrentPage]),T=function(){return t()};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(q.Modal,{isFullScreen:!0,shouldCloseOnPageChange:!1,isOpen:void 0!==s&&s,onDismiss:T,header:(0,o.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,o.jsx)(eU.D,{className:"xs:py-0",rightIcon:"arrowRight",rightIconOnClick:T,titleClassName:"text-h4 text-neutral-900 mr-2",title:"".concat((0,eY.U)(null==n?void 0:n.pagerTotalItems)," دیدگاه")}),(0,o.jsx)(eZ.R,{shouldCloseOnDismiss:!0,onSortOptionClick:u,sort:(0,l.Z)((0,r.Z)({},g),{sortActiveOptionId:y}),shouldShowSortTitle:!1,itemTitle:"دیدگاه",sortItemCROId:eq.h.PDP_COMMENT_SORT,rightIconCRO:eq.h.PDP_COMMENT_SORT_ICON,onSortIconClick:function(){(0,eQ.JT)({productId:N})},onSortItemClick:function(e){(0,eQ.CP)(e,N)}})]}),hasCloseIcon:!1,headerHideBottomBorder:!0,childrenClassName:"bg-app-background",children:m?(0,o.jsx)(eV.I,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(tl,{children:[(0,o.jsxs)("div",{className:"mb-4",children:[0===Number(f)?(0,o.jsx)("p",{className:"text-neutral-500",children:"هنوز امتیازی ثبت نشده است"}):(0,o.jsxs)("div",{className:"flex items-center h-6",children:[(0,o.jsx)("p",{className:"text-h1 font-bold ml-1 leading-none",children:(0,eY.U)(f)}),(0,o.jsx)("p",{className:"text-h3",children:" از ۵ "})]}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(ts.Z,{rate:f,className:"mt-1"}),v&&(0,o.jsxs)("p",{className:"text-neutral-400 body-2 mr-2 mt-1",children:["از مجموع ",(0,ed.j)(v,!0)," امتیاز"]})]})]}),!(0,_.x)(a)&&(0,o.jsx)(tu,{className:"mb-2",commentsMedia:a}),!(0,_.x)(d)&&(0,o.jsx)(eG._,{intentSentimentData:d,changeSearch:u,activeIntentId:p}),!(0,I.d)(x.X.SHOW_NEW_INTENT_DESCRIPTION)&&(0,o.jsx)(te.k,{className:"text-neutral-400 text-body-1 cursor-pointer",color:"neutral",mode:"normal",children:"با ثبت دیدگاه بر روی کالاهای خریداری شده ۵ امتیاز در دیجی‌کلاب دریافت کنید"})]}),(0,o.jsx)(to,{items:k,loadMore:h,pager:n,onLikeDislike:b}),(0,o.jsx)("div",{className:(0,es.d)("fixed bottom-0 left-0",tm().PdpCommentSectionModal__addCommentWrapper),children:(0,o.jsxs)(B.z,{className:tm().PdpCommentSectionModal__addCommentButton,size:"large",onClick:P,CROId:eq.h.PDP_ADD_COMMENT_FAB_BUTTON,children:[(0,o.jsx)("span",{children:"ثبت دیدگاه"}),(0,o.jsx)(L.J,{icon:"comment",color:"white",size:24,className:"mr-2"})]})})]})}),(0,o.jsx)(tt.F,{title:"دیدگاه و امتیاز من",isOpen:C,onClose:S,submitButtonProps:{CROId:eq.h.PDP_SUBMIT_COMMENT},isExpandable:!1})]})}function th(e){var t=e.className,s=e.rate,i=e.rateCount,n=(0,es.d)(t,"flex items-center",{"mb-2":i<=0});return(0,o.jsxs)("div",{className:n,children:[s>0&&(0,o.jsx)("span",{className:"ml-1.5 text-h2-extra text-dark-neutral-000",children:(0,eY.U)(s)}),(0,o.jsx)(F.E,{src:s>0?"/statics/img/svg/star-fill.svg":"/statics/img/svg/star-empty.svg",width:20,height:20}),(0,o.jsx)("span",{className:"mr-1.5 text-body-2 text-dark-neutral-500",children:i>0?"( بر اساس نظر ".concat((0,eY.U)(i)," خریدار )"):"هنوز امتیازی ثبت نشده است"})]})}var tf=s(33469),tv=s(47842),tg=s(48976);function tj(e){var t=e.rate,s=e.className,i=e.size;return(0,o.jsxs)("div",{className:(0,es.d)("inline-flex flex-nowrap relative",s),children:[Array.from({length:5},function(){return(0,o.jsx)(F.E,{src:"/statics/img/svg/star-empty.svg",width:i,height:i})}),(0,o.jsx)("div",{className:"absolute inset-0 overflow-hidden h-5",style:{width:"".concat(20*t,"%")},children:(0,o.jsx)("div",{className:(0,es.d)("absolute right-0 top-0 flex flex-nowrap",s),children:Array.from({length:5},function(){return(0,o.jsx)(F.E,{src:"/statics/img/svg/star-fill.svg",width:i,height:i})})})})]})}var tb=s(32614),tN=s(14563),ty=s(26956);function tw(e){var t=e.comment,s=e.onClick,i=e.onLikeDislike,n=t.commentBody,a=t.commentTitle,r=t.commentUserName,l=t.commentRelativeDate,d=t.commentRate,u=t.commentIsBuyer,p=(0,c.useRef)(),m=(0,tb.o)({textRef:p,updateDependencies:[n]}).lineCount,h=(0,tN.u)({comment:t,onLikeDislike:i}),f=h.isLike,v=h.isDislike,g=h.onLike,j=h.onDislike,b=h.pendingSubmitLike,N=h.pendingSubmitDislike,y=h.likeCount,w=h.dislikeCount,C=a&&m>2||!a&&m>3;return(0,o.jsxs)("article",{className:"border-complete-200 rounded p-3 ml-2 flex flex-col h-50 w-60 xs:w-70 shrink-0",onClick:s,children:[(0,o.jsxs)("div",{className:"mb-2",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("p",{className:"text-body-2-compact text-neutral-650 whitespace-nowrap truncate overflow-hidden",children:r}),u&&(0,o.jsx)(tg.C,{className:"mr-2",text:"خریدار",size:"small",type:"success"})]}),u&&(0,o.jsx)("div",{children:(0,o.jsx)(tj,{size:12,rate:d,className:"gap-x-0.5"})})]}),a&&(0,o.jsx)("p",{className:"text-body1-strong ellipsis",children:a}),(0,I.d)(x.X.COMMENT_PREVIEW_BODY)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:(0,es.d)("text-body-1 text-neutral-850",(0,tv.Z)({},a?"ellipsis-2":"ellipsis-3",C)),ref:p,children:n}),C&&(0,o.jsx)(e2.e,{mode:"anchor",label:"مشاهده بیشتر",className:"mt-1 underline underline-offset-4",color:"black",hasArrowIcon:!1})]}):(0,o.jsx)("p",{className:"text-body-1 text-neutral-700 ellipsis-3",children:n}),(0,o.jsxs)("div",{className:"flex items-center mt-auto",children:[(0,o.jsx)("p",{className:"text-body-2 text-neutral-400",children:(0,eY.U)(l)}),(0,o.jsx)(ty.x,{isComments:!0,onLike:g,isLike:f,className:"lg:justify-end mr-auto",classNamePadding:"pt-0",onDislike:j,isDislike:v,isLoadingLike:b,isLoadingDislike:N,thumbsUpCroId:eq.h.PDP_COMMENT_THUMBS_UP_CRO_ID,thumbsDownCroId:eq.h.PDP_COMMENT_THUMBS_DOWN_CRO_ID,likeCount:y,dislikeCount:w})]})]})}var tI=s(99007),tC=s(12870),tS=s(23154),tP=s(10499),tk=s(85560),t_=s.n(tk);function tT(e){var t=e.className,s=e.commentItemSeller,i=e.commentItemSize,n=e.commentItemColor,a=s||{},r=a.sellerUrl,l=a.sellerTitle,c=a.sellerCode,d=(i||{}).sizeTitle,u=n||{},p=u.colorTitle,m=u.colorHexCode;return(0,o.jsxs)("div",{className:(0,es.d)("flex items-center",t),children:[!!l&&(0,o.jsxs)(Z.r,{className:"flex items-center",to:r,onClick:function(){return(0,eQ.fP)({sellerCode:c})},shouldHandleUrlAndOnClick:!0,children:[(0,o.jsx)(L.J,{icon:"seller",size:18,className:"text-neutral-700 ml-2"}),(0,o.jsx)("p",{className:"text-caption text-neutral-700 inline",children:l})]}),!!p&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(L.J,{size:16,color:"disable",icon:"dotOutline",className:"lg:mx-2 border-100"}),(0,o.jsx)("div",{className:(0,es.d)("ml-2 inline-block rounded-circle",t_()["PdpCommentContentFooter__purchasedItem--color"]),style:{backgroundColor:m}}),(0,o.jsx)("p",{className:"text-caption text-neutral-700 inline",children:p})]}),!!d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(L.J,{icon:"dotOutline",color:"disable",size:16}),(0,o.jsx)(L.J,{icon:"variationSize",size:18,className:"ml-2"}),(0,o.jsx)("p",{className:"text-caption text-neutral-700 inline",children:d})]})]})}var tD=s(69036),tM=s(5399);function tO(e){var t=e.className,s=e.commentIsBuyer,i=e.commentUserName,n=e.commentCreatedAt,a=e.commentRecommendationStatus,r=e.commentTrueToSizeRate,l=e.commentRate;return(0,o.jsxs)("div",{className:t,children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("p",{className:"text-caption text-neutral-400 inline",children:i}),s&&(0,o.jsx)(tg.C,{className:"mr-2",text:"خریدار",size:"small",type:"success"}),(0,o.jsx)(L.J,{size:16,color:"disable",icon:"dotOutline",className:"my-2 mx-2"}),(0,o.jsx)("p",{className:"text-caption text-neutral-400 inline",children:(0,eY.U)(n)})]}),s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ts.Z,{className:"mt-3",rate:l,size:24,unfilledIconName:"starOutline"}),(0,o.jsx)("div",{className:(0,es.d)("flex items-center",{"gap-5":a}),children:(0,I.d)(x.X.TRUE_TO_SIZE)&&(0,o.jsx)(tM.z,{className:"pt-2",commentTrueToSizeRate:r})})]})]})}function tA(e){var t=e.comment,s=e.isInCommentModal,i=e.className,n=e.isProfile,a=e.commentChildren,r=e.onLikeDislike,l=e.hideHeader,c=t||{},d=c.commentTrueToSizeRate,u=c.commentRecommendationStatus,p=(c.commentItemSeller,c.commentItemSize,c.commentItemColor,c.commentIsBuyer),m=c.commentUserName,x=c.commentRelativeDate,h=c.commentRate,f=(0,tN.u)({comment:t,onLikeDislike:r}),v=(f.isLike,f.isDislike,f.onLike,f.onDislike,f.pendingSubmitLike,f.pendingSubmitDislike,f.likeCount);return f.dislikeCount,(0,o.jsx)("div",{className:(0,es.d)("w-full",i),children:(0,o.jsx)("div",{className:"flex items-start w-full mt-1",children:(0,o.jsxs)("div",{className:"grow",children:[!(void 0!==l&&l)&&(0,o.jsx)(tO,{commentRate:h,commentIsBuyer:p,commentUserName:m,commentCreatedAt:x,commentTrueToSizeRate:d,commentRecommendationStatus:u}),(0,o.jsx)(tD.c,{isInCommentModal:s,comment:t}),!!(void 0!==n&&n)&&v>0&&(0,o.jsxs)("div",{className:"flex items-center text-neutral-700 md:justify-end",children:[(0,o.jsxs)("p",{className:"text-caption",children:["این نظر برای ",(0,eY.U)(v)," نفر مفید بود"]}),(0,o.jsx)(L.J,{icon:"thumbsUp",className:"mr-1",size:18})]}),a]})})})}function tR(e){var t=e.children,s=e.className,i=e.comment,n=e.isInCommentModal,a=e.onLikeDislike,r=e.isProfile,l=void 0!==r&&r,c=e.shouldHideContentHeader,d=i||{},u=d.commentId,p=d.commentItemColor,m=d.commentItemSeller,x=d.commentItemSize,h=(0,tN.u)({comment:i,onLikeDislike:a}),f=h.isLike,v=h.isDislike,g=h.onLike,j=h.onDislike,b=h.pendingSubmitLike,N=h.pendingSubmitDislike,y=h.likeCount,w=h.dislikeCount,I=(0,ey.E)({apiMethod:tP.G,onSuccess:function(){return(0,eC.p)({message:tC.k4})}}).request;return(0,o.jsxs)("article",{className:(0,es.d)("py-3 lg:mt-0",s),children:[(0,o.jsxs)("div",{className:"w-full flex justify-between",children:[(0,o.jsx)(tA,{isInCommentModal:n,comment:i,isProfile:l,commentChildren:t,onLikeDislike:a,hideHeader:void 0!==c&&c}),(0,o.jsx)("div",{className:"mr-auto pt-1",children:(0,o.jsxs)(tI.gi,{children:[(0,o.jsx)(tI.Ej,{"data-cro-id":eq.h.PDP_COMMENTS_THREE_DOTS,children:(0,o.jsx)(L.J,{color:"low-emphasis",icon:"moreVert",size:24})}),(0,o.jsx)(tI.bC,{id:"selector-menu-comment",children:(0,o.jsx)(tI.z,{onClick:function(){I({commentId:u}),(0,eQ.Fg)({type:"Flag"})},children:(0,o.jsxs)("div",{className:"flex items-center py-2",children:[(0,o.jsx)(L.J,{size:24,icon:"flag",className:"ml-4",color:(0,tS.$)("color-delivery-express")}),(0,o.jsx)("p",{className:"text-subtitle",children:"گزارش این دیدگاه"})]})})})]})})]}),(0,o.jsxs)("div",{className:"w-full flex items-center flex-row mt-3",children:[(0,o.jsx)(tT,{commentItemColor:p,commentItemSeller:m,commentItemSize:x}),!l&&(0,o.jsx)(ty.x,{isComments:!0,onLike:function(){g(),(0,eQ.Fg)({type:"Like"})},isLike:f,className:"lg:justify-end mr-auto",classNamePadding:"pt-1",onDislike:function(){j(),(0,eQ.Fg)({type:"Dislike"})},isDislike:v,isLoadingLike:b,isLoadingDislike:N,thumbsUpCroId:eq.h.PDP_COMMENT_THUMBS_UP_CRO_ID,thumbsDownCroId:eq.h.PDP_COMMENT_THUMBS_DOWN_CRO_ID,likeCount:y,dislikeCount:w})]})]})}function tE(e){var t=e.comment,s=e.isOpen,i=e.onClose,n=e.onLikeDislike,a=t||{},r=a.commentUserName,l=a.commentRate,c=a.commentRelativeDate,d=a.commentIsBuyer,u=(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center max-w-[250px]",children:[(0,o.jsx)("div",{className:"text-body-2 text-neutral-650 truncate",children:r}),d&&(0,o.jsx)(tg.C,{className:"mr-2",text:"خریدار",size:"small",type:"success"})]}),(0,o.jsxs)("div",{className:"flex items-center",children:[d&&(0,o.jsx)(tj,{rate:l,size:12,className:"gap-x-0.5 ml-2"}),(0,o.jsx)("span",{className:"text-caption text-icon-high-emphasis",children:(0,eY.U)(c)})]})]});return(0,o.jsx)(q.Modal,{header:u,isOpen:s,onDismiss:i,children:(0,o.jsx)(tR,{comment:t,onLikeDislike:n,shouldHideContentHeader:!0,isInCommentModal:!0})})}var tV=s(14170),tz=s(68471),tB=s.n(tz);function tL(e){var t=e.className,s=e.commentSummery,i=e.onClick,n=(s||{}).commentSummaryOverview;return(0,o.jsxs)("div",{className:(0,es.d)(tB().Carousel__card,"h-50 min-w-[260px] rounded bg-ai-background px-4 py-3 ml-2 flex flex-col",t),onClick:i,children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(tV.$,{animationFileName:"ai.lottie",autoplay:!0,loop:!0,className:"w-7 h-7"}),(0,o.jsx)("div",{className:"text-h5 text-ai-700 mr-2",children:"خلاصه دیدگاه‌های خریداران"})]}),(0,o.jsx)("div",{className:"text-body-1 ellipsis-3 mt-1 text-neutral-700",children:n}),(0,o.jsx)(e2.e,{mode:"anchor",label:"مشاهده بیشتر",className:"mt-1.5 underline underline-offset-4",color:"black",hasArrowIcon:!1}),(0,o.jsx)("div",{className:"flex justify-between items-center mt-auto",children:(0,o.jsx)("div",{className:(0,es.d)(tB().Carousel__aiBadge,"text-caption text-neutral-500 rounded-lg px-2"),children:"تولید شده با هوش مصنوعی"})})]})}function tF(e){var t=e.rate,s=e.comments,i=e.rateCount,n=e.productId,a=e.commentCount,r=e.commentsMediaImages,l=e.openCommentSectionModal,d=e.onLikeDislike,u=e.commentSummaryData,p=e.className,m=e.commentsMediaCount,x=(0,E.Z)((0,c.useState)(null),2),h=x[0],f=x[1],v=(0,c.useRef)(!1),g=(0,eK.S)({enabled:!(0,_.x)(s),onIntersect:function(){v.current||((0,eQ.vl)({productId:n}),v.current=!0)}}).targetRef,j=(0,K.R)({modalId:eF.tA}),b=j.isOpen,N=j.onClose,y=j.onOpen,w=(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center px-10",children:[(0,o.jsx)(B.z,{mode:"outlined",size:"medium",color:"black",icon:!0,iconColor:"black",prependIcon:"arrowLeft",className:"p-2",removePadding:!0,isRounded:!0,onClick:function(){l(),(0,eQ.Pw)({type:"mobile_carousel"})}}),(0,o.jsx)("span",{className:"whitespace-nowrap mt-2 text-caption-strong",children:"مشاهده همه"})]}),I=null==s?void 0:s.map(function(e,t){return(0,o.jsx)(tw,{onLikeDislike:d,comment:e,onClick:function(){f(e),(0,eQ.$H)({placement:t})}},e.commentId)});(0,_.x)(null==u?void 0:u.commentSummaryOverview)||I.unshift((0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tL,{commentSummery:u,onClick:function(){(0,eQ.F3)({productId:n}),y()}}),(0,o.jsx)(tf.j,{productCommentsOverview:u,isOpen:b,onClose:N})]})),I.push(w);var C=null==r?void 0:r.map(function(e,t){return(0,o.jsxs)("div",{className:(0,es.d)("relative",{"ml-4":5===t}),children:[(0,o.jsx)(e5.D,{alt:"",width:80,height:80,src:e.mediaUrl,onClick:function(){(0,eW.zq)({id:e.commentId,commentFileIndex:e.commentFileIndex}),(0,eQ.w2)({type:"out"})},CROId:eq.h.PDP_PICS_IN_COMMENT,className:"rounded overflow-hidden cursor-pointer object-cover shrink-0"},e.mediaUrl),5===t&&m>6&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"absolute pointer-events-none rounded inset-0 bg-neutral-900 opacity-60 z-1"}),(0,o.jsx)("span",{className:"absolute inset-0 pointer-events-none z-2 flex items-center justify-center text-h3 text-app-background-mid-dark",children:"".concat((0,eY.U)(m-6),"+")})]})]})});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tE,{comment:h,isOpen:!(0,_.x)(h),onClose:function(){return f(null)},onLikeDislike:d}),(0,o.jsxs)("div",{className:p,children:[(0,o.jsxs)("div",{className:"flex flex-col px-4",onClick:function(){l(),(0,eQ.Pw)({type:"mobile_above_carousel"})},children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(eU.D,{className:"items-center",titleClassName:"text-dark-neutral-000 text-h5",title:"دیدگاه کاربرها",labelTagName:"h2"}),a&&(0,o.jsx)(e2.e,{className:"my-auto mr-auto",mode:"anchor",label:"مشاهده ".concat((0,eY.U)(a)," دیدگاه"),"data-cro-id":eq.h.PDP_ALL_COMMENTS,color:"n-650",iconColor:"high-emphasis"})]}),(0,o.jsx)(th,{rate:t,rateCount:i})]}),!(0,_.x)(r)&&(0,o.jsx)(eA.l,{className:"pr-4 mb-4 gap-x-2",items:C}),s&&!(0,_.x)(s)&&(0,o.jsx)("div",{ref:g,children:(0,o.jsx)(eA.l,{items:I,className:"mb-4 pr-4"})}),(0,o.jsx)(eH.B,{rate:t,count:a})]})]})}function tU(e){var t,s=e.className,i=e.comments;return(0,o.jsx)("section",{className:s,children:null==i?void 0:null===(t=i.map)||void 0===t?void 0:t.call(i,function(e){return(0,o.jsx)(eX.B,{comment:e,className:"br-list-vertical-no-padding-200"},e.commentId)})})}function tZ(e){var t,s=e.sectionClassName,i=e.description,n=e.className,a=e.product,d=(0,v.C)().isDesktop,u=(0,E.Z)((0,c.useState)(!0),2),p=u[0],m=u[1],x=(0,K.R)({modalId:eF.fr}),h=x.onOpen,f=x.isOpen,g=x.onClose,j=a||{},b=j.productId,N=j.productRatingCount,y=j.productRatingRate,w=j.productLastComments,I=j.productTitle,C=j.productCommentsCount,S=j.productSuggestionCount,P=j.productSuggestionPercentage,k=j.productImage,T=j.productCommentsSummery,M=(0,E.Z)((0,c.useState)([]),2),O=M[0],A=M[1],R=(0,eB.a)({apiMethod:eL.F,apiData:{productId:b},disabled:!b,onSuccess:function(e){var t,s=e.params,i=e.response,n=s||{},a=n.page,r=n.sort,l=n.intentId,o=i||{},c=o.sort,d=o.comments,u=(c||{}).sortDefaultOptionId;l||1!==a||r&&r!==u||A((null==d?void 0:null===(t=d.slice)||void 0===t?void 0:t.call(d,0,5))||[])}}),V=R.data,z=R.fetchNextPage,B=R.hasNextPage,L=R.items,F=R.params,U=R.pending,Z=R.fetchPage,q=R.changeParams,J=R.pageNumber,Q=R.mutateItems,H=null===(t=L[J])||void 0===t?void 0:t.comments,G=V||{},$=G.ratings,Y=G.commentsMedia,W=void 0===Y?[]:Y,X=G.pager,ee=G.intentSentiment,et=G.sort,es=(0,c.useMemo)(function(){var e,t,s=0,i=[];return(null==W?void 0:W.length)<6?null==W||null===(e=W.every)||void 0===e||e.call(W,function(e){var t,n;return 6!==s&&(null==e||null===(t=e.commentFiles)||void 0===t||null===(n=t.every)||void 0===n||n.call(t,function(t,n){return 6!==s&&(i.push((0,l.Z)((0,r.Z)({},t),{commentId:e.commentId,commentFileIndex:n})),s+=1,!0)}),!0)}):null==W||null===(t=W.every)||void 0===t||t.call(W,function(e){return 6!==s&&(i.push((0,l.Z)((0,r.Z)({},null==e?void 0:e.commentFiles[0]),{commentId:e.commentId,commentFileIndex:0})),s+=1,!0)}),i},[W]);(0,c.useEffect)(function(){m(!1)},[]);var ei=(0,E.Z)((0,eE.s)({eventData:{productId:b,sectionName:eI.b$.COMMENTS,navigationType:eI.OQ.SCROLL},callback:eI.dk}),1)[0];if(p&&!(0,_.x)(w))return(0,o.jsx)(tU,{comments:w});if(U&&(0,D.t)(J,1)&&((0,_.x)(V)||(0,eo.k)(V))&&!F.intentId&&!f)return(0,o.jsx)(eV.I,{});var en=function(e){var t=e.updatedCommentData;A(function(e){return e.map(function(e){return e.commentId!==t.commentId?e:t})})};return(0,o.jsxs)("section",{ref:ei,className:s,children:[(0,o.jsx)(ez.w,{isLoading:U&&(1!==F.page||F.intentId&&1===F.page)}),d?(0,o.jsx)(e9,{rate:y,pager:X,params:F,changePage:Z,onSortOptionClick:q,sort:et,rateCount:N,className:n,productId:b,ratings:$,comments:H,description:i,productTitle:I,productImage:k,commentsMediaImages:es,productSuggestionCount:S,productSuggestionPercentage:P,intentSentimentData:ee,changeSearch:q}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tF,{rate:y,rateCount:N,comments:O,commentCount:C,productId:b,commentsMediaImages:es,openCommentSectionModal:function(){(0,eI.dk)({productId:b,sectionName:eI.b$.COMMENTS,navigationType:eI.OQ.CLICK,isShowMore:!0}),h()},className:n,onLikeDislike:function(e){var t=e.updatedCommentData;en({updatedCommentData:t}),Q(function(e){var s=(0,r.Z)({},e);for(var i in s)s[i]=(0,l.Z)((0,r.Z)({},e[i]),{comments:e[i].comments.map(function(e){return e.commentId!==t.commentId?e:t})});return s})},commentSummaryData:T,commentsMediaCount:W.length||0}),(0,o.jsx)(tx,{pager:X,ratings:$,rate:y,rateCount:N,productId:b,productTitle:I,commentCount:C,commentsMedia:W,isCommentSectionModalOpen:f,closeCommentSectionModal:g,items:L,params:F,hasNextPage:B,fetchNextPage:z,intentSentimentData:ee,sort:et,changeSearch:q,activeIntentId:F.intentId,isLoading:U&&1===F.page&&!F.intentId,onLikeDislike:en})]})]})}var tq=s(16514),tJ=s(57306),tQ=s(88413),tH=s(69932),tG=s(88398);function t$(e){var t=e.onClick,s=e.productProperties,i=e.productId,n=e.productUrl,a=e.productImage,r=e.productImageAlt,l=e.productTitle,c=e.productBadges,d=e.productPropertiesIsFake,u=e.productVariantPropertiesIsRoosta,p=e.productVariantPriceIsApplicationIncredible,m=e.productVariantPriceSellingPrice,x=e.productVariantPriceDiscountPercent,h=e.productVariantPriceRrpPrice,f=(0,E.Z)((0,tq.Z)({callback:function(){var e,t;(0,g.c2)({ad:null==s?void 0:s.productPropertiesAd,productId:i,adType:tQ.Ff}),(null==s?void 0:null===(e=s.ad)||void 0===e?void 0:e.provider)==="adverge"&&(0,tH.wh)({adIds:[null==s?void 0:null===(t=s.ad)||void 0===t?void 0:t.id]})}}),1)[0];return(0,o.jsxs)(Z.r,{target:"_blank",shouldHandleUrlAndOnClick:!0,to:n,onClick:t,className:(0,es.d)("w-full min-w-[140px] max-w-[140px] border-complete !border-neutral-200 rounded-md overflow-hidden","flex flex-col justify-between"),children:[(0,o.jsx)("div",{ref:f,className:"bg-neutral-100",children:(0,o.jsx)(F.E,{width:140,height:140,image:a,alt:r||l,style:{mixBlendMode:"multiply"}})}),(0,o.jsxs)("div",{className:"h-full p-2 !pt-1 flex flex-col gap-1 w-full justify-between items-start",children:[(0,o.jsx)("p",{className:"text-body2-strong-180 text-neutral-650 h-10 w-full ellipsis-2",children:l}),(0,o.jsx)(tG.a,{className:"w-full",productBadges:[(c||[])[0]],itemClassname:"!bg-transparent !px-0 !text-icon-high-emphasis !text-caption",productPropertiesIsFake:d,productVariantPropertiesIsRoosta:u,productVariantPriceIsApplicationIncredible:p}),(0,o.jsx)(tJ.t,{className:(0,es.d)("bg-red flex flex-col h-10.5 pt-0.5",{"!justify-start !items-start":x,"!flex-row !justify-start !items-end":!x}),price:h,sellingPrice:m,discount:x,productDiscountPercent:x,discountOnTop:!0,compactPrice:!0})]})]},i)}function tK(e){var t=e.carouselData,s=e.product,i=e.bigDataTrackerData,n=s||{},a=n.productId,r=n.productProperties,l=t||{},d=l.cpcTitle,u=l.cpcProducts,p=l.miniCpcProduct,m=l.showCpcCarousel,x=p||{},h=x.productId,f=x.productUrl,v=x.productImage,j=x.productImageAlt,b=x.productTitle,N=x.productDefaultVariant||{},y=N.productVariantPriceSellingPrice,w=N.productVariantPriceDiscountPercent,I=N.productVariantPriceRrpPrice,C=(0,E.Z)((0,tq.Z)({eventData:{products:u,bigDataCarouselName:tQ.z_,carouselTitle:"پیشنهاد فروشندگان",productItemId:a,url:et.s?null:null==window?void 0:window.location.pathname,pageData:i},callback:g.bY}),1)[0],S=function(e){var t,s,n=e||{},a=n.productId,l=n.productProperties;(0,g.ID)({products:u,bigDataCarouselName:tQ.z_,carouselTitle:"پیشنهاد فروشندگان",url:et.s?null:null==window?void 0:window.location.pathname,productId:a,pageData:i}),(0,g.nO)({ad:null==l?void 0:l.productPropertiesAd,productId:a,adType:tQ.Ff}),(null==r?void 0:null===(t=r.ad)||void 0===t?void 0:t.provider)==="adverge"&&(0,tH.Je)({adIds:[null==l?void 0:null===(s=l.ad)||void 0===s?void 0:s.id]})},P=(0,E.Z)((0,tq.Z)({callback:function(){var e,t;(0,g.c2)({ad:null==r?void 0:r.productPropertiesAd,productId:h,adType:tQ.Ff}),(null==r?void 0:null===(e=r.ad)||void 0===e?void 0:e.provider)==="adverge"&&(0,tH.wh)({adIds:[null==r?void 0:null===(t=r.ad)||void 0===t?void 0:t.id]})}}),1)[0],k=(0,c.useMemo)(function(){return(u||[]).map(function(e,t){var s=e||{},i=s.productId,n=s.productUrl,a=s.productImage,r=s.productImageAlt,l=s.productTitle,c=s.productBadges,d=s.productPropertiesIsFake,u=s.productDefaultVariant,p=s.productProperties,m=u||{},x=m.productVariantPropertiesIsRoosta,h=m.productVariantPriceIsApplicationIncredible,f=m.productVariantPriceSellingPrice,v=m.productVariantPriceDiscountPercent,g=m.productVariantPriceRrpPrice;return(0,o.jsx)(t$,{onClick:function(){return S(e)},productProperties:p,productId:i,productUrl:n,productImage:a,productImageAlt:r,productTitle:l,productBadges:c,productPropertiesIsFake:d,productVariantPropertiesIsRoosta:x,productVariantPriceIsApplicationIncredible:h,productVariantPriceSellingPrice:f,productVariantPriceDiscountPercent:v,productVariantPriceRrpPrice:g},i)})},[u]);return(0,o.jsxs)("div",{className:"pb-4",children:[(0,o.jsx)("div",{className:"w-full flex justify-between items-center px-4 pt-5 pb-3",children:(0,o.jsxs)("span",{className:"text-h5-180 text-neutral-850 flex gap-1.5",children:[(0,o.jsx)(L.J,{icon:"ads",size:24,color:(0,tS.$)("color-ad")}),d]})}),m?(0,o.jsx)("div",{ref:C,children:(0,o.jsx)(eA.l,{items:[(0,o.jsx)("div",{className:"pr-2"})].concat((0,V.Z)(k),[(0,o.jsx)("div",{className:"pr-2"})]),className:"gap-2 w-full",sliderProps:{slidesOffsetAfter:0,slidesOffsetBefore:0}})}):(0,o.jsx)("div",{ref:P,children:(0,o.jsxs)(Z.r,{target:"_blank",shouldHandleUrlAndOnClick:!0,onClick:function(){var e,t;(0,g.nO)({ad:null==r?void 0:r.productPropertiesAd,productId:h,adType:tQ.Ff}),(null==r?void 0:null===(e=r.ad)||void 0===e?void 0:e.provider)==="adverge"&&(0,tH.Je)({adIds:[null==r?void 0:null===(t=r.ad)||void 0===t?void 0:t.id]})},to:f,className:"flex gap-3 border-complete !border-neutral-200 rounded-md mx-4 overflow-hidden py-2 pr-2 pl-3",children:[(0,o.jsx)("div",{className:"bg-neutral-100 rounded-md overflow-hidden min-w-[72px]",children:(0,o.jsx)(F.E,{className:"min-w-[72px]",width:72,height:72,image:v,alt:j||b,style:{mixBlendMode:"multiply"}})}),(0,o.jsxs)("div",{className:"flex flex-col gap-1.5 w-full justify-between items-start",children:[(0,o.jsx)("p",{className:"text-body-1-180 text-neutral-650 h-11 w-full ellipsis-2",children:b}),(0,o.jsx)(tJ.t,{isOneRowPrice:!0,iconSize:16,className:"gap-1 h-6",price:I,sellingPrice:y,discount:w,productDiscountPercent:w})]})]})})]})}var tY=s(25645),tW=s(91624),tX=s.n(tW);function t0(e){var t=e.defaultVariantItem,s=e.className,i=(e.product||{}).productFlatShippingBadge,n=(t||{}).variantShipmentMethodsProviders,a=(0,eO.tx)(tY.s.FreeAll,i),r=(n||[]).find(function(e){return"jet"===e.productVariantShipmentMethodsProviderType});return r||a?(0,o.jsxs)("div",{className:(0,eO.dh)("relative mx-4 px-4 rounded-md overflow-hidden flex flex-col justify-center items-center gap-1","bg-[rgba(16,40,255,0.08)] transition-all duration-300 ease-out",tX().DeliveryState,s,{"py-3 h-[50px]":!r||!a,"py-2 h-[72px]":r&&a}),children:[a&&(0,o.jsxs)("div",{className:"flex items-center justify-start gap-1.5 w-full",children:[(0,o.jsx)(L.J,{size:16,icon:"cube-shipping-express"}),(0,o.jsx)("span",{className:"text-body1-strong",children:a?"ارسال رایگان برای این محصول":"ارسال رایگان برای کاربرهای پلاس"})]}),r&&(0,o.jsxs)("div",{className:"flex items-center justify-start gap-1.5 w-full",children:[(0,o.jsx)(L.J,{size:16,icon:"cube-shipping-today"}),(0,o.jsx)("span",{className:"text-body1-strong",children:r.productVariantShipmentMethodsProviderTitle})]})]}):null}var t1=function(e,t,s,i){return{type:e,content:(0,o.jsxs)("div",{className:"flex items-center gap-1.5 w-full",children:[(0,o.jsx)(L.J,{size:16,icon:t,color:i}),(0,o.jsx)("span",{className:"text-body1-strong-compact text-neutral-850",children:s})]})}};function t2(e){var t,s,i=e.defaultVariantItem,n=e.className,a=i.variantShipmentMethod.variantShipmentMethodProviders,r=a.some(function(e){var t;return(null===(t=e.variantShipmentMethodProviderPrice)||void 0===t?void 0:t.isFree)&&("seller"===e.shippingMode||"seller-jet"===e.shippingMode)}),l=a.some(function(e){var t;return(null===(t=e.variantShipmentMethodProviderPrice)||void 0===t?void 0:t.isFree)&&"digikala"===e.shippingMode}),c=a.find(function(e){return"seller-jet"===e.shippingMode}),d=a.find(function(e){return"jet"===e.shippingMode}),u=function(e){return"today"===e?"امروز":"tomorrow"===e?"فردا":""},p=[r&&t1("seller","cube-shipping-seller",(0,o.jsxs)(o.Fragment,{children:["ارسال رایگان فروشنده"," ",(0,o.jsx)("span",{className:"text-body-1-compact",children:"برای این کالا"})]}),(0,tS.$)("color-delivery-ship-by-seller")),l&&t1("digikala","cube-shipping-express",(0,o.jsxs)(o.Fragment,{children:["ارسال رایگان ",(0,o.jsx)("span",{className:"text-body-1-compact",children:"برای این کالا"})]})),c&&t1("seller","cube-shipping-today",(0,o.jsxs)(o.Fragment,{children:["تحویل ",u(c.deliveryDay)," ",(0,o.jsx)("span",{className:"text-body-1-compact",children:"با ارسال سریع فروشنده"})]}),(0,tS.$)("color-delivery-ship-by-seller")),d&&t1("digikala","cube-shipping-today",(0,o.jsxs)(o.Fragment,{children:["تحویل ",u(d.deliveryDay)," ",(0,o.jsxs)("span",{className:"text-body-1-compact",children:["با ",d.variantShipmentMethodProviderLabel.title]})]}),(0,tS.$)("color-delivery-jet-expansion"))].filter(Boolean).slice(0,2);return(0,_.x)(p)?null:(0,o.jsx)("div",{className:(0,es.d)("relative mx-4 pr-3 rounded-md overflow-hidden flex flex-col justify-center items-center gap-1.5","transition-all duration-300 ease-out",p.every(function(e){return"digikala"===e.type})?tX().DeliveryDigikala:"",p.every(function(e){return"seller"===e.type})?tX().DeliverySeller:"","digikala"===p[0].type&&(null===(t=p[1])||void 0===t?void 0:t.type)==="seller"?tX().DeliveryDigikalaAndSeller:"","seller"===p[0].type&&(null===(s=p[1])||void 0===s?void 0:s.type)==="digikala"?tX().DeliverySellerAndDigikala:"",n,{"py-2":2===p.length,"py-4":1===p.length}),children:p.map(function(e){return e.content})})}var t5=s(36696);function t3(e){var t=e.productID,s=(0,E.Z)((0,t5.m)(),2),i=(s[0],s[1]);return(0,o.jsxs)("div",{className:"w-full flex justify-center items-center gap-1.5 text-body1-strong-compact text-icon-high-emphasis pt-3",children:["شناسه این کالا",(0,o.jsxs)("span",{onClick:function(){i("dkp-".concat(t)),(0,eC.p)({message:"شناسه کالا کپی شد."})},className:"text-body2-strong py-1.5 px-4 flex justify-center items-center gap-1 bg-app-background rounded-full",children:["DKP-",t,(0,o.jsx)(L.J,{icon:"copy",size:16})]})]})}var t4=s(85518),t6=(0,c.forwardRef)(function(e,t){var s,i,n,a=e.className,r=e.product,l=e.handleActiveSpecModal,c=(r||{}).productReviewSections,d=c[0];if((0,_.x)(c)||(0,_.x)(d.reviewSections))return null;var u=d.reviewSections.filter(function(e){return"text"===e.reviewSectionTemplate}),p=d.reviewSections.filter(function(e){return"image"===e.reviewSectionTemplate}),m=d.reviewSections.filter(function(e){return"text-image"===e.reviewSectionTemplate});return(0,o.jsxs)("div",{ref:t,className:(0,es.d)("flex flex-col w-full pb-5",a),children:[(0,o.jsx)("div",{className:"w-full flex justify-between items-center pt-5 pb-3 px-5",children:(0,o.jsx)("h3",{className:"text-h5-compact text-neutral-850",children:"بررسی تخصصی"})}),et.s?(0,o.jsx)("div",{className:"px-4",children:null==c?void 0:c.map(function(e,t){return(0,o.jsx)(t4.g,{reviewSection:e,shouldHaveMargin:function(e,t){var s;return(null===(s=e[t+1])||void 0===s?void 0:s.reviewSectionTemplate)!=="image"}},t)})}):(0,o.jsxs)("div",{className:"flex flex-col w-full items-center gap-4",children:[(0,o.jsxs)("div",{className:"w-full flex flex-col items-start gap-1",children:[(0,o.jsx)("h4",{className:"w-full text-right text-subtitle-180 px-5",children:d.reviewSectionTitle}),(!(0,_.x)(u)||!(0,_.x)(m))&&(0,o.jsx)("p",{className:"text-body-1 px-5",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:4,overflow:"hidden"},dangerouslySetInnerHTML:{__html:(0,_.x)(m)?null===(s=u[0])||void 0===s?void 0:s.reviewSectionText:null===(i=m[0])||void 0===i?void 0:i.reviewSectionText}})]}),(!(0,_.x)(p)||!(0,_.x)(m))&&(0,o.jsx)("div",{className:"bg-neutral-100 mx-5 rounded-md overflow-hidden max-h-[400px]",children:(0,o.jsx)(F.E,{lazy:!1,className:"",style:{mixBlendMode:"multiply"},src:(0,_.x)(m)?p[0].reviewSectionImage.imageSrc:null===(n=m[0])||void 0===n?void 0:n.reviewSectionImage.imageSrc})}),(0,o.jsx)(B.z,{onClick:l,removePadding:!0,mode:"text",className:"pr-4 pl-3 py-1.5 !rounded-lg bg-neutral-100",children:(0,o.jsxs)("div",{className:"flex justify-center items-center gap-2 text-body2-strong text-icon-high-emphasis",children:["مشاهده ادامه بررسی تخصصی",(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:16})]})})]})]})}),t8=s(72610),t7=s(86329),t9=s.n(t7);function se(e){var t=e.product,s=t||{},i=s.productFidibo,n=s.productTitleFa,a=i||{},r=a.productFidiboType,l=a.productFidiboTitle,d=a.productFidiboPhoto,u=a.productFidiboUrl,p=a.productFidiboSampleFile,m=(0,c.useRef)(null),x=(0,E.Z)((0,c.useState)(!1),2),h=x[0],f=x[1],v=(0,E.Z)((0,c.useState)(!1),2),g=v[0],j=v[1],b=(0,E.Z)((0,c.useState)(!1),2),N=b[0],y=b[1],w=(0,E.Z)((0,c.useState)(!0),2),I=w[0],C=w[1],S=(0,E.Z)((0,c.useState)(0),2),P=S[0],k=S[1],T=(0,E.Z)((0,c.useState)(0),2),D=T[0],M=T[1];return(0,o.jsx)("div",{className:"px-4 mb-4",children:(0,o.jsxs)("div",{className:"flex flex-col justify-center rounded-md border-complete-200 relative overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex justify-center items-center gap-1.5 px-3 pt-4 pb-3 border-complete-b border-solid border-0 border-b-[1px]",children:[(0,o.jsxs)("div",{className:"flex w-full justify-start items-center gap-1.5 text-neutral-850 text-h5-180",children:[(0,o.jsx)(L.J,{size:24,icon:"cube-social-fidibo",color:(0,tS.$)("color-fidibo")}),r===Q.L.AUDIO?"نسخه صوتی":"نسخه الکترونیکی"]}),(0,o.jsx)(Z.r,{to:u,target:"_blank",children:(0,o.jsxs)("div",{className:"text-body2-strong-180 pr-2 pl-1 py-0.5 text-fidibo flex justify-center items-center rounded-lg border-fidibo border-solid border-[1px] whitespace-nowrap",children:[r===Q.L.AUDIO?"نسخه صوتی در فیدیبو":"دریافت از فیدیبو",(0,o.jsx)(L.J,{icon:"chevronLeft",size:16,color:(0,tS.$)("color-fidibo")})]})})]}),(0,o.jsxs)("div",{className:"p-3 flex items-center justify-between w-full",children:[(0,o.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,o.jsx)("div",{className:"rounded-md overflow-hidden bg-neutral-100",children:(0,o.jsx)(F.E,{alt:l||n,image:d,className:"w-10 h-10",style:{mixBlendMode:"multiply"}})}),(0,o.jsx)("p",{className:"text-icon-high-emphasis text-body1-strong-180 ellipsis-2",children:l||n})]}),r===Q.L.AUDIO&&!(0,_.x)(p)&&!g&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{onClick:function(){h||f(!0),N?m.current.pause():m.current.play(),y(!N)},className:"p-1.5 rounded-circle bg-neutral-100",children:[I&&h?(0,o.jsx)(t8.g,{size:20}):(0,o.jsx)(L.J,{size:20,icon:N?"cube-media-pause":"cube-media-play"}),(0,o.jsx)("audio",{preload:"none",ref:m,onTimeUpdate:function(){var e=m.current.currentTime;C(!e),k(e/D*100)},onLoadedMetadata:function(){M(m.current.duration)},onEnded:function(){y(!1),k(0),f(!1)},onError:function(e){j(!0),(0,eD.g)("Fidibo Error: ",{productId:t.productId,error:e})},className:"hidden",children:(0,o.jsx)("source",{src:p,type:"audio/mpeg"})})]}),(0,o.jsx)("input",{className:(0,es.d)("ltr absolute -bottom-0.5 w-full left-0 h-1.5 transition","transition-transform duration-500 ease-in-out !bg-neutral-100",t9().Fidibo__ProgressBar),style:{transform:"translateY(".concat(h?0:100,"%)")},type:"range",min:"0",max:"100",value:P,onChange:function(e){var t=e.target.value/100*D;m.current.currentTime=t,k(e.target.value)}})]})]})]})})}var st=s(40191),ss=s(86825),si=s(66781),sn=s(43287),sa=s(89086),sr=s(32296),sl=(0,c.memo)(function(e){var t=e.className,s=e.badges,i=(0,E.Z)((0,c.useState)(0),2),n=i[0],a=i[1],r=(0,c.useMemo)(function(){if(a(0),(0,_.x)(s)||1===s.length)return s;s.sort(function(s,i){return(null!==(e=s.priority)&&void 0!==e?e:0)-(null!==(t=i.priority)&&void 0!==t?t:0)});var e,t,i=s.slice(0,3);return i.push(i[0]),i},[s]);return(0,c.useEffect)(function(){if(r.length>1){var e=setInterval(function(){a(function(e){return(e+1)%r.length})},3e3);return function(){clearInterval(e)}}},[r.length]),(0,o.jsx)("div",{className:(0,es.d)("h-7 xs:h-9 mb-1.5 xs:mb-0 flex flex-col gap-3 overflow-hidden",t),children:r.map(function(e){return(0,o.jsxs)("div",{className:(0,es.d)("text-white gap-[6px] items-center flex rounded-lg p-[1px] pl-1.5 max-w-[fit-content]","bg-[rgba(var(--color-black-rgb),0.6)] text-body2-strong-compact justify-start","border-complete !border-[rgba(var(--color-white-rgb),0.2)]"),style:{transform:"translateY(".concat(-36*n,"px)"),transitionDuration:"".concat(0===n?"0s":"".concat(300,"ms"))},children:[(0,o.jsx)("div",{className:"w-5 h-5 rounded-full overflow-hidden bg-white flex justify-center items-center",children:(0,o.jsx)(L.J,{size:14,icon:e.payload.iconName||e.payload.svgIcon})}),(0,o.jsx)("span",{className:"h-3.5 py-[1px] whitespace-nowrap",children:(0,eY.U)(e.payload.text)})]})})})}),so=s(64736),sc=s(62156),sd=s(31222),su=s(24259),sp=s(87049),sm=s(89617),sx=s(51282),sh=s(17978),sf=s(25237),sv=s.n(sf),sg=s(26168),sj=sv()(function(){return s.e(2791).then(s.bind(s,12791)).then(function(e){return e.DigiplusSubscriptionModal})},{loadableGenerated:{webpack:function(){return[12791]}},ssr:!1});function sb(e){var t=e.className,s=(0,K.R)({modalId:"plus-subscription-modal"}),i=s.isOpen,n=s.onOpen,a=s.onClose;return(0,o.jsxs)("div",{className:t,children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(L.J,{icon:"cube-badge-plus",size:18,color:(0,tS.$)("color-plus-500"),className:"ml-1 hidden lg:block"}),(0,o.jsx)("p",{className:"text-body-2-compact text-icon-high-emphasis",children:"ویژه اعضای پلاس"})]}),(0,o.jsx)(sg.m,{CROId:eq.h.PLUS_MEMBERSHIP_PDP,size:"large",mode:"text",removePadding:!0,className:"w-full",onClick:function(){n(),(0,g.d0)({clickedItemName:"membership subscription button",widgetName:tQ.g$})},appendIcon:"chevronLeft",iconColor:(0,tS.$)("color-plus-500"),children:"عضویت در پلاس"}),(0,o.jsx)(sj,{isOpenModal:i,onCloseModal:a})]})}var sN=(0,I.d)(x.X.DIESEL_OIL_KYC);function sy(e){var t=e.className,s=e.hasBorder,i=e.maxCount,n=void 0===i?100:i,a=e.productVariantId,c=(e.isSellerSection,e.isMini,e.shippingItem),d=e.disabled,u=e.actionType,p=e.isLockedForDigiplus,m=(e.isButtonStyleWhenEmpty,e.getFullData),x=e.isApplicationIncredible,h=e.isOrderProfileProduct,f=e.deleteButtonProps,v=e.subtractButtonProps,g=e.addButtonProps,j=e.addToCartButtonProps,b=e.hasMotorOilKyc,N=e.isBuyBoxWinner,w=e.isFromPDP,I=e.hidePlusSubscriptionBox,C=e.isInsuranceActive,P=e.hasInsurance,k=e.isFastShipping,_=e.isElectronicGiftCard,T=e.electronicGiftCardFormData,D=e.beforeAddOrRemoveCartCallback,M=e.afterAddOrRemoveCartCallback,O=e.addToCartCallback,A=e.closeSuccessAddToCartModalCallback,R=e.isBabyPdp,E=e.hideSuccessAddToCartModal,V=void 0!==E&&E,z=e.dkServiceIds,F=(0,sp.v)(X.p.userInfo),U=(0,sp.v)(sm.I.defaultAddress).addressSupportFmcg,Z=(0,sp.v)(X.p.digiplusIsActivated),q=(0,sp.v)(y.b.variantHasDkService),J=(0,W.HF)(a),Q=c||J,H=(null==Q?void 0:Q.cartItemQuantity)||0,$=0!==H,Y=(0,K.R)({modalId:"motor-kyc"}),ee=Y.isOpen,et=Y.onClose,ei=Y.onOpen,en=(0,K.R)({modalId:"addToCart"}),el=en.isOpen,eo=en.onClose,ec=en.onOpen,ed=(0,ea.J)({action:er.cD}),eu=ed.request,ep=ed.pending,em=(0,ea.J)({action:er.on}),ex=em.request,eh=em.pending,ef=ep||eh;function ev(){null==O||O(),null==D||D(),eu({productVariantId:a,getFullData:m,isBuyBoxWinner:N,isFromPDP:w,isInsurance:C&&P,isElectronicGiftCard:_,electronicGiftCardFormData:T,dkServiceIds:q?z:void 0}).then(function(){null==M||M(),h&&(0,eC.p)({message:"کالای موردنظر با موفقیت اضافه شد"}),$||R||V||ec()})}var eg=function(e){if(null==e||e.stopPropagation(),null==e||e.preventDefault(),!ef){if(_&&!(null==T?void 0:T.isValid)){(0,eW.X5)(so.Y);return}if(sN&&F.userVerificationStatus!==su.A.NOT_AUTHENTICATED&&F.userVerificationStatus!==su.A.REJECTED&&b){ei();return}H||!k||U?ev():(0,sx.Ep)(sx.EV,{title:"محدودیت ارسال کالا",description:"ارسال سریع کالاهای سوپرمارکتی فقط در تهران و کرج امکان‌پذیر است.\nبا توجه به محدودیت ارسال، آیا مایل هستید این کالا به سبد خرید شما افزوده شود؟",acceptActionText:"بله",rejectActionText:"خیر",onConfirm:ev})}},ej=function(e){null==D||D(),null==e||e.stopPropagation(),null==e||e.preventDefault(),ef||ex({cartItemId:null==Q?void 0:Q.cartItemId,productVariantId:a,getFullData:m,isBuyBoxWinner:N,isFromPDP:w}).then(function(){null==M||M()})},eb=(0,es.d)("flex items-center justify-between user-select-none",{"w-1/2 gap-2 rounded-medium":$,"w-1/2":!$,"shadow-fab-button":$&&!s,"border-complete-200":$&&s},t),eN=(0,es.d)("flex items-center h-full p-3",{"opacity-50 cursor-not-allowed pointer-events-none":1===H}),ey=(0,es.d)("flex items-center h-full p-3"),ew=(0,es.d)("flex items-center h-full p-3",{"opacity-50 pointer-events-none p-0 lg:p-0":H===n});return d?null:I||Z||"PlusLink"!==u&&!p?x?(0,o.jsxs)("div",{className:t,children:[(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsx)("p",{className:"text-caption text-neutral-600",children:"فقط برای کاربران اپلیکیشن"})}),(0,o.jsx)(B.z,{useAnchorTag:!0,mode:"text",removePadding:!0,size:"large",color:"primary",isLoading:ef,to:G.jT,appendIcon:"chevronLeft",appendIconClassName:"!mr-0",iconColor:(0,tS.$)("color-primary-500"),children:"مشاهده در اپلیکیشن"})]}):(0,o.jsxs)("div",{className:eb,children:[$?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(L.J,(0,r.Z)({icon:"addSimple",size:24,color:"primary",className:ew,onClick:eg,"data-testid":sd.i.QUANTITY.INCREASE_QUANTITY},void 0===g?{}:g)),(0,o.jsx)("span",{className:"flex flex-col items-center justify-between text-primary-500",children:ef?(0,o.jsx)(t8.g,{size:24,color:"red"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:(0,es.d)("relative flex items-center justify-center text-h4",{"max-h-[20px] top-1":n===H}),children:(0,eY.U)(H)}),n===H?(0,o.jsx)("small",{className:"text-caption text-neutral-300",children:"حداکثر"}):null]})}),H<2?(0,o.jsx)(L.J,(0,r.Z)({"data-testid":sd.i.QUANTITY.DECREASE_QUANTITY,icon:"delete",size:24,color:"primary",className:ey,onClick:ej},void 0===f?{}:f)):(0,o.jsx)(L.J,(0,r.Z)({"data-testid":sd.i.QUANTITY.DECREASE_QUANTITY,icon:"removeSimple",size:24,color:"primary",className:eN,onClick:ej},void 0===v?{}:v))]}):(0,o.jsx)(B.z,(0,l.Z)((0,r.Z)({size:"large",shape:"filled",onClick:eg,isLoading:ef,className:"text-button-2 w-full"},void 0===j?{}:j),{"data-add-to-cart-variant-id":a,"data-testid":sd.i.QUANTITY.ADD_TO_CARD,children:"افزودن به سبد خرید"})),sN&&(0,o.jsx)(sc.l,{variantId:a,isOpen:ee,onDismiss:et,onSubmit:ev}),!(0,S.$i)()&&(0,o.jsx)(sh.w,{buttonProps:{size:"large"},shouldCloseOnPageChange:!1,isOpenModal:el,closeModal:function(){null==A||A(),eo()},productVariantId:a})]}):(0,o.jsx)(sb,{className:t})}var sw=s(41046),sI=s(5759),sC=s(99866);function sS(e){var t=e.defaultVariant,s=e.showModal,i=e.closeModal;e.rrpPrice;var n=t||{},a=n.productVariantPriceGoldPrice,r=n.productVariantPriceGoldNonGoldPartsCost,l=n.productVariantPriceGoldNonGoldPartsWage,c=n.productVariantPriceGoldWage,d=n.productVariantPriceGoldProfit,u=n.productVariantPriceGoldTax,p=n.productVariantPriceGoldSize,m=n.productVariantPriceGoldTotalPrice,x=n.productVariantPriceGoldTotalProfit,h=n.productVariantPriceGoldTotalTax,f=n.productVariantPriceGoldTotalGoldWage,v=n.productVariantPriceRrpPrice;return(0,o.jsx)(ec.R,{isOpen:s,onClose:i,header:(0,o.jsx)(eU.D,{title:"جزییات قیمت",titleClassName:"text-h5",className:"bg-neutral-000"}),children:(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsxs)("div",{className:"pb-4 lg:pb-3 border-complete-b border-n-200 mb-4 lg:mb-3",children:[(0,o.jsx)(sC.Q,{title:"قیمت روز یک گرم طلا",value:null!=a?a:"۰"}),(0,o.jsx)(sC.Q,{title:"وزن طلای به ‌کار رفته",value:p,unit:"گرم"})]}),(0,o.jsx)(sC.Q,{title:"قیمت طلای به‌ کار رفته",value:null!=m?m:"۰"}),(0,o.jsx)(sC.Q,{title:"اجرت ساخت",discount:null!=c?c:0,value:null!=f?f:"۰"}),(0,o.jsx)(sC.Q,{title:"قیمت اجزای غیرطلا",value:null!=r?r:"۰"}),(0,o.jsx)(sC.Q,{title:"اجرت اجزای غیرطلا / حق ضرب",value:null!=l?l:"۰"}),(0,o.jsx)(sC.Q,{title:"سود فروشنده",discount:null!=d?d:0,value:null!=x?x:"۰"}),(0,o.jsx)(sC.Q,{title:"مالیات",discount:null!=u?u:0,value:null!=h?h:"۰"}),(0,o.jsx)("div",{className:"border-complete-t border-n-200 mt-4 mb-1 lg:mb-0 lg:mt-3 pt-4 lg:pt-3",children:(0,o.jsx)(sC.Q,{title:"مجموع",titleClassName:"lg:text-neutral-700 lg:text-md lg:font-bold",value:v})})]})})}function sP(e){var t=e.price,s=e.className,i=e.sellingPrice,n=e.discount,a=e.hasInsurance,r=e.hasDkService,l=e.defaultVariant,d=e.insuranceSellingPrice,u=(0,sI.h)(n)&&0!==n,p=(0,E.Z)((0,c.useState)(a),2),m=p[0],x=p[1];(0,c.useEffect)(function(){a?(x(!0),setTimeout(function(){x(!1)},3e3)):x(!1)},[a]);var h=(l||{}).productVariantPriceGoldSize,f=(0,K.R)({modalId:"gold-modal"}),v=f.isOpen,g=f.onOpen,j=f.onClose;return(0,o.jsxs)("div",{className:(0,es.d)("flex flex-col justify-center items-center",s),children:[u&&(0,o.jsxs)("div",{className:"w-full flex justify-end items-center gap-1",children:[(0,o.jsxs)("span",{className:"inline-block !h-4 px-1.5 pt-0.5 bg-hint-object-error rounded-full text-white text-body1-strong-compact flex justify-center items-center gap-0.5",children:["٪ ",(0,eY.U)(n)]}),(0,o.jsx)("div",{className:"text-body-1-compact line-through text-icon-low-emphasis",children:(0,ed.j)(t)})]}),(0,o.jsxs)("div",{className:"w-full flex gap-1 item-center justify-end text-h3-bold-compact",children:[(0,o.jsxs)("div",{className:"min-w-[16px] flex align-center space-x-1",children:[a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J.u,{label:"افزایش ".concat((0,ed.j)(d)," تومان برای بیمه"),position:"top",openTooltip:m,hasArrow:!0,tooltipOffset:[-8,0]}),(0,o.jsx)(L.J,{onClick:function(){x(!0),setTimeout(function(){x(!1)},3e3)},className:"flex justify-center items-center",size:16,icon:"cube-shop-insurance",color:(0,tS.$)("color-digipay")})]}),r&&(0,o.jsx)(L.J,{className:"flex justify-center items-center",size:16,icon:"cube-cat-service",color:"primary"}),h&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(L.J,{className:"flex justify-center items-center",size:16,icon:"cube-alert-info-outline",color:"low-emphasis",onClick:g}),(0,o.jsx)(sS,{rrpPrice:t,closeModal:j,showModal:v,defaultVariant:l})]})]}),(0,ed.j)(u?i:t),(0,o.jsx)(L.J,{className:"flex justify-center items-center",icon:"cube-value-toman",size:16})]})]})}function sk(e){var t,s,i=e.className,n=e.showFomoBadges,a=e.isNotMarketable,r=e.lowestPrice,l=e.productNewBadges,u=e.isInsuranceActive,p=e.insuranceSellingPrice,m=e.defaultVariant,x=(e.onInsuranceModalOpen,e.productId),h=e.setShowCartTooltip,f=e.dkServiceIds,v=m||{},g=v.productVariantPriceRrpPrice,b=v.productVariantPriceSellingPrice,N=v.productVariantPriceDiscountPercent,w=v.productVariantPriceIsLockedForDigiplus,I=v.productVariantPriceIsApplicationIncredible,C=v.productVariantPropertiesIsFastShipping,S=v.productVariantPriceOrderLimit,P=v.productVariantId,k=v.productVariantMotorOilKyc,_=v.productVariantBadges,T=(0,z.zX)().emit,D=(0,W.HF)(P),M=0!==((null==D?void 0:D.cartItemQuantity)||0),O=!(0,eo.k)(D)&&!!D.cartItemHasInsurance,A=(0,d.v9)(y.b.variantHasInsurance),R=M?O:A,F=!(0,eo.k)(D)&&!!D.cartItemHasDkService,U=(0,d.v9)(y.b.variantHasDkService),Z=(0,c.useMemo)(function(){return(0,V.Z)(_).concat((0,V.Z)(l))},[_,l]),q=(0,d.v9)(X.p.isLoggedIn),J=(0,$.V)({apiMethod:ei.W,apiData:{productId:x},disabled:!q}).data,Q=(0,ew.e)().redirect,H=(0,E.Z)((0,c.useState)(!!(null==J?void 0:null===(t=J.product)||void 0===t?void 0:null===(s=t.productUserReactions)||void 0===s?void 0:s.productHasOnStockObserverActive)),2),G=H[0],Y=H[1],et=(0,K.R)({modalId:"notify-me"}),en=et.isOpen,ea=et.onOpen,er=et.onClose,el=(0,ey.E)({apiMethod:sr.I}),ec=el.request,eu=el.pending,ep=(0,ey.E)({apiMethod:st.K}),em=ep.request,ex=ep.pending;return(0,o.jsxs)("div",{className:(0,es.d)(i,"fixed bottom-0 left-0 w-screen bg-white z-2 border-complete-t !border-t-neutral-200"),children:[!(0,eO.xb)(r)&&(null==r?void 0:r.productVariantPriceSellingPrice)>0&&b-r.productVariantPriceSellingPrice>0&&(0,o.jsxs)("div",{onClick:function(){T(si.Fg,null==r?void 0:r.productVariantId)},className:"flex justify-between items-center bg-background-caution px-4 py-1",children:[(0,o.jsxs)("div",{className:"flex gap-2 justify-start items-center text-body1-strong",children:[(0,o.jsx)(L.J,{icon:"cube-alert-info-outline",color:(0,eO.$l)("color-hint-text-caution"),size:16}),"این کالا را \xab",(0,ed.j)(b-r.productVariantPriceSellingPrice)," ","تومان\xbb ارزان‌تر بخرید"]}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20,color:"secondary-700"})]}),a?(0,o.jsx)("div",{className:(0,ee.S)()?"pt-3 pb-6 px-4":"py-3 px-4",children:(0,o.jsxs)(B.z,{size:"large",mode:G?"outlined":"filled",onClick:function(e){if(e.preventDefault(),!q){Q({toLoginRegisterRoute:!0,withBackUrl:!0});return}G?em({productId:x,type:ss.l.ON_STOCK,sendEmail:!1,sendSms:!1,sendNotification:!1}).then(function(){(0,eC.p)({message:"اطلاع‌رسانی برای موجودشدن غیرفعال شد. "}),Y(!1)}):ea()},className:(0,es.d)("w-full text-button-2",{"py-3":G},i),CROId:!G&&"pdp-not-found-cta",children:[(0,o.jsx)(L.J,{icon:"notificationActiveOutline",size:24,color:G?"primary":"white",className:"ml-2"}),G?"دیگر لازم نیست خبرم کنید":"موجود شد خبرم کنید"]})}):(0,o.jsxs)("div",{className:(0,ee.S)()?"pt-3 pb-6 px-4":"py-3 px-4",children:[!(0,eO.xb)(Z)&&(0,o.jsx)("span",{className:(0,es.d)("block transition-all z-1 relative",{"max-h-0 duration-500":!n,"max-h-[36px] duration-500":n}),children:(0,o.jsx)(sl,{badges:Z})}),(0,o.jsxs)("div",{className:"w-full flex justify-between gap-3 z-2 bg-white relative",children:[(0,o.jsx)(sy,{isFromPDP:!0,addButtonProps:(0,sa.t)("pdp-main-add-quantitiy"),addToCartButtonProps:(0,sa.t)("pdp-add-to-cart"),subtractButtonProps:(0,sa.t)("pdp-decrease-main-quantity"),deleteButtonProps:(0,sa.t)("pdp-main-delete-quantitiy"),isLockedForDigiplus:w,className:"!min-h-[48px] !max-h-[48px]",isApplicationIncredible:I,isFastShipping:C,maxCount:S,productVariantId:P,hasMotorOilKyc:k,isInsuranceActive:u,hasInsurance:R,isElectronicGiftCard:!1,closeSuccessAddToCartModalCallback:h,beforeAddOrRemoveCartCallback:function(){j.u.setPageType((0,sn.C)())},afterAddOrRemoveCartCallback:function(){j.u.setPageType(null)},dkServiceIds:f}),(0,o.jsx)(sP,{defaultVariant:m,insuranceSellingPrice:p,className:"w-1/2",hasInsurance:R,price:g,sellingPrice:b,discount:N,hasDkService:M?F:U})]})]}),(0,o.jsx)(sw.a,{showModal:en,closeModal:er,onSubmit:function(e){var t=e.sendEmail,s=e.sendSms,i=e.sendNotification;ec({productId:x,type:ss.l.ON_STOCK,sendEmail:t,sendSms:s,sendNotification:i}).then(function(){(0,eC.p)({message:"در صورت موجودشدن، به شما اطلاع می‌دهیم."}),er(),Y(!0)}).catch(function(){er()})},submitLoading:eu||ex,isAmazing:!1,userReactions:J})]})}var s_=s(43952),sT=s(98395),sD=s(71998);function sM(e){var t=e.className,s=e.length,i=e.activeIndex,n=Array(s).fill(null);return((0,c.useEffect)(function(){var e,t=document.querySelector('[data-active-dot="'.concat(i,'"]'));null==t||null===(e=t.scrollIntoView)||void 0===e||e.call(t,{behavior:"smooth",block:"center",inline:"center"})},[i]),s>=6)?(0,o.jsx)("div",{className:(0,es.d)("h-7 xs:h-9",t),children:(0,o.jsx)("div",{className:(0,es.d)("py-2 rounded-lg","bg-[rgba(var(--color-black-rgb),0.6)] overflow-hidden","border-complete !border-[rgba(var(--color-white-rgb),0.2)]"),children:(0,o.jsxs)("div",{className:"overflow-hidden flex gap-[3px] w-full items-center",children:[(0,o.jsx)("span",{className:"pr-1 h-1"}),Array(6).fill(null).map(function(e,t){return(0,o.jsx)("span",{className:(0,es.d)("rounded-md bg-[rgba(var(--color-white-rgb),0.3)] grow block duration-200",{"w-4 h-1.5 min-w-[20px] !bg-white":t===i&&i<5||4===t&&i>=5&&i!==s-1||5===t&&i===s-1,"!min-w-[4px] !w-1 !h-1":5===t&&i!==s-2&&i!==s-1||0===t&&i>=5,"min-w-[6px] w-1.5 h-1.5":5!==t||5===t&&i===s-2})})}),(0,o.jsx)("span",{className:"pl-1 h-1"})]})})}):(0,o.jsx)("div",{className:(0,es.d)("h-7 xs:h-9",t),children:(0,o.jsx)("div",{className:(0,es.d)("py-2 rounded-lg","bg-[rgba(var(--color-black-rgb),0.6)] max-w-[75px] overflow-hidden","border-complete !border-[rgba(var(--color-white-rgb),0.2)]"),children:(0,o.jsxs)("div",{className:"overflow-hidden flex gap-[3px] w-full",children:[(0,o.jsx)("span",{className:"pr-1 h-1"}),n.map(function(e,t){return(0,o.jsx)("span",{"data-active-dot":t,className:(0,es.d)("min-w-[6px] w-1.5 h-1.5 rounded-md bg-[rgba(var(--color-white-rgb),0.3)] grow block duration-200",{"!w-4 !min-w-[20px] !bg-white":t===i})})}),(0,o.jsx)("span",{className:"pr-1 h-1"})]})})})}var sO=s(14061),sA=s(91650),sR=s(5556),sE=s.n(sR);function sV(e){var t=e.mainMedia,s=e.mainMediaLength,i=(e.onOpenAllImages,e.setInitialActiveTabName),n=e.setActiveSlide,a=e.commentsMedia,r=e.magnetMedia,l=e.pending,c=e.onClick,d=t.length>=18?t[18]:t[0],u=(0,_.x)(a)?null:a[0].commentFiles[0].mediaUrl,p=(0,_.x)(a)?[]:a.flatMap(function(e){return e.commentFiles.map(function(e){return e})}),m=(0,_.x)(r)?null:r[0].magnetPostMedia.mediaThumbnailUrl,x=function(){i(sA.U.MAIN),n(0)},h=function(){i(sA.U.COMMENTS),n(s)},f=function(){i(sA.U.MAGNET),n(s+p.length)};if(l)return(0,o.jsxs)("div",{className:"bg-white w-full grid grid-cols-2 grid-rows-2 gap-[6px] p-3",children:[(0,o.jsx)(sO.O,{}),(0,o.jsx)(sO.O,{}),(0,o.jsx)(sO.O,{}),(0,o.jsx)("div",{onClick:c,className:"w-full h-full flex justify-center items-center flex-col gap-3 cursor-pointer",children:(0,o.jsx)(B.z,{removePadding:!0,onClick:x,mode:"filled",className:"!bg-secondary-700 !border-none !rounded-lg",children:(0,o.jsxs)("span",{className:"flex gap-[6px] justify-center items-center text-body-1-180 text-white whitespace-nowrap px-2 py-1.5 h-8",children:[(0,o.jsx)(L.J,{icon:"cube-file-image",size:20,color:(0,tS.$)("color-text-secondary-700")}),"همه تصویرها",(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:16,color:(0,tS.$)("color-text-secondary-700")})]})})})]});if(!(0,_.x)(a)&&!(0,_.x)(r)){var v="flex justify-center items-center overflow-hidden rounded-md relative";return(0,o.jsxs)("div",{className:"bg-white w-full grid grid-cols-2 grid-rows-2 gap-[6px] p-3",children:[(0,o.jsxs)("div",{className:v,onClick:x,children:[(0,o.jsx)(F.E,{image:d}),(0,o.jsxs)("span",{className:(0,es.d)("absolute w-full h-full flex justify-start items-end py-1.5 px-2 text-white text-body-1",sE().Gallery__showMoreBG),children:["رسمی (",(0,eY.U)(t.length)," تصویر)"]})]}),(0,o.jsxs)("div",{className:v,onClick:h,children:[(0,o.jsx)(F.E,{src:u}),(0,o.jsxs)("span",{className:(0,es.d)("absolute w-full h-full flex justify-start items-end py-1.5 px-2 text-white text-body-1",sE().Gallery__showMoreBG),children:["خریدار (",(0,eY.U)(p.length)," تصویر)"]})]}),(0,o.jsxs)("div",{className:v,onClick:f,children:[(0,o.jsx)(F.E,{src:m}),(0,o.jsxs)("span",{className:(0,es.d)("absolute w-full h-full flex justify-start items-end py-1.5 px-2 text-white text-body-1",sE().Gallery__showMoreBG),children:["مگنت (",(0,eY.U)(r.length)," ویدئو)"]})]}),(0,o.jsx)("div",{onClick:c,className:"w-full h-full flex justify-center items-center flex-col gap-3 cursor-pointer",children:(0,o.jsx)(B.z,{removePadding:!0,onClick:x,mode:"filled",className:"!bg-secondary-700 !border-none !rounded-lg",children:(0,o.jsxs)("span",{className:"flex gap-[6px] justify-center items-center text-body-1-180 text-white whitespace-nowrap px-2 py-1.5 h-8",children:[(0,o.jsx)(L.J,{icon:"cube-file-image",size:20,color:(0,tS.$)("color-text-secondary-700")}),"همه تصویرها",(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:16,color:(0,tS.$)("color-text-secondary-700")})]})})})]})}if(!(0,_.x)(a)||!(0,_.x)(r)){var g="flex justify-center items-center overflow-hidden rounded-md relative";return(0,o.jsxs)("div",{className:"bg-white w-full grid grid-cols-2 grid-rows-2 gap-[6px] p-3",children:[(0,o.jsxs)("div",{className:g,onClick:x,children:[(0,o.jsx)(F.E,{image:d}),(0,o.jsxs)("span",{className:(0,es.d)("absolute w-full h-full flex justify-start items-end py-1.5 px-2 text-white text-body-1",sE().Gallery__showMoreBG),children:["رسمی (",(0,eY.U)(t.length)," تصویر)"]})]}),!(0,_.x)(a)&&(0,o.jsxs)("div",{className:g,onClick:h,children:[(0,o.jsx)(F.E,{src:u}),(0,o.jsxs)("span",{className:(0,es.d)("absolute w-full h-full flex justify-start items-end py-1.5 px-2 text-white text-body-1",sE().Gallery__showMoreBG),children:["خریدار (",(0,eY.U)(p.length)," تصویر)"]})]}),!(0,_.x)(r)&&(0,o.jsxs)("div",{className:g,onClick:f,children:[(0,o.jsx)(F.E,{src:m}),(0,o.jsxs)("span",{className:(0,es.d)("absolute w-full h-full flex justify-start items-end py-1.5 px-2 text-white text-body-1",sE().Gallery__showMoreBG),children:["مگنت (",(0,eY.U)(r.length)," ویدئو)"]})]}),(0,o.jsx)("div",{onClick:c,className:"w-full h-full flex justify-center items-center flex-col gap-3 cursor-pointer col-span-2",children:(0,o.jsx)(B.z,{removePadding:!0,onClick:x,mode:"filled",className:"!bg-secondary-700 !border-none !rounded-lg",children:(0,o.jsxs)("span",{className:"flex gap-[6px] justify-center items-center text-body-1-180 text-white whitespace-nowrap px-2 py-1.5 h-8",children:[(0,o.jsx)(L.J,{icon:"cube-file-image",size:20,color:(0,tS.$)("color-text-secondary-700")}),"همه تصویرها",(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:16,color:(0,tS.$)("color-text-secondary-700")})]})})})]})}return(0,o.jsxs)("div",{onClick:c,className:"bg-white w-full h-full flex justify-center items-center flex-col gap-3 cursor-pointer",children:[(0,o.jsx)(L.J,{icon:"cube-file-image",size:28,color:(0,tS.$)("color-icon-high-emphasis")}),(0,o.jsx)(B.z,{removePadding:!0,onClick:x,mode:"filled",className:"!bg-secondary-700 !border-none !rounded-lg",children:(0,o.jsxs)("span",{className:"flex gap-1/5 justify-center items-center text-body-1-180 text-white whitespace-nowrap px-2 py-1.5 h-8",children:["همه تصویرها",(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20,color:(0,tS.$)("color-text-secondary-700")})]})})]})}function sz(e){var t=e.product,s=e.setInitialActiveTabName,i=e.hasRequestedForComments,n=e.updateCommentsRequested,a=e.setActiveSlide,r=e.onOpenGallery,l=t||{},d=l.productId,u=l.productImage,p=l.productImagesList,m=l.productImageAlt,x=l.productVideos,h=l.productShowType,f=l.productNewBadges,v=l.productDefaultVariant,g=l.productStatus,j=(v||{}).productVariantBadges,b=(0,E.Z)((0,c.useState)(0),2),N=b[0],y=b[1],w=[u].concat((0,V.Z)(p||[]),(0,V.Z)(x)).length,I=(0,c.useMemo)(function(){return(0,V.Z)(j).concat((0,V.Z)(f))},[j,f]),C=[u].concat((0,V.Z)((p||[]).slice(0,18)));(0,c.useEffect)(function(){N>=C.length-4&&!i&&n()},[N,t]);var S=(0,$.V)({apiMethod:sD._,disabled:!i,apiData:{productId:d},initialValue:[]}),P=S.data,k=S.pending,T=(0,$.V)({apiMethod:M.g,disabled:!i,apiData:{productId:d},initialValue:[]}),D=T.data,O=T.pending,A=!(0,eO.tx)(H.eM.MARKETABLE,g);return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)(s_.t,{className:"bg-neutral-100",onSlideChange:function(e){y(e.activeIndex)},children:[C.map(function(e,t){return(0,o.jsx)(sT.o,{className:"flex justify-center bg-neutral-100",onClick:function(){a(t?t+((null==x?void 0:x.length)||0):0),r()},children:(0,o.jsx)(F.E,{alt:m,image:e,className:(0,eO.dh)({"max-h-[250px] h-[250px] w-[250px]":h!==H.v$.FASHION,"max-h-[375px] h-[375px] w-[375px]":h===H.v$.FASHION}),imageClassName:"w-full h-full",objectFit:"cover",style:{mixBlendMode:"multiply"}})})}),(0,o.jsx)(sT.o,{className:(0,eO.dh)("flex justify-center bg-neutral-100",{"!h-[250px]":h!==H.v$.FASHION,"!h-[375px]":h===H.v$.FASHION}),children:(0,o.jsx)(sV,{mainMediaLength:w,setActiveSlide:function(e){a(e),r()},setInitialActiveTabName:s,pending:k||O,commentsMedia:P,magnetMedia:D,mainMedia:C})})]}),!(0,_.x)(x)&&N!==C.length&&(0,o.jsx)(B.z,{className:"p-1.5 !absolute right-1.5 top-1.5 z-10",mode:"text",removePadding:!0,onClick:function(){a(1),r()},children:(0,o.jsx)("div",{className:"p-2 rounded-full bg-[rgba(var(--color-black-rgb),0.6)] outline outline-1 !outline-[rgba(var(--color-white-rgb),0.2)]",children:(0,o.jsx)(L.J,{icon:"cube-media-video",size:16,color:"white"})})}),(0,o.jsxs)("div",{className:"absolute w-full bottom-0 z-10 flex justify-between p-3 !pb-0 flex-col xs:flex-row pointer-events-none",children:[N!==C.length&&!A&&(0,o.jsx)(sl,{badges:I}),(0,o.jsx)(sM,{className:"xs:mr-auto ml-auto xs:ml-0",activeIndex:N,length:C.length+1})]})]})}var sB=sv()(function(){return Promise.all([s.e(3325),s.e(3459),s.e(3266),s.e(694)]).then(s.bind(s,58918)).then(function(e){return e.GalleryModal})},{loadableGenerated:{webpack:function(){return[58918]}}});function sL(e){var t=e.product,s=e.className,i=e.hasRequestedForComments,n=e.updateCommentsRequested,a=(t||{}).productTitle,r=(0,K.R)({modalId:"gallery"}),l=r.isOpen,d=r.onClose,u=r.onOpen,p=(0,ti.d)(),m=p.isOpen,x=p.onClose,h=p.onOpen,f=(0,c.useRef)(!1),v=(0,E.Z)((0,c.useState)(0),2),j=v[0],b=v[1],N=(0,E.Z)((0,c.useState)(void 0),2),y=N[0],w=N[1],I=(0,E.Z)((0,c.useState)(void 0),2),C=I[0],S=I[1],P=(0,E.Z)((0,c.useState)(sA.U.MAIN),2),k=P[0],T=P[1],D=(0,E.Z)((0,c.useState)(0),2),M=D[0],O=D[1],A=function(){u(),f.current||((0,g.d0)({clickedItemName:"gallery_modal_v2",widgetName:tQ.Zy,pageInfo:{productId:t.productId}}),f.current=!0)};return(0,c.useEffect)(function(){var e=function(e){var t=e.detail;t&&t.id&&(b(t.id),(0,eo.k)(t.commentFileIndex)||w(t.commentFileIndex)),A(),T(sA.U.COMMENTS)};window.addEventListener("DKShowCommentImagesModal",e);var t=function(e){var t=e.detail;t&&!(0,_.x)(t.index)&&S(t.index),A(),T(sA.U.MAGNET)};return window.addEventListener("DKShowMagnetModal",t),function(){window.removeEventListener("DKShowCommentImagesModal",e),window.removeEventListener("DKShowMagnetModal",t)}},[]),(0,o.jsxs)("div",{className:(0,es.d)("relative h-full",s),children:[(0,o.jsx)(sz,{product:t,onOpenGallery:A,setActiveSlide:O,setInitialActiveTabName:T,updateCommentsRequested:n,hasRequestedForComments:i}),(0,o.jsx)(sB,{show:l,activeSlide:M,onClose:function(){d(),x(),setTimeout(function(){b(0),w(void 0),S(void 0),T(sA.U.MAIN)},500)},product:t,initialActiveTabIndex:k,imageAltText:"خرید و قیمت ".concat(a),showAllImages:m,setShowAllImages:function(e){e?h():x()},initialCurrenCommentId:j,initialCommentFileIndex:y,initialMagnetIndex:C,hasFreeShipping:!1,hasTodayShipping:!1,productHasNoVariant:!1})]})}var sF=s(16798);function sU(e){var t,s,i,n,a=e.defaultVariantItem,r=e.className,l=(0,c.useRef)(),d=a||{},u=d.productVariantPriceTimer,p=d.productVariantPriceSoldPercentage;(0,c.useEffect)(function(){l.current&&setTimeout(function(){l.current&&(l.current.style.width="".concat(100-p,"%"))},700)},[l.current]);var m=(0,E.Z)((0,c.useState)(100),2),x=m[0],h=m[1];(0,c.useEffect)(function(){var e,t=1e3/p;if(100-p>=0&&100-p<=100)return setTimeout(function(){e=setInterval(function(){h(function(t){return t>100-p?t-1:(clearInterval(e),t)})},t)},700),function(){return clearInterval(e)}},[p,1e3]);var f=(s=(t=a||{}).productVariantPriceIsPromotion,i=t.productVariantPriceIsIncredible,n=t.productVariantPriceIsLighteningDeal,(t.productVariantPriceIsApplicationIncredible?{bgColor:"#F6E5E9",textColor:"#E7133D",progressBarColor:"#F2B1BE",title:"شگفت‌انگیز اپ"}:n?{bgColor:"#feebf6",textColor:"#FB008F",progressBarColor:"#feebf6",icon:"/statics/img/svg/pdp/lightening.svg"}:s?{bgColor:"#F6E5E9",textColor:"#E7133D",progressBarColor:"#F2B1BE",icon:"/statics/img/svg/pdp/special.svg"}:i?{bgColor:"#F6E5E9",textColor:"#E7133D",progressBarColor:"#F2B1BE",icon:"/statics/img/svg/pdp/incredible-offer.svg"}:void 0)||{}),v=f.title,g=f.icon,j=f.bgColor,b=f.textColor,N=f.progressBarColor,y=(0,sF.J)(u,{hasDays:!1});return(0,_.x)(v||g)?null:(0,o.jsxs)("div",{className:(0,es.d)("w-full relative",r),children:[(0,o.jsx)("div",{className:"w-full absolute overflow-hidden z-1 flex h-10 rounded-t-[19px]",style:{top:"-1px",right:"-3px",width:"calc(100% + 6px)"},children:(0,o.jsx)("div",{style:{backgroundColor:N},className:"w-full",children:(0,o.jsx)("span",{ref:l,style:{width:"100%",transition:"1s",backgroundColor:b},className:"w-full inline-block h-full"})})}),(0,o.jsxs)("div",{className:"top-[3px] w-full text-body-1 flex justify-between items-center p-3 pb-5 relative z-2 rounded-t-lg",style:{backgroundColor:j,color:b},children:[(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[g?(0,o.jsx)(F.E,{src:g}):(0,o.jsx)("span",{className:"text-body1-strong",children:v}),p&&(0,o.jsxs)("span",{className:"text-body1-strong",children:[(0,eY.U)(x),"٪ باقی مانده"]})]}),!(0,D.t)(y,0)&&(0,o.jsxs)("div",{className:"flex justify-center items-center gap-1",children:[(0,o.jsx)("div",{style:{color:b},children:(0,o.jsx)("span",{className:"text-body1-strong",children:y})}),(0,o.jsx)(L.J,{icon:"cube-action-time",size:16,color:b})]})]})]})}var sZ=s(53018),sq=s.n(sZ);function sJ(e){var t=e.isOpen,s=e.onClose,i=(e.isOpenAfterAddToCart,e.hasSelectedInsurance),n=e.productVariantId,a=e.handleInsurance,r=e.insurance||{},l=r.insuranceDetails,c=r.insuranceMoreUrl,d=void 0===c?"https://dgpy.ir/jfti":c,u=(0,v.C)().isDesktop,p=(0,W.HF)(n);return(0,o.jsxs)(ec.R,{isOpen:t,onClose:s,header:(0,o.jsx)("div",{className:"flex justify-between items-center",children:(0,o.jsx)("p",{className:"text-h5 text-neutral-700",children:"جزئیات بیمه دیجیتال"})}),children:[(0,o.jsx)("div",{className:"tab-content mx-3 pb-16",children:(0,o.jsxs)("div",{className:"py-4",children:[(0,o.jsx)("h2",{className:"text-h5",children:"جبران خسارت‌های حادثه با بیمه محصول‌های دیجیتال"}),(0,o.jsxs)("h2",{className:"text-body1-strong text-icon-high-emphasis flex justify-start items-center gap-2",children:["قدرت‌گرفته از",(0,o.jsxs)("span",{className:"flex justify-center items-center",children:[(0,o.jsx)(L.J,{icon:"cube-brand-digipay-logotype-en",color:(0,tS.$)("color-digipay"),size:20,className:"!w-18 justify-center items-center"}),(0,o.jsx)(L.J,{icon:"digipay",size:20,color:(0,tS.$)("color-digipay")})]})]}),(0,o.jsxs)("ul",{className:"rounded-lg bg-app-background p-2 mt-4",children:[(0,o.jsx)("li",{className:"text-h5 text-icon-high-emphasis mb-1",children:"شرایط جبران خسارت"}),(void 0===l?[]:l).map(function(e){return(0,o.jsx)("li",{className:"mr-4 list-disc text-body-1 text-icon-high-emphasis",children:e})}),!!d&&(0,o.jsx)(e2.e,{mode:"anchor",labelSize:"medium",href:d,target:"_blank",className:"mt-4",children:"اطلاعات بیشتر"})]})]})}),!i&&(0,o.jsxs)("div",{className:(0,es.d)("w-full flex items-center p-4 fixed bottom-0 left-0 bg-white",sq().InsuranceModal__buttons),children:[(0,o.jsx)(B.z,{color:"primary",size:"large",CROId:"adding-good-by-insurance",className:"grow ml-3",onClick:a({addToCart:!0,checked:!0,callback:s}),children:p?"افزودن بیمه به کالا":"افزودن کالا و بیمه".concat(u?" به سبد":"")}),(0,o.jsx)(B.z,{color:"primary",mode:"outlined",size:"large",CROId:"dont-want-insurance",className:"grow",onClick:s,children:"فعلا تمایل ندارم"})]}),i&&(0,o.jsx)("div",{className:(0,es.d)("w-full flex items-center p-4 fixed bottom-0 left-0 bg-white",sq().InsuranceModal__buttons),children:(0,o.jsx)(B.z,{color:"primary",mode:"outlined",size:"large",CROId:"dont-want-insurance",className:"grow",onClick:a({checked:!1,callback:s}),children:"حذف بیمه"})})]})}function sQ(e){var t=e.className,s=e.defaultVariant,i=e.isInsuranceModalOpen,n=e.onInsuranceModalClose,a=e.onInsuranceModalOpen,r=(s||{}).variantInsurance,l=r||{},u=l.insuranceDiscountPercent,p=l.insuranceBeforeDiscountPrice,m=l.insuranceSellingPrice,x=(0,E.Z)((0,c.useState)(!1),2),h=x[0],f=x[1],v=(0,d.I0)(),g=(0,W.HF)(s.productVariantId),j=(0,E.Z)((0,c.useState)(!(0,eo.k)(g)&&!!g.cartItemHasInsurance),2),b=j[0],N=j[1],y=0!==((null==g?void 0:g.cartItemQuantity)||0),w=(0,ea.J)({action:er.cD}),I=w.request,C=w.pending,S=(0,ea.J)({action:er.Fd}),P=S.request,k=S.pending,T=function(e){var t=e.checked,i=e.addToCart,n=void 0!==i&&i,a=e.callback;return function(){y?P({cartItemId:g.cartItemId,cartItemVariantId:s.productVariantId,cartItemHasInsurance:t}).then(function(){t&&(0,eC.p)({message:tC.hr}),N(t),null==a||a(!0)}):(n&&I({productVariantId:s.productVariantId,isInsurance:!0}).then(function(){(0,eC.p)({message:tC.sC})}),v((0,el.r$)(t)),N(t),null==a||a(!1))}};return(0,_.x)(r)?null:(0,o.jsxs)("div",{className:(0,es.d)("flex flex-col justify-start items-start py-5 gap-3",t),children:[(0,o.jsx)("h4",{className:"text-h5-180 text-neutral-850",children:"بیمه دیجیتال"}),(0,o.jsxs)("div",{className:(0,es.d)("border-complete-200 w-full flex rounded-md px-3 py-2.5 gap-3 my-[1px] cursor-pointer",{"!border-secondary-500":b}),onClick:T({checked:!b}),children:[(0,o.jsxs)("div",{className:"flex-grow flex justify-center items-center gap-3",children:[k||C?(0,o.jsx)(t8.g,{size:18}):(0,o.jsx)(en.X,{hasDefaultPadding:!1,className:"p-[3px]",value:b,onClick:function(e){e&&e.stopPropagation&&e.stopPropagation()}}),(0,o.jsxs)("div",{className:"flex-grow flex flex-col items-start gap-0.5",children:[(0,o.jsx)("span",{className:"text-button-2-180",children:"بیمه تجهیزات دیجیتال - بیمه سامان"}),(0,o.jsxs)("div",{className:"flex gap-1",children:[u>0&&(0,o.jsxs)("span",{className:"flex justify-center items-center gap-1",children:[(0,o.jsxs)("span",{className:"bg-primary-500 text-white text-body2-strong-compact py-0.5 px-1.5 rounded-md",children:[(0,eY.U)(+u),"٪"]}),(0,o.jsx)("span",{className:"text-body-2 text-neutral-300 line-through",children:(0,eO.j3)(p)})]}),(0,o.jsxs)("span",{className:"flex justify-center items-center text-h4-compact gap-0.5",children:[(0,eO.j3)(m),(0,o.jsx)(L.J,{icon:"cube-value-toman",size:14})]})]})]})]}),(0,o.jsx)(B.z,{mode:"text",removePadding:!0,onClick:function(){a()},children:(0,o.jsxs)("span",{className:"flex gap-1/5 justify-center items-center text-button-2 text-icon-high-emphasis",children:["جزئیات",(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:18})]})})]}),(0,o.jsx)(sJ,{hasSelectedInsurance:b,handleInsurance:T,isOpen:i,onClose:function(){f(!1),n()},isOpenAfterAddToCart:h,productVariantId:s.productVariantId,insurance:r})]})}var sH=s(12289);function sG(e){var t,s,i,n,a,r,l,d,u,p,m=e.magnetPosts;(0,c.useEffect)(function(){b.k.setMagnetPosts(m),g.a4.setMagnetPosts(m).sendEvent(),j.u.setMagnetVideoCount(null==m?void 0:m.length),j.u.setHasPlayedMagnetVideo(!1)},[m]);var x=(s=(t={callback:function(){b.k.sendEvent()}}).eventData,i=t.onScreenOption,n=t.callback,r=void 0!==(a=t.disableHook)&&a,l=(0,c.useRef)(!1),u=(d=(0,E.Z)((0,sH.R)((void 0===i?{}:i)||{}),2))[0],p=d[1],((0,c.useEffect)(function(){r||!p||l.current||(l.current=!0,n(s))},[p,r]),r)?[null,null]:u);return(0,o.jsxs)("div",{className:"pb-5",ref:x,children:[(0,o.jsxs)("h3",{className:"text-h5-180 text-neutral-850 pt-5 pb-3 px-5 flex gap-1.5 justify-start items-center",children:[(0,o.jsx)(L.J,{icon:"cube-media-video",size:24}),"ویدئوهای بررسی این کالا"]}),(0,o.jsxs)("div",{className:"flex gap-2 overflow-auto hide-scrollbar",children:[(0,o.jsx)("div",{className:"pr-3"}),(m||[]).map(function(e,t){var s=e||{},i=s.magnetPostId,n=s.magnetPostTitle,a=s.magnetPostAuthor,r=s.magnetPostMedia;return(0,o.jsxs)("div",{className:"relative h-full w-[150px] cursor-pointer",onClick:function(){j.u.setHasPlayedMagnetVideo(!0),function(e){if("undefined"!=typeof CustomEvent){var t=new CustomEvent("DKShowMagnetModal",{detail:e});window.dispatchEvent(t)}}({index:t})},children:[(0,o.jsxs)("div",{className:"relative h-full",children:[(0,o.jsx)("span",{className:"z-10 p-2.5 bg-[#FFFB] flex justify-center items-center rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 rotate-0 skew-x-0 skew-y-0 scale-100",children:(0,o.jsx)(L.J,{icon:"cube-media-play",size:28})}),(0,o.jsx)(F.E,{className:"rounded-md overflow-hidden h-full",height:210,objectFit:"cover",width:150,src:r.mediaThumbnailUrl,alt:n}),(0,o.jsx)(Z.r,{to:(0,G.kK)(a.magnetPostAuthorUsername),className:"absolute z-10 -bottom-2 right-3",children:(0,_.x)(a.magnetPostAuthorProfile)?(0,o.jsx)(F.E,{src:"/statics/img/svg/profile/magnet-default-avatart.svg",width:48,height:48,className:"rounded-full overflow-hidden border-white border-4 border-solid flex justify-center items-center"}):(0,o.jsx)(F.E,{image:a.magnetPostAuthorProfile,width:48,height:48,className:"rounded-full overflow-hidden border-white border-4 border-solid flex justify-center items-center"})})]}),(0,o.jsx)("p",{className:"mt-3 text-body-1-180 text-icon-high-emphasis ellipsis-2",children:n})]},i)}),(0,o.jsx)("div",{className:"pr-3"})]})]})}function s$(e){var t=e.activeTab,s=e.className,i=e.style,n=e.tabs,a=e.onTabClick;e.isShipmentRestricted;var l=(0,E.Z)((0,c.useState)({width:0,right:0}),2),d=l[0],u=l[1];return(0,c.useEffect)(function(){var e=document.getElementById("TAB_CONTAINER"),s=document.getElementById("".concat(t,"_tab"));s&&(s.scrollIntoView(),u({width:s.getBoundingClientRect().width,right:e.getBoundingClientRect().right-s.getBoundingClientRect().right}))},[t]),(0,o.jsx)("div",{style:(0,r.Z)({},i),className:(0,es.d)("bg-white absolute -z-1 w-full overflow-auto hide-scrollbar",s),children:(0,o.jsxs)("div",{className:"flex relative w-fit",id:"TAB_CONTAINER",children:[(0,o.jsx)("div",{className:"pr-4 relative"}),Object.values(n||{}).map(function(e){return(0,o.jsx)("div",{id:"".concat(e.name,"_tab"),onClick:function(t){a(e.name)},className:(0,es.d)("relative text-body1-strong text-neutral-500 py-2 px-3 cursor-pointer whitespace-nowrap",{"!text-icon-high-emphasis":e.name===t}),children:e.title})}),(0,o.jsx)("div",{className:"pr-4 relative"}),(0,o.jsx)("div",{className:"bottom-0 absolute h-1 bg-black rounded-t",style:{transition:"0.1s",width:"".concat(d.width-16,"px"),right:"".concat(d.right+8,"px")}})]})})}var sK=s(17340),sY=s(41966),sW=s(11553),sX=s(48601),s0=s(68330),s1=s(22393),s2=s(42523),s5=s(3875);function s3(e){var t,s,i=e.product,n=e.productHasNoVariant,a=e.onCloseParentModal,r=(0,E.Z)((0,c.useState)(),2),l=r[0],d=r[1],u=(i||{}).productId,p=(0,E.Z)((0,c.useState)(),2),m=p[0],h=p[1],f=(0,ey.E)({apiMethod:sW.v}),v=f.request,g=f.pending,b="ml-5 lg:ml-0",N=m||{},y=N.data,w=N.filterTitle,C=i||{},S=C.productTitle,P=C.productStatus,k=y&&Object.keys(y)||[],T=(0,E.Z)((0,c.useState)(),2),D=T[0],M=T[1],O=(0,K.R)({modalId:"price-chart"}),A=O.isOpen,R=O.onClose,V=O.onOpen,z=(0,E.Z)((0,c.useState)({}),2),B=z[0],F=z[1],U=B.position,Z=B.data;(0,c.useEffect)(function(){var e;M(null===(e=Object.keys(y||{}))||void 0===e?void 0:e[0])},[y]);var J=(0,eO.tx)(H.eM.MARKETABLE,P);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(sX.y,{title:"نمودار قیمت",croId:"pdp-price-chart",onClick:function(){(0,eI.dk)({productId:u,sectionName:eI.b$.PRICE_CHART,navigationType:eI.OQ.CLICK}),v({productId:u}).then(function(e){var t=e.data,s=e.filterTitle;(0,_.x)(t)?(0,eC.p)({message:"در ۳۰ روز اخیر، تغییر قیمتی برای این کالا ثبت نشده است."}):(h({data:t,filterTitle:s}),d(!0))})},children:g?(0,o.jsx)(t8.g,{className:(0,es.d)("h-6",b)}):(0,o.jsx)(L.J,{icon:"priceChart",size:24,className:(0,es.d)("cursor-pointer",b)})}),(0,o.jsxs)(q.Modal,{isOpen:l,isFullScreen:!0,header:(0,o.jsxs)("div",{className:"flex flex-col justify-center items-start gap-1.5",children:[(0,o.jsx)("p",{className:"text-h5-compact text-neutral-700",children:"نمودار قیمت فروش"}),(0,o.jsx)("p",{className:"text-body-1-compact text-neutral-500 ellipsis-1 align-right",children:S})]}),onDismiss:function(){null==a||a(),d(!1)},footer:J&&(0,I.d)(x.X.AB_TEST_ADD_TO_CART_ON_MODALS)&&(0,o.jsx)(sY.j,{noVariant:n,onClick:V,product:i}),children:[(0,o.jsxs)("div",{className:"flex flex-col items-start w-full overflow-auto mb-5",children:[(0,o.jsx)("span",{className:"flex",children:(0,o.jsx)("div",{className:"flex items-center gap-1.5 text-h5",children:(0,o.jsx)("span",{children:w})})}),(0,o.jsx)("div",{className:"flex items-center justify-start gap-2 w-full overflow-auto",children:k[0]&&(null===(t=k.map)||void 0===t?void 0:t.call(k,function(e){return(0,o.jsx)("div",{className:"py-0.5 cursor-pointer",onClick:function(){return M(e)},children:(0,o.jsx)("div",{className:(0,es.d)("select-none flex items-center justify-center gap-1.5 rounded-md border-complete-200 px-3 whitespace-nowrap py-1",{"!border-icon-high-emphasis":(0,eO.tx)(e,D)}),children:(0,o.jsx)("span",{className:"text-body-1 whitespace-nowrap",children:e})})},e)}))})]}),(0,o.jsxs)("div",{className:"relative grow",children:[(0,o.jsx)(s0.k,{data:null==y?void 0:null===(s=y[D])||void 0===s?void 0:s.data,className:"h-full",onTooltipShow:F}),!(0,_.x)(Z)&&(0,o.jsx)(s5.E,{seller:Z.seller,warranty:Z.warranty,payablePrice:Z.payablePrice,price:Z.price,discountPercent:Z.discountPercent,className:"absolute top-0 z-5 cursor-pointer"}),(0,o.jsx)(s2.X,{className:"h-full absolute top-0 z-4 cursor-pointer",style:{left:null==U?void 0:U.left},date:null==Z?void 0:Z.date})]}),(0,o.jsx)(s1.O,{className:"mt-5"}),(0,o.jsx)(sK.BabyPDPModal,{product:i,isOpenModal:A,closeModal:R,type:j.J.PRICE_CHART})]})]})}var s4=s(56219),s6=s(73516),s8=s(41281),s7=(i={},(0,tv.Z)(i,s8.D.RELATED,{croId:eq.h.PDP_RELATED_PRODUCTS,bigDataCarouselName:tQ.Dq}),(0,tv.Z)(i,s8.D.ALSO_BOUGHT,{croId:eq.h.ALSO_BOUGHT_PRODUCTS,bigDataCarouselName:tQ._r}),i);function s9(e){var t=e.offset,s=e.targetData,i=(0,$.V)({apiData:{offset:t,productId:s},apiMethod:s6.A,disabled:(0,S.$i)()}).data||{},n=i.type,a=void 0===n?s8.D.ALSO_BOUGHT:n,r=i.data||{},l=r.productsTitle,d=r.products,u=(0,c.useMemo)(function(){return(d||[]).filter(function(e){var t=e.productDefaultVariant;return!(0,eO.xb)(null==t?void 0:t.productVariantId)}).map(function(e,t){var s=e||{},i=s.productId,n=s.productUrl,a=s.productImage,r=s.productImageAlt,l=s.productTitle,c=s.productBadges,d=s.productPropertiesIsFake,u=s.productDefaultVariant||{},p=u.productVariantPropertiesIsRoosta,m=u.productVariantPriceIsApplicationIncredible,x=u.productVariantPriceSellingPrice,h=u.productVariantPriceDiscountPercent,f=u.productVariantPriceRrpPrice;return(0,o.jsx)(t$,{productId:i,productUrl:n,productImage:a,productImageAlt:r,productTitle:l,productBadges:[(c||[])[0]],productPropertiesIsFake:d,productVariantPropertiesIsRoosta:p,productVariantPriceIsApplicationIncredible:m,productVariantPriceSellingPrice:x,productVariantPriceDiscountPercent:h,productVariantPriceRrpPrice:f},i)})},[d]);return(0,eO.xb)(u)||(0,eo.k)(s7[a])?null:(0,o.jsxs)("div",{className:"pb-4 pt-3 w-full",children:[(0,o.jsx)(s4.D,{}),(0,o.jsx)("div",{className:"w-full flex justify-between items-center px-4 pt-2 pb-3",children:(0,o.jsx)("span",{className:"text-h5-180 text-neutral-850 flex gap-1.5",children:l})}),(0,o.jsx)(eA.l,{items:[(0,o.jsx)("div",{className:"pr-2"})].concat((0,V.Z)(u),[(0,o.jsx)("div",{className:"pr-2"})]),className:"gap-2 w-full",sliderProps:{slidesOffsetAfter:0,slidesOffsetBefore:0}})]})}var ie=function(e){var t=(0,E.Z)((0,c.useState)(!1),2),s=t[0],i=t[1],n=(0,c.useRef)();return(0,c.useEffect)(function(){var t=function(){if(n.current){var t=parseFloat(window.getComputedStyle(n.current).lineHeight)*e;i(n.current.scrollHeight>t)}};return t(),setTimeout(function(){t()},1e3),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}},[e]),{isOverflowing:s,textRef:n}},it=s(84127),is=s.n(it);function ii(e){var t=e.title,s=e.subTitle,i=e.isNotMarketable,n=i?1:2,a=ie(n),r=a.isOverflowing,l=a.textRef,d=(0,E.Z)((0,c.useState)(!1),2),u=d[0],p=d[1];return(0,o.jsxs)("div",{className:i?"bg-[#BA2D2B1F] p-2 rounded-md w-full":"w-full",children:[i&&(0,o.jsx)("span",{className:"text-h4-extra-180 text-icon-error",children:"محصول ناموجود است"}),(0,o.jsxs)("h1",{ref:l,className:"text-h5-180 relative text-neutral-850",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:u?"unset":n,overflow:"hidden"},children:[t,r&&!u&&(0,o.jsx)(B.z,{removePadding:!0,className:(0,es.d)("!absolute left-0 bottom-0",is().ProductInfo__expandButton,(0,tv.Z)({},is().ProductInfo__notMarketable,i)),size:"small",mode:"text",onClick:function(){p(!0)},children:(0,o.jsx)(L.J,{size:20,color:"black",icon:"cube-nav-chevron-down"})})]}),s&&(0,o.jsx)("h2",{className:"mt-0.5 text-icon-low-emphasis text-body-1-180 ltr text-right ellipsis-1",children:s})]})}function ia(e){var t=e.className,s=e.product,i=e.onCommentsClick,n=e.onQuestionsClick,a=e.bigDataTrackerData,r=s||{},l=r.productId,c=r.productBrand,d=r.productTitle,u=r.productTestTitleFa,p=r.productTitleEn,m=r.productStatus,h=r.productRatingRate,f=r.productRatingCount,v=r.productPropertiesIsFake,g=r.productQuestionsCount,j=r.productCommentsCount,b=r.productCommentsSummery,N=(c||{}).brandIsNameSimilar,y=!(0,eO.tx)(H.eM.MARKETABLE,m),w=(0,es.d)("lg:mt-4 pb-3",is().PdpProductContent__sectionBorder),C=(0,K.R)({modalId:eF.Jx}),S=C.isOpen,P=C.onClose,k=C.onOpen;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:(0,es.d)("w-full flex flex-col items-start",t),children:[(N||v)&&(0,o.jsxs)("div",{className:"flex gap-1 justify-start items-center",children:[v&&(0,o.jsx)(tg.C,{className:(0,es.d)("mb-[2px] gap-1 select-none !px-2",{"!mb-2":y}),textColor:"text-hint-text-caution",type:"warning",size:"medium",rightIcon:(0,o.jsx)(L.J,{icon:"cube-alert-info",color:(0,eO.$l)("hint-text-caution"),size:16}),text:"محصول اصل نیست"}),N&&(0,o.jsx)(tg.C,{className:(0,es.d)("mb-[2px] gap-1 select-none",{"!mb-2":N}),textColor:"text-hint-text-caution",type:"warning",size:"medium",rightIcon:(0,o.jsx)(L.J,{icon:"cube-alert-info",color:(0,eO.$l)("hint-text-caution"),size:16}),text:"نام مشابه با برند دیگر"})]}),(0,o.jsx)(ii,{subTitle:p,isNotMarketable:y,title:(0,I.d)(x.X.PRODUCT_TITLE_TEST)&&!(0,eO.xb)(u)?u:d}),(!!h||j>0||g>0)&&(0,o.jsxs)("div",{className:"overflow-auto hide-scrollbar max-w-[100vw] mt-3 gap-1.5 flex items-center",children:[!!h&&(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(F.E,{height:20,width:20,src:"/statics/img/svg/pdp/star.svg",alt:"امتیاز"}),(0,o.jsx)("p",{className:"mr-1 text-body1-strong text-icon-high-emphasis",children:(0,eY.U)(h)}),(0,o.jsxs)("p",{className:"mr-1 text-body-1 text-icon-neutral-hint",children:["(",(0,eY.U)(f),")"]})]}),(0,o.jsxs)("div",{className:"flex gap-1.5 items-center whitespace-nowrap",children:[!(0,eO.xb)(null==b?void 0:b.commentSummaryOverview)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tf.j,{productCommentsOverview:b,isOpen:S,onClose:function(){(0,eQ.sM)({productId:l}),P()}}),(0,o.jsx)(e2.e,{mode:"anchor",labelSize:"large",hasArrowIcon:!1,onClick:function(){(0,eQ.Di)({productId:l}),k()},CROId:eq.h.PDP_COMMENTS_ABOVEFOLD,className:"cursor-pointer py-1.5",children:(0,o.jsxs)("span",{className:(0,es.d)("flex item-center text-body2-strong-180 py-1 gap-0.5 pr-2 pl-2 text-icon-high-emphasis rounded-lg",is().ProductInfo__summeryBadge),children:[(0,o.jsx)(L.J,{className:"items-center ml-1",icon:"cube-action-ai-all",color:"ai",size:16}),"خلاصه دیدگاه‌ها"]})})]}),j>0&&(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsx)(e2.e,{mode:"anchor",labelSize:"large",hasArrowIcon:!1,onClick:i,CROId:eq.h.PDP_COMMENTS_ABOVEFOLD,className:"cursor-pointer py-1.5",children:(0,o.jsxs)("span",{className:"bg-gradient-silver flex item-center text-body2-strong-180 py-1 gap-0.5 pr-2 pl-1 text-icon-high-emphasis rounded-lg",children:[(0,eY.U)(j)," دیدگاه",(0,o.jsx)(L.J,{className:"items-center",icon:"cube-nav-chevron-left",size:16})]})})}),g>0&&(0,o.jsx)(e2.e,{mode:"anchor",labelSize:"large",hasArrowIcon:!1,onClick:n,CROId:eq.h.PDP_QUESTIONS_ABOVEFOLD,className:"cursor-pointer py-1.5",children:(0,o.jsxs)("span",{className:"bg-gradient-silver flex item-center text-body2-strong-180 py-1 gap-0.5 pr-2 pl-1 text-icon-high-emphasis rounded-lg",children:[(0,eY.U)(g)," پرسش و پاسخ",(0,o.jsx)(L.J,{className:"items-center",icon:"cube-nav-chevron-left",size:16})]})})]}),(0,o.jsx)("div",{className:"pl-6 h-1"})]})]}),y&&(0,o.jsxs)("div",{className:"flex flex-col gap-1 items-start mt-1 w-full",children:[(0,o.jsx)(s9,{bigDataTrackerData:a,className:w,offset:0,targetData:l}),(0,o.jsx)(s4.D,{})]})]})}var ir=s(82650),il=s(40565),io=s(70085),ic=s(1746),id=s(598),iu=s(86671),ip=s(5830),im=s(88519),ix=s.n(im);function ih(e){var t=e.className,s=e.questionAnswer,i=e.mediaIndex,n=void 0===i?0:i,a=(0,v.C)().isDesktop,r=null==s?void 0:s.questionAnswerMedias,l=(0,c.useRef)(),d=(0,E.Z)((0,c.useState)(r[n]),2),u=d[0],p=d[1];return(0,_.x)(r)?null:(0,o.jsx)("div",{className:(0,es.d)("flex flex-col shrink-0",t),children:(0,o.jsx)(iu.i,{ref:l,className:"lg:rounded-small overflow-hidden bg-neutral-000",spaceBetween:20,disableThumbAutoScroll:!0,mode:ip._.GALLERY_WITH_THUMBNAIL,thumbnailsContainerClassName:"flex justify-center py-2",thumbnailsSlides:null==r?void 0:r.map(function(e,t){return(0,o.jsx)("div",{onClick:function(){var e;return null==l?void 0:null===(e=l.current)||void 0===e?void 0:e.slideTo(t)},className:"cursor-pointer",children:(0,o.jsx)(e5.D,{poster:e.mediaThumbnailUrl,className:(0,es.d)(ix().PdpQuestionAnswerDetailModalMediaSlider__thumbnail,(0,tv.Z)({},ix()["PdpQuestionAnswerDetailModalMediaSlider__thumbnail--selected"],e.mediaUrl===u.mediaUrl)),disableBorder:!0,src:e.mediaUrl,width:50,height:50,objectFit:"contain"})},e.mediaTemporaryId)}),simulateTouch:!1,initialSlide:n,onSlideChange:function(e){p(r[e.realIndex])},slidesPerView:1,centeredSlides:!0,slides:r.map(function(e){return(0,o.jsx)("div",{children:(0,o.jsx)(e5.D,{poster:e.mediaThumbnailUrl,disableBorder:!0,isPlayable:!0,src:e.mediaUrl,width:"100%",height:a?550:360,objectFit:"contain",rounded:0})},e.mediaTemporaryId)})})})}var iv=s(97973),ig=s.n(iv);function ij(e){var t=e.isOpen,s=e.onClose,i=e.modalData||{},n=i.questionAnswer,a=i.questionText,r=i.mediaIndex;return(0,o.jsx)(q.Modal,{isOpen:t,onDismiss:s,headerTitle:"پاسخ پرسش",width:870,isFullScreen:!0,children:(0,o.jsxs)("div",{className:"flex lg:flex-row flex-col gap-4",children:[(0,o.jsx)("div",{className:ig().PdpQuestionAnswerDetailModal__desktopSlider,children:t&&(0,o.jsx)(ih,{questionAnswer:n,mediaIndex:r})}),(0,o.jsx)("div",{children:(0,o.jsxs)("article",{children:[(0,o.jsxs)("div",{className:"flex items-start",children:[(0,o.jsx)("span",{className:"mt-1 ml-4",children:(0,o.jsx)(L.J,{icon:"question",color:"secondary",size:24})}),(0,o.jsx)("p",{className:"text-subtitle w-full",children:a})]}),t&&(0,o.jsx)(id.s,{questionAnswer:n,isInDetailModal:!0})]})})]})})}var ib=s(67010),iN=s(90978),iy=s(21728),iw=s(83178),iI=s(37843),iC=s(38762),iS=s(97155);function iP(e){var t=e.className,s=e.productId,i=(0,E.Z)((0,c.useState)(null),2),n=(i[0],i[1]),a=(0,E.Z)((0,c.useState)(""),2),r=a[0],l=a[1],d=(0,E.Z)((0,c.useState)(!1),2),u=d[0],p=d[1],m=(0,c.useRef)(),x=(0,ey.E)({apiMethod:iS.a}),h=x.request,f=x.pending;return(0,o.jsxs)("div",{className:(0,es.d)("w-full mr-10",t),children:[(0,o.jsx)("p",{className:"text-neutral-900 text-subtitle-strong",children:"درباره این کالا چه پرسشی دارید؟"}),(0,o.jsx)("div",{className:"my-2",children:(0,o.jsx)(iI.F,{ref:m,label:"",maxLength:100,onChange:function(e){l(e)},handleCanSubmit:p})}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("p",{className:"text-center mt-2",children:["ثبت پاسخ به معنی موافقت با",(0,o.jsx)(Z.r,{className:"mx-1 text-secondary-500",to:G.m,target:"_blank",children:"قوانین انتشار دیجی‌کالا"}),"است."]}),(0,o.jsx)(B.z,{onClick:function(){h({question:r,productId:s}).then(function(){n(!0),(0,eC.p)({message:tC.oA,actionText:"مشاهده پرسش‌های من",actionLink:(0,G.kA)(iC.X.QUESTIONS),type:"MultiLine"}),m.current.resetInput()})},disabled:!u,isLoading:f,children:"ثبت پرسش"})]})]})}var ik=s(47313),i_=s.n(ik);function iT(e){var t=e.sort,s=e.pager,i=e.setPage,n=e.productId,a=e.questions,d=e.className,u=e.productQuestionsCount,p=e.setShowQuestionSubmitModal,m=e.openAnswerModal,x=e.onSortOptionClick,h=e.params,f=e.pending,v=(0,E.Z)((0,c.useState)(!1),2),g=v[0],j=v[1];(0,sp.v)(iw.n.desktopHeaderSize).height;var b=h[eJ.uR];return(0,o.jsxs)("div",{className:(0,es.d)("flex justify-start items-start mt-5",d),children:[(0,o.jsx)("div",{className:"sticky px-2 pb-3",children:!(0,_.x)(a)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:(0,es.d)("text-neutral-700 mt-7 mb-5 ",i_().PdpQuestionSectionDesktopContent__input),children:"شما هم درباره این کالا پرسش ثبت کنید"}),(0,o.jsx)(B.z,{shape:"outlined",className:"w-full mt-2",onClick:function(){p(!0)},CROId:eq.h.PDP_QUESTION_CTA,children:"ثبت پرسش"})]})}),(0,_.x)(a)?(0,o.jsx)(iP,{productId:n}):(0,o.jsxs)("div",{className:"w-full mr-10",children:[(0,o.jsx)(eZ.R,{sort:(0,l.Z)((0,r.Z)({},t),{sortActiveOptionId:b}),onSortOptionClick:x,pending:f,pager:s,itemTitle:"پرسش",onSortItemClick:eQ.qE}),a.slice(0,5).map(function(e){return(0,o.jsx)(iy.Q,{className:"br-list-vertical-no-padding-200",question:e,openAnswerModal:m},e.questionId)}),g&&a.slice(5).map(function(e){return(0,o.jsx)(iy.Q,{className:"br-list-vertical-no-padding-200",question:e,openAnswerModal:m},e.questionId)}),a.length>5&&!g&&(0,o.jsx)("div",{className:"py-3 border-complete-t-200",children:(0,o.jsx)(e2.e,{onClick:function(){(0,eI.dk)({productId:n,sectionName:eI.b$.QUESTIONS,navigationType:eI.OQ.CLICK,isShowMore:!0}),j(!0),(0,eQ.y0)({type:"desktop_more"})},mode:"anchor",CROId:eq.h.PDP_QUESTION_ALL,children:"".concat((0,eY.U)(u)," پرسش دیگر")})}),g&&(0,o.jsx)(e$.t,{clickAction:function(e){i(e),(0,eW.X5)(eF.FK.QUESTION_SECTION)},pagerTotalPages:null==s?void 0:s.pagerTotalPages,pagerCurrentPage:null==s?void 0:s.pagerCurrentPage})]})]})}function iD(e){var t=e.page,s=e.sort,i=e.pager,n=e.pending,a=e.setPage,r=e.questions,l=e.productId,d=e.className,u=e.description,p=e.productQuestionsCount,m=e.params,x=e.onSortOptionClick,h=(0,E.Z)((0,c.useState)({isQuestionAnswerModalOpen:!1,questionId:"",questionText:"",successCallback:function(){}}),2),f=h[0],v=h[1],g=(0,E.Z)((0,c.useState)(!1),2),j=g[0],b=g[1],N=(0,E.Z)((0,eE.s)({eventData:{productId:l,sectionName:eI.b$.QUESTIONS,navigationType:eI.OQ.SCROLL},callback:eI.dk}),1)[0],y=function(){b(!1)};return(0,o.jsxs)("section",{className:d,children:[(0,o.jsx)(ez.w,{isLoading:n&&1!==t}),(0,o.jsx)("div",{ref:N,id:eF.FK.QUESTION_SECTION,children:(0,o.jsx)(eU.D,{title:"پرسش‌ها",description:u,withLine:!0})}),(0,o.jsx)(iT,{sort:s,onSortOptionClick:x,params:m,pending:n,pager:i,setPage:a,questions:r,productId:l,productQuestionsCount:p,setShowQuestionSubmitModal:b,openAnswerModal:function(e){v({isQuestionAnswerModalOpen:!0,questionId:e.questionId,questionText:e.questionText,successCallback:e.successCallback})}}),(0,o.jsx)(ib.p,{productId:l,onFinish:y,onDismiss:y,isOpen:j}),(0,o.jsx)(iN.M,{answerModalData:f,onClose:function(){v({isQuestionAnswerModalOpen:!1,questionId:"",questionText:"",successCallBack:function(){}})}})]})}var iM=s(46743);function iO(e){var t=e.answerModalData,s=e.onClose,i=t||{},n=i.isQuestionAnswerModalOpen,a=i.questionId,r=i.questionText,l=i.successCallback,d=(0,E.Z)((0,c.useState)(""),2),u=d[0],p=d[1],m=(0,E.Z)((0,c.useState)(!1),2),x=m[0],h=m[1],f=(0,ey.E)({apiMethod:iM.p}),v=f.request,g=f.pending,j=function(){v({questionId:a,answer:u}).then(function(){s(),l()})};(0,c.useEffect)(function(){n&&p("")},[n]);var b=(0,c.useMemo)(function(){return(0,o.jsxs)("div",{className:"lg:flex items-center justify-between",children:[(0,o.jsx)("div",{className:"w-full lg:50 lg:pl-4",children:(0,o.jsx)(B.z,{size:"large",onClick:j,className:"w-full",disabled:!x,isLoading:g,CROId:"pdp-submit-answer",children:"ثبت پاسخ"})}),(0,o.jsxs)("p",{className:"text-center mt-2 grow",children:["ثبت پاسخ به معنی موافقت با",(0,o.jsx)(Z.r,{target:"_blank",to:G.m,className:"mx-1 text-secondary-500",children:"قوانین انتشار دیجی‌کالا"}),"است."]})]})},[j]);return(0,o.jsx)(q.Modal,{isFullScreen:!0,isOpen:n,onDismiss:s,headerTitle:"به این پرسش پاسخ دهید",footer:b,children:(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-body-1 mb-4",children:r}),(0,o.jsx)(iI.F,{label:"پاسخ",onChange:function(e){p(e)},handleCanSubmit:h,maxLength:500,resetValue:n})]})})}var iA=s(48485),iR=s(31969);function iE(e){var t=e.questionAnswer,s=e.isEmptyState,i=e.className,n=e.openAnswerModal,a=e.questionId,r=e.questionText,l=e.isAnswerTruncationDisabled,d=e.isInQuestionDetailModal,u=t||{},p=u.questionAnswerHasQABadge,m=u.questionAnswerType,x=u.questionAnswerUserReaction,h=u.questionAnswerReactionsLikes,f=u.questionAnswerReactionsDisLikes,v=u.questionAnswerId,g=(0,E.Z)((0,c.useState)([x].includes(iR.d.LIKE)),2),j=g[0],b=g[1],N=(0,E.Z)((0,c.useState)([x].includes(iR.d.DISLIKE)),2),y=N[0],w=N[1],I=(0,E.Z)((0,c.useState)({questionAnswerReactionsLikes:h,questionAnswerReactionsDisLikes:f}),2),C=I[0],S=I[1],P=function(e){var s=e||{},i=s.likes,n=s.dislikes;S({questionAnswerReactionsLikes:i,questionAnswerReactionsDisLikes:n}),t.questionAnswerReactionsDisLikes=n,t.questionAnswerReactionsLikes=i},k=(0,ey.Z)({apiMethod:iA.$,onSuccess:P}),_=k.request,T=k.pending,D=(0,ey.Z)({apiMethod:iA.$,onSuccess:P}),M=D.request,O=D.pending;return(0,o.jsx)("div",{className:(0,es.d)("rounded-md min-w-54 xs:min-w-64 py-2 pl-2 pr-4 bg-app-background-mid-dark border-complete-200 text-body-2",{"h-[117px] w-54 xs:w-64":!(void 0!==d&&d)},i),children:s?(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-neutral-650 ml-2 flex",children:"اولین نفری باشید که به این سوال پاسخ می‌دهید"}),(0,o.jsx)(e2.e,{mode:"anchor",label:"ثبت پاسخ",color:"n-650",iconColor:"high-emphasis",className:"border-solid border-x-0 border-t-0 border-b-[1px] border-b-black",onClick:function(e){e.stopPropagation(),n({questionId:a,questionText:r})}})]}):(0,o.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,o.jsx)("span",{className:(0,es.d)(!(void 0!==l&&l)&&"ellipsis-3","mb-5 ml-2"),children:null==t?void 0:t.questionAnswerText}),(0,o.jsxs)("div",{className:"flex items-center text-dark-neutral-000",children:[(0,o.jsxs)("div",{className:"flex flex-nowrap items-center overflow-hidden",children:[(0,o.jsx)("span",{className:"text-neutral-650 whitespace-nowrap truncate max-w-[130px]",children:t.questionAnswerSender}),(0,o.jsx)("span",{className:"mr-1",children:p?(0,o.jsx)(tg.C,{className:"whitespace-nowrap",size:"small",text:"نماینده برند",textClasses:"text-secondary-700",bgColor:"secondary-100"}):"buyer"===m?(0,o.jsx)(tg.C,{size:"small",text:"خریدار",type:"success"}):"seller"===m?(0,o.jsx)(tg.C,{size:"small",text:"فروشنده",textClasses:"text-hint-text-caution",bgColor:"background-caution"}):null})]}),(0,o.jsx)("div",{className:"mr-auto",children:(0,o.jsx)(ty.x,{onLike:function(){_({type:iR.d.LIKE,answerId:v}).then(function(e){e.likes>C.questionAnswerReactionsLikes?(b(!0),t.questionAnswerUserReaction=iR.d.LIKE):(b(!1),t.questionAnswerUserReaction="")}).finally(function(){w(!1)}),(0,eQ.y6)({type:"Like"})},isLike:j,className:"mr-auto",onDislike:function(){M({answerId:v,type:iR.d.DISLIKE}).then(function(e){e.dislikes>C.questionAnswerReactionsDisLikes?(w(!0),t.questionAnswerUserReaction=iR.d.DISLIKE):(w(!1),t.questionAnswerUserReaction="")}).finally(function(){b(!1)}),(0,eQ.y6)({type:"Dislike"})},isDislike:y,isLoadingLike:T,isLoadingDislike:O,likeCount:null==C?void 0:C.questionAnswerReactionsLikes,dislikeCount:null==C?void 0:C.questionAnswerReactionsDisLikes,thumbsUpCroId:eq.h.PDP_QUESTION_LIKE,thumbsDownCroId:eq.h.PDP_QUESTION_DISLIKE,classNamePadding:"pt-0"})})]})]})})}function iV(e){var t=e.isOpen,s=e.questionData,i=e.onClose,n=e.onAnswerClick,a=s||{},r=a.questionSender,l=a.questionText,c=a.questionCreatedAt,d=a.questionAnswers,u=a.questionId,p=function(e){e.stopPropagation(),n({questionId:u,questionText:l})};return(0,o.jsx)(ec.R,{isOpen:t,onClose:i,header:(0,o.jsx)("span",{className:"text-h5 bg-neutral-000",children:"جزییات پرسش"}),children:(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,o.jsx)("span",{className:"text-body-2 text-neutral-650 truncate",children:r}),(0,o.jsx)("span",{className:"text-caption text-neutral-400",children:(0,eY.U)(c)})]}),(0,o.jsx)("div",{className:"text-body-1 mb-3",children:l}),(0,_.x)(d)?(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("p",{className:"text-body-2 text-neutral-650 mb-2",children:"اولین نفری باشید که به این سوال پاسخ می‌دهید"}),(0,o.jsx)(e2.e,{mode:"anchor",color:"black",iconColor:"black",label:"ثبت پاسخ",className:"border-solid border-x-0 border-t-0 border-b-[1px] border-b-black",onClick:p})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex flex-col gap-4",children:d.map(function(e){return(0,o.jsx)(iE,{isAnswerTruncationDisabled:!0,isInQuestionDetailModal:!0,questionAnswer:e,className:"w-full min-h-21"},e.questionAnswerId)})}),(0,o.jsx)(e2.e,{mode:"anchor",color:"black",iconColor:"black",label:"ثبت پاسخ جدید",className:"border-solid mt-4 border-x-0 border-t-0 border-b-[1px] border-b-black",onClick:p})]})]})})}var iz=s(79477),iB=s(6712),iL=s.n(iB);function iF(e){var t=e.isQuestionsModalOpen,s=e.closeQuestionsModal,i=e.productId,n=e.className,a=e.params,d=e.onSortOptionClick,u=e.questions,p=e.pager,m=e.pending,x=e.fetchNextPage,h=e.hasNextPage,f=e.sort,v=(0,ti.d)(),g=v.isOpen,j=v.onClose,b=v.onOpen,N=(0,E.Z)((0,c.useState)({isQuestionAnswerModalOpen:!1,questionId:"",questionText:"",successCallback:function(){}}),2),y=N[0],w=N[1],I=(a||{})[eJ.uR],C=(0,c.useCallback)(function(e){w({isQuestionAnswerModalOpen:!0,questionId:e.questionId,questionText:e.questionText,successCallback:e.successCallback})},[]),S=(0,c.useCallback)(function(e){var t=e.itemIndex,s=(null==u?void 0:u[t])||{};return(0,o.jsx)(iy.Q,{question:s,openAnswerModal:C})},[u,C]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(q.Modal,{isFullScreen:!0,isOpen:t,childrenClassName:"py-4",header:(0,o.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,o.jsx)(eU.D,{className:"xs:py-0",rightIcon:"arrowRight",rightIconOnClick:s,titleClassName:"text-h4 text-neutral-900 mr-2",title:"".concat((0,eY.U)(null==p?void 0:p.pagerTotalItems)," پرسش و پاسخ")}),(0,o.jsx)(eZ.R,{shouldCloseOnDismiss:!0,onSortOptionClick:d,sort:(0,l.Z)((0,r.Z)({},f),{sortActiveOptionId:I}),shouldShowSortTitle:!1,itemTitle:"پرسش و پاسخ",pending:m,onSortIconClick:eQ.hj,onSortItemClick:eQ.qE})]}),hasCloseIcon:!1,headerHideBottomBorder:!0,children:(0,o.jsxs)("div",{className:(0,es.d)("bg-neutral-000 flex flex-col relative",n),children:[(0,o.jsx)(tr.S,{hidePagination:!0,itemsPerRow:1,className:"grow",pager:p,fetchPage:h&&x,itemClassName:"px-5",items:u,itemComponent:S,borderLeftClassName:"border-complete-l-200",borderBottomClassName:"border-complete-b-200"}),(0,o.jsx)("div",{className:(0,es.d)("fixed",iL().PdpQuestionSectionMobileModal__addQuestion),children:(0,o.jsx)(iz.z,{title:"ثبت پرسش",CROId:eq.h.PDP_QUESTION_FAB,leftIcon:"question",onClick:b})})]})}),(0,o.jsx)(ib.p,{productId:i,isOpen:g,onFinish:j,onDismiss:j}),(0,o.jsx)(iN.M,{answerModalData:y,onClose:function(){w({isQuestionAnswerModalOpen:!1,questionId:"",questionText:"",successCallback:function(){}})}})]})}var iU=s(15689),iZ=s.n(iU);function iq(e){var t=e.questionsAnswers,s=(e.className,e.questionId),i=e.questionText,n=e.openAnswerModal;return(0,_.x)(t)?(0,o.jsx)(iE,{questionAnswer:null==t?void 0:t[0],isEmptyState:!0,openAnswerModal:n,questionId:s,questionText:i}):(0,o.jsxs)("div",{className:"relative z-4",children:[(0,o.jsx)(iE,{questionAnswer:t[0],className:"z-2 relative",openAnswerModal:n,questionId:s,questionText:i}),t[1]&&(0,o.jsx)(iE,{questionAnswer:t[1],questionText:i,questionId:s,className:(0,es.d)("absolute max-w-64",iZ().extra_answer_card)})]})}function iJ(e){var t=e.question,s=e.className,i=e.onClick,n=e.onAnswerClick,a=t||{},r=a.questionId,l=a.questionText,c=a.questionAnswers;return(0,o.jsxs)("article",{className:(0,es.d)("border-complete-200 rounded ml-2 shrink-0 flex flex-col justify-between w-60 xs:w-70 h-50 p-3",s),onClick:function(){i(t)},children:[(0,o.jsx)("div",{className:"flex items-start text-dark-neutral-000 ellipsis-2 text-body-1",children:l}),(0,o.jsx)(iq,{questionsAnswers:c,questionId:r,questionText:l,openAnswerModal:n})]},r)}function iQ(e){var t=e.className,s=e.productId,i=e.productQuestionsCount,n=e.isQuestionsModalOpen,a=e.openQuestionsModal,r=e.closeQuestionsModal,l=e.carouselQuestions;e.carouselQuestionsPending;var d=(0,eB.a)({apiMethod:ic.h,apiData:{productId:s},disabled:!n}),u=d.data,p=d.changeParams,m=d.pending,x=d.params,h=d.items,f=d.fetchNextPage,v=d.hasNextPage,g=u||{},j=g.pager,b=g.sort,N=(0,c.useMemo)(function(){return Object.entries(h||{}).filter(function(e){var t=(0,E.Z)(e,2)[1];return!(0,_.x)(t)}).flatMap(function(e){var t=(0,E.Z)(e,2),s=(t[0],t[1]);return null==s?void 0:s.questions})},[h]),y=(0,E.Z)((0,c.useState)(),2),w=y[0],I=y[1],C=(0,E.Z)((0,c.useState)({isQuestionAnswerModalOpen:!1,questionId:void 0,questionText:"",successCallback:void 0}),2),S=C[0],P=C[1],k=(0,ti.d)(),T=k.isOpen,D=k.onOpen,M=k.onClose,O=(0,E.Z)((0,eE.s)({eventData:{productId:s,sectionName:eI.b$.QUESTIONS,navigationType:eI.OQ.SCROLL},callback:eI.dk}),1)[0],A=function(e){I(e)},R=function(){I(null)},V=function(e){var t=e.questionId,s=e.questionText;R(),P({isQuestionAnswerModalOpen:!0,questionId:t,questionText:s,successCallback:function(){}})},z=(l||[]).map(function(e){var t=e.questionId;return(0,o.jsx)(iJ,{question:e,onClick:A,onAnswerClick:V},t)}),F=(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center px-10",children:[(0,o.jsx)(B.z,{mode:"outlined",size:"medium",color:"black",icon:!0,isRounded:!0,iconColor:"black",prependIcon:"arrowLeft",className:"p-2",removePadding:!0,onClick:a}),(0,o.jsx)("span",{className:"whitespace-nowrap mt-2 text-caption-strong",children:"مشاهده همه"})]});return i>0&&z.push(F),(0,o.jsxs)("section",{className:t,children:[(0,o.jsx)("div",{ref:O,id:eF.FK.QUESTION_SECTION,className:"px-4 lg:px-0",onClick:i>0?function(){(0,eI.dk)({productId:s,sectionName:eI.b$.QUESTIONS,navigationType:eI.OQ.CLICK,isShowMore:!0}),a(),(0,eQ.y0)({type:"mobile_above_carousel"})}:void 0,children:(0,o.jsx)(eU.D,{labelTagName:"h2",className:"py-0",title:"پرسش و پاسخ",titleClassName:"text-dark-neutral-000 text-h5",leftSlot:i>0&&(0,o.jsx)(e2.e,{mode:"anchor",className:"text-button-2",iconColor:"high-emphasis",color:"n-650","data-cro-id":eq.h.PDP_ALL_QUESTIONS,label:"مشاهده ".concat((0,eY.U)(i)," پرسش")})})}),(0,o.jsx)(eA.l,{className:(0,es.d)("pr-4",{"border-complete-b pb-4":i>0}),items:z}),(0,o.jsxs)("div",{onClick:D,"data-cro-id":eq.h.PDP_QUESTION_CTA,className:"flex items-center py-4 px-4 cursor-pointer",children:[(0,o.jsx)("span",{className:"rounded-circle p-2 bg-neutral-100 ml-3",children:(0,o.jsx)(L.J,{icon:"cube-action-ask",size:20})}),(0,o.jsx)("p",{className:"text-body1-strong text-neutral-650",children:"شما هم درباره این کالا سوال بپرسید"}),(0,o.jsx)(L.J,{size:24,icon:"chevronLeft",color:"high-emphasis",className:"mr-auto pr-4"})]}),(0,o.jsx)(iV,{isOpen:!(0,_.x)(w),questionData:w,onClose:R,onAnswerClick:V}),(0,o.jsx)(iF,{productId:s,isQuestionsModalOpen:n,closeQuestionsModal:r,sort:b,params:x,onSortOptionClick:p,questions:N,pager:j,pending:m,fetchNextPage:f,hasNextPage:v}),(0,o.jsx)(iO,{answerModalData:S,onClose:function(){P({isQuestionAnswerModalOpen:!1,questionId:"",questionText:"",successCallback:function(){}})}}),(0,o.jsx)(ib.p,{productId:s,onFinish:M,onDismiss:M,isOpen:T})]})}function iH(e){var t,s=e.className,i=e.questions,n=void 0===i?[]:i;return(0,o.jsx)("section",{className:s,children:null==n?void 0:null===(t=n.map)||void 0===t?void 0:t.call(n,function(e){return(0,o.jsx)(iy.Q,{className:"br-list-vertical-no-padding-200",question:e},e.questionId)})})}function iG(e){var t,s=e.className,i=e.description,n=e.product,a=(0,v.C)().isDesktop,r=n||{},l=r.productId,d=r.productLastQuestions,u=r.productQuestionsCount,p=(0,K.R)({modalId:eF.QV}),m=p.isOpen,x=p.onOpen,h=p.onClose,f=(0,eB.a)({apiMethod:ic.h,apiData:{productId:l},disabled:!a}),g=f.data,j=f.changeParams,b=f.pending,N=f.params,y=f.items,w=f.pageNumber,I=f.fetchPage,C=(0,$.V)({apiMethod:io.Q,apiData:{productId:l},disabled:a}),S=C.data,P=C.pending,k=(S||{}).questions,T=(0,E.Z)((0,c.useState)(null),2),D=T[0],M=T[1],O=(0,ir.z)().emit,A=null===(t=y[w])||void 0===t?void 0:t.questions;return((0,il.x)([{event:si.P8,handler:function(e){return M(e)}}]),et.s&&!(0,_.x)(d))?(0,o.jsx)(iH,{questions:d}):b&&1===w&&!m||P?(0,o.jsx)(eV.I,{}):(0,o.jsxs)("div",{children:[(0,o.jsx)(ij,{isOpen:!!D,onClose:function(){var e;O(si.s6,{questionAnswerId:null==D?void 0:null===(e=D.questionAnswer)||void 0===e?void 0:e.questionAnswerId}),M(null)},modalData:D}),a?(0,o.jsx)(iD,{page:w,sort:null==g?void 0:g.sort,params:N,onSortOptionClick:j,pending:b,setPage:I,pager:null==g?void 0:g.pager,className:s,productId:l,description:i,questions:A||[],productQuestionsCount:u}):(0,o.jsx)(iQ,{className:s,productId:l,productQuestionsCount:u,isQuestionsModalOpen:m,openQuestionsModal:x,closeQuestionsModal:h,carouselQuestions:k,carouselQuestionsPending:P})]})}var i$=s(96057),iK=s(17084),iY=s(11494),iW=s.n(iY),iX="TABULAR_REF_ID",i0=!0;function i1(){return et.s||!window.location.pathname.startsWith("/product/dkp-")?{}:{page_info:{product_id:parseInt(window.location.pathname.split("/")[2].split("-")[1])||null}}}var i2=(0,c.forwardRef)(function(e,t){var s,i,n=e.productId,a=(0,E.Z)((0,c.useState)(!1),2),d=a[0],u=a[1],p=(0,E.Z)((0,c.useState)(0),2),m=p[0],x=p[1],h=(0,c.useRef)(null),f=(0,c.useRef)([]),v=(0,c.useRef)(null),j=(0,E.Z)((0,c.useState)({responses:{},loadedOffsets:[]}),2),b=j[0],N=j[1],y=(0,c.useRef)(null),w=(0,c.useMemo)(function(){var e,t;return(null===(e=Object.values(null!==(s=b.responses)&&void 0!==s?s:{})[0])||void 0===e?void 0:null===(t=e.meta)||void 0===t?void 0:t.offsets)||[]},[b.responses]),I=(0,c.useCallback)(function(e){var t;return null!==(i=null===(t=w[e])||void 0===t?void 0:t.offset)&&void 0!==i?i:e},[w]),C=(0,c.useMemo)(function(){return I(m)},[m,I]);(0,c.useImperativeHandle)(t,function(){return{setActiveTabularTab:function(e){x(e)}}});var S=(0,$.V)({apiMethod:iK.U,apiData:(0,r.Z)({productId:n},!i0&&{offset:C}),onSuccess:function(e){i0&&(i0=!1);var t=v.current;if(t&&!(0,_.x)(t)){var s=t.offsetWidth;t.style.width="".concat(s+1,"px"),t.style.width="".concat(s,"px")}if(!(0,_.x)(e)){var i,n,a=null===(i=e.meta)||void 0===i?void 0:i.current;N(function(t){return{responses:(0,l.Z)((0,r.Z)({},t.responses),(0,tv.Z)({},a,e)),loadedOffsets:(0,V.Z)(new Set((0,V.Z)(t.loadedOffsets).concat([a])))}}),(0,g.bY)({products:e.data.products,bigDataCarouselName:e.type,carouselTitle:e.data.title,url:!et.s&&(null==window?void 0:null===(n=window.location)||void 0===n?void 0:n.pathname),pageData:i1()})}},disabled:b.loadedOffsets.includes(C)}).pending,P=(0,c.useCallback)(function(e){var t,s=b.responses[C];s&&(0,g.ID)({products:s.data.products,bigDataCarouselName:s.type,carouselTitle:s.data.title,url:!et.s&&(null==window?void 0:null===(t=window.location)||void 0===t?void 0:t.pathname),productId:e,pageData:i1()})},[b.responses,C]),k=function(e){var t,s,i,n;null===(t=y.current)||void 0===t||null===(s=t.slideTo)||void 0===s||s.call(t,e),null===(i=y.current)||void 0===i||null===(n=i.updateAutoHeight)||void 0===n||n.call(i)},T=function(e){var t,s;x(e),k(e),(0,eW.X5)(iX,-100),null===(t=y.current)||void 0===t||null===(s=t.updateAutoHeight)||void 0===s||s.call(t)};(0,z.b)({onScroll:function(){var e=document.getElementById(iX);if(e){var t=e.getBoundingClientRect();u((null==t?void 0:t.top)<50)}}});var D=function(e){var t,s=b.responses[e],i=(null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.products)||[],n=i.length||2;return S&&!s?Array.from({length:n},function(e,t){return(0,o.jsx)(i$.b,{hideProductPriceBadges:!0,isSpecialCarousel:!1,productHasFreshTouchPoint:!1,showDefaultVariant:!0,isSkeleton:!0},t)}):i.filter(function(e){var t=e.productDefaultVariant;return!(0,_.x)(null==t?void 0:t.productVariantId)}).map(function(e){var t=e||{},s=t.productId,i=t.productUrl,n=t.productImage,a=t.productImageAlt,r=t.productTitle,l=t.productBadges,c=t.productPropertiesIsFake,d=t.productDefaultVariant||{},u=d.productVariantPropertiesIsRoosta,p=d.productVariantPriceIsApplicationIncredible,m=d.productVariantPriceSellingPrice,x=d.productVariantPriceDiscountPercent,h=d.productVariantPriceRrpPrice;return(0,o.jsxs)(Z.r,{to:i,shouldHandleUrlAndOnClick:!0,target:"_blank",onClick:function(){return P(s)},className:(0,es.d)("w-full border-complete !border-neutral-200 rounded-md overflow-hidden"),children:[(0,o.jsx)("div",{className:"bg-neutral-100",children:(0,o.jsx)(F.E,{image:n,alt:a||r,className:"w-full aspect-square",objectFit:"cover",style:{mixBlendMode:"multiply"}})}),(0,o.jsxs)("div",{className:"p-2 !pt-1 flex flex-col w-full justify-between items-start",children:[(0,o.jsx)("p",{className:"text-body1-strong-180 text-neutral-650 h-9 s:h-11 w-full ellipsis-2",children:r}),(0,o.jsx)("div",{className:"h-5 mb-1",children:(0,o.jsx)(tG.a,{className:"w-full h-5",productBadges:[(l||[])[0]],itemClassname:"!bg-transparent !px-0 !text-icon-high-emphasis !text-caption",productPropertiesIsFake:c,productVariantPropertiesIsRoosta:u,productVariantPriceIsApplicationIncredible:p})}),(0,o.jsx)(tJ.t,{className:(0,es.d)("bg-red flex flex-col h-10.5 pt-0.5",{"!justify-start !items-start":x,"!flex-row !justify-start !items-end":!x}),price:h,sellingPrice:m,discount:x,productDiscountPercent:x,discountOnTop:!0,compactPrice:!0})]})]},s)})},M=w.map(function(e){return(0,o.jsx)("div",{className:(0,es.d)("gap-x-2 gap-y-3",iW().ProductList__pagesContainer,iW()["ProductList__pagesContainer--withoutSidebar"]),children:D(e.offset)},"slide-".concat(e.offset))});return(0,_.x)(w)?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{ref:t,className:"w-full z-3 py-2 bg-white",children:[(0,o.jsx)("h3",{id:iX,className:"text-h5-compact text-neutral-850 pt-5 pb-3 px-4",children:"پیشنهاد ما"}),(0,o.jsx)("div",{className:d?"h-10":""}),(0,o.jsxs)("div",{ref:h,className:(0,es.d)("flex justify-start items-center gap-2 w-full overflow-auto hide-scrollbar",{"top-[80px] s:top-[90px] fixed z-10 bg-white py-2 border-complete-b !border-neutral-200 transition-all duration-200":d}),children:[(0,o.jsx)("div",{className:"pr-2 h-1"}),w.map(function(e,t){return(0,o.jsx)("div",{ref:function(e){f.current[t]=e},className:(0,es.d)("text-body-1-compact flex py-1"),onClick:function(){return T(t)},children:(0,o.jsx)("div",{className:(0,es.d)("rounded-lg px-3 whitespace-nowrap max-w-[300px] ellipsis-1 py-1 select-none h-8 !flex items-center justify-center",{"bg-gray text-icon-high-emphasis":t!==m,"text-gray bg-icon-high-emphasis":t===m}),children:e.title})},"".concat(e.type,"-").concat(e.offset))}),(0,o.jsx)("div",{className:"pr-2 h-1"})]})]}),(0,o.jsx)("div",{className:"px-4 pb-5",id:"tabs-container--top",ref:v,children:(0,o.jsx)(iu.i,{ref:y,autoHeight:!0,onSlideChange:function(e){var t,s,i=e.activeIndex,n=null===(t=h.current)||void 0===t?void 0:t.getBoundingClientRect(),a=null===(s=f.current[i])||void 0===s?void 0:s.getBoundingClientRect();if(n&&a&&h.current){var r=a.left-n.left+(h.current.scrollLeft||0)-n.width/2+a.width/2;h.current.scrollTo({left:r,top:0,behavior:"smooth"})}(0,eW.X5)(iX,-100),x(i),e.updateAutoHeight()},disableFreeModeOnDesktop:!0,hasNavigation:!1,slides:M,initialSlide:m})})]})}),i5=(0,c.forwardRef)(function(e,t){var s,i,n,a=e.className,r=e.product,l=e.handleActiveSpecModal,c=(r||{}).productShortReview||{},d=c.productDescription,u=(c.adminRates,c.technicalPropertiesAdvantages),p=c.technicalPropertiesDisAdvantages;return(0,_.x)(null==d?void 0:null===(s=d.trim)||void 0===s?void 0:s.call(d))?null:(0,o.jsxs)("div",{ref:t,className:(0,es.d)("flex flex-col w-full items-center pb-5",a),children:[(0,o.jsx)("div",{className:"w-full flex justify-between items-center pt-5 pb-3 px-5",children:(0,o.jsx)("span",{className:"text-h5-180 text-neutral-850",children:"معرفی کالا"})}),(0,o.jsxs)("div",{className:"flex flex-col w-full items-center gap-4",children:[(0,o.jsx)("p",{className:"text-body-1 px-5",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:eO.s$?"none":3,overflow:eO.s$?"visible":"hidden"},children:d}),(!(0,_.x)(u)||!(0,_.x)(p))&&(0,o.jsxs)("div",{className:(0,es.d)("flex gap-2 overflow-auto hide-scrollbar w-full",{"px-4":(0,_.x)(u)||(0,_.x)(p)}),children:[!(0,_.x)(u)&&!(0,_.x)(p)&&(0,o.jsx)("div",{className:"pr-3"}),!(0,_.x)(u)&&(0,o.jsxs)("div",{className:(0,es.d)("shrink-0 grow p-3 border-complete-200 rounded-md max-w-[240px] w-[240px]",{"!w-full !max-w-[100%]":(0,_.x)(p)}),children:[(0,o.jsx)("p",{className:"text-rating-4-5 text-body1-strong mb-3",children:"نکات مثبت"}),null===(i=null==u?void 0:u.slice(0,5))||void 0===i?void 0:i.map(function(e,t){return(0,o.jsxs)("div",{className:"flex items-start gap-2",children:[(0,o.jsx)(L.J,{icon:"addCircleFill",color:"rating-4-5",size:12,className:"text-rating-4-5 mt-1.5"}),(0,o.jsx)("p",{className:"text-body-2 text-icon-high-emphasis",children:e})]},t)})]}),!(0,_.x)(p)&&(0,o.jsxs)("div",{className:(0,es.d)("shrink-0 grow p-3 border-complete-200 rounded-md max-w-[240px] w-[240px]",{"!w-full !max-w-[100%]":(0,_.x)(u)}),children:[(0,o.jsx)("p",{className:"text-hint-text-error text-body1-strong mb-3",children:"نکات منفی"}),null===(n=null==p?void 0:p.slice(0,5))||void 0===n?void 0:n.map(function(e,t){return(0,o.jsxs)("div",{className:"flex items-start gap-2",children:[(0,o.jsx)(L.J,{icon:"removeCircle",size:12,color:"error",className:"text-hint-object-error mt-1.5"}),(0,o.jsx)("p",{className:"text-body-2 text-icon-high-emphasis",children:e})]},t)})]}),!(0,_.x)(u)&&!(0,_.x)(p)&&(0,o.jsx)("div",{className:"pr-3"})]}),(0,o.jsx)(B.z,{onClick:l,removePadding:!0,mode:"text",className:"pr-4 pl-3 py-1.5 !rounded-lg bg-neutral-100",children:(0,o.jsxs)("div",{className:"flex justify-center items-center gap-2 text-body2-strong text-icon-high-emphasis",children:["مشاهده ادامه معرفی",(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:16})]})})]})]})}),i3=s(97234),i4=s(98634),i6=s(61253),i8=s(75716),i7=s(16083),i9={RETURN_REASON:"RETURN_REASON",HAMTA:"HAMTA"},ne=(n={},(0,tv.Z)(n,i9.RETURN_REASON,"شرایط بازگشت کالا"),(0,tv.Z)(n,i9.HAMTA,"هشدار سامانه همتا"),n);function nt(e){var t,s=e.isOpen,i=e.type,n=e.product,a=e.onClose,r=(n||{}).productCategory||{},l=r.categoryReturnReasonAlert,c=r.categoryContentBox,d=(t={},(0,tv.Z)(t,i9.RETURN_REASON,(0,o.jsx)("div",{className:"mb-5",children:(0,o.jsx)("p",{className:"text-neutral-700 text-button-2",children:l})})),(0,tv.Z)(t,i9.HAMTA,(0,o.jsx)("div",{className:"mb-5",children:(0,o.jsx)("p",{className:"text-neutral-700 text-button-2",children:c})})),t);return(0,o.jsx)(ec.R,{isOpen:s,onClose:a,header:(0,o.jsx)("span",{className:"text-h5 bg-neutral-000",children:ne[i]}),children:(0,o.jsxs)("div",{className:"p-4",children:[d[i],(0,o.jsx)("div",{className:"w-full rounded-lg bg-neutral-100 text-h5 flex justify-center items-center cursor-pointer py-3",onClick:a,children:"متوجه شدم"})]})})}function ns(e){var t,s=e.className,i=e.product,n=i||{},a=n.productCategory,r=n.productTitleFa,l=n.productDefaultVariant,d=n.productId,u=(l||{}).productVariantPriceSellingPrice,p=a||{},m=p.categoryReturnReasonAlert,x=p.categoryContentBox,f=(0,ew.e)().redirect,v=(0,sp.v)(X.p.isLoggedIn),g=(0,K.R)({modalId:"price-feedback"}),j=g.isOpen,b=g.onOpen,N=g.onClose,y=(0,K.R)({modalId:"product-feedback"}),w=y.isOpen,I=y.onOpen,C=y.onClose,S=(0,K.R)({modalId:"return-reason"}),P=S.isOpen,k=S.onOpen,T=S.onClose,D=(0,sp.v)(i3.Jw.states),M=(0,E.Z)((0,c.useState)(null),2),O=M[0],A=M[1],R=(0,ey.E)({apiMethod:i6._}).request,V=ie(3),z=V.isOverflowing,B=V.textRef,F={icon:"p-2 rounded-circle bg-neutral-100",iconBadge:"absolute left-1.5 bottom-1.5 bg-neutral-100",title:"text-button-2-180",statusBadge:"text-body-1-compact whitespace-nowrap border-complete rounded-lg pr-1.5 pl-1 py-0.5 flex gap-1.5 justify-center items-center"};return(0,o.jsxs)("div",{className:(0,es.d)("flex flex-col justify-start items-start pt-5 pb-2",s),children:[(0,o.jsx)("h4",{className:"text-h5-180 text-neutral-850",children:"شرایط و قوانین"}),m&&(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 w-full",children:[(0,o.jsx)("div",{className:"relative pt-2.5 xs:pt-4",children:(0,o.jsx)(L.J,{icon:"cube-alert-info-outline",size:20,className:F.icon})}),(0,o.jsxs)("div",{className:"flex gap-1 grow flex-col py-4 border-b border-neutral-100 text-icon-high-emphasis",style:{borderStyle:"none none solid"},onClick:z?(t=i9.RETURN_REASON,function(){A(t),k()}):i4.ZT,children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:F.title,children:"شرایط بازگشت کالا"}),z&&(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]}),(0,o.jsx)("p",{className:"text-body-1 pl-5 text-icon-neutral-hint",ref:B,style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:3,overflow:"hidden"},children:m})]})]}),(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 w-full",children:[(0,o.jsx)("div",{className:"relative pt-2.5 xs:pt-2",children:(0,o.jsx)(L.J,{icon:"cube-action-price-tag",size:20,className:F.icon})}),(0,o.jsx)("div",{onClick:function(e){v?b():(e.preventDefault(),f({toLoginRegisterRoute:!0,withBackUrl:!0}))},className:"flex gap-1 grow flex-col py-4 border-b border-neutral-100 text-icon-high-emphasis",style:{borderStyle:"none none solid"},children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:F.title,children:"گزارش قیمت مناسب‌تر"}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]})})]}),(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 w-full",children:[(0,o.jsx)("div",{className:"relative pt-2.5 xs:pt-2",children:(0,o.jsx)(L.J,{icon:"cube-action-feedback",size:20,className:F.icon})}),(0,o.jsx)("div",{onClick:I,className:"flex gap-1 grow flex-col py-4 border-b border-neutral-100 text-icon-high-emphasis",style:{borderStyle:"none none solid"},children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:F.title,children:"گزارش مشخصات کالا یا موارد قانونی"}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]})})]}),(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 w-full",children:[(0,o.jsx)("div",{className:"relative pt-2.5 xs:pt-2",children:(0,o.jsx)(L.J,{icon:"cube-badge-money",size:20,className:F.icon})}),(0,o.jsx)(Z.r,{to:h.e4,className:"flex gap-1 grow flex-col py-4 border-b border-neutral-100 text-icon-high-emphasis",target:"_blank",style:{borderStyle:x?"none none solid":"none"},children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:F.title,children:"روش قیمت گذاری و نظارت بر قیمت"}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]})})]}),!(0,_.x)(x)&&(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 w-full",children:[(0,o.jsx)("div",{className:"relative pt-2.5 xs:pt-4",children:(0,o.jsx)(L.J,{icon:"cube-alert-info-outline",size:20,className:F.icon})}),(0,o.jsxs)("div",{className:"flex gap-1 grow flex-col py-4 text-icon-high-emphasis",children:[(0,o.jsx)("div",{className:"flex justify-between items-center",children:(0,o.jsx)("span",{className:F.title,children:"هشدار سامانه همتا"})}),(0,o.jsx)("p",{className:"text-body-1 pl-5 text-icon-neutral-hint",children:x})]})]}),v&&(0,o.jsx)(i8.I,{defaultVariantPrice:u,showModal:j,closeModal:N,productTitle:r,states:D,onSubmit:function(e){R({data:e,productId:d}).then(function(){return(0,eC.p)({message:"اطلاعات با موفقیت ثبت شد"})}),N()}}),(0,o.jsx)(i7.FeedbackModal,{showModal:w,close:C,productTitle:r,productId:d}),(0,o.jsx)(nt,{product:i,type:O,onClose:function(){T()},isOpen:P})]})}var ni=s(34064),nn=s(9406),na=s(58449),nr=s(82417),nl=s(6936),no=s(9265),nc=s(92499),nd=s.n(nc);function nu(e){var t=e.isShowingSearchModal,s=e.onCloseSearchModal,i=e.initialSearchTerm,n=void 0===i?"":i,a=e.className,d=(0,E.Z)((0,c.useState)({}),2),u=d[0],p=d[1],h=(0,E.Z)((0,c.useState)(n),2),f=h[0],v=h[1],j=(0,c.useRef)(),b=(0,z.Nr)(f,500),N=(0,m.useRouter)(),y=function(){j.current&&(j.current.style.transform="translateY(-100%)",v("")),t&&s()};(0,c.useEffect)(function(){t&&j.current&&(j.current.style.transform="translateY(0)")},[t]);var w=(0,ey.E)({apiMethod:no.kU}),C=w.request,P=w.pending;(0,c.useEffect)(function(){!t||(0,nn.e)()||(0,S.$i)()||C({q:b}).then(function(e){p((0,l.Z)((0,r.Z)({},e),{trends:[]}))})},[b,t]),(0,c.useEffect)(function(){v(n)},[n]);var k=function(){(0,g.cr)({searchTerm:f,keywords:null==u?void 0:u.keywords,categories:null==u?void 0:u.categories,products:null==u?void 0:u.products,advanceLinks:null==u?void 0:u.advanceLinks,searchVersion:null==u?void 0:u.searchVersion})},_=(0,c.useRef)(null),T=function(e){var t,s;k(),(0,I.d)(x.X.SEARCH_DATA_LAYER)&&(0,ni.Q)({searchTerm:e}),null===(t=_.current)||void 0===t||null===(s=t.blur)||void 0===s||s.call(t),N.replace((null==u?void 0:u.onEnterUrl)?u.onEnterUrl:(0,G.Gr)({url:(0,G.XH)(),queries:{q:e}}))};return t?(0,o.jsx)("div",{className:(0,es.d)("relative",a),children:(0,o.jsxs)("div",{onClick:function(){y()},className:(0,es.d)("flex flex-col fixed w-full h-full left-0 top-0",{"bg-[#00000045]":(0,na.k)(f),"bg-white":!(0,na.k)(f)}),children:[(0,o.jsx)("div",{ref:j,className:"bg-white absolute w-full top-0 left-0",onClick:function(e){return e.stopPropagation()},style:{transform:"translateY(-100%)",transition:"0.3s ease"},children:(0,o.jsx)(nl.Z,{ref:_,autoFocus:!0,isOpen:t,className:"my-3 mx-4 bg-neutral-100 px-3 py-1 rounded-xl !h-10",prependIconColor:"#757575",inputClassName:(0,es.d)("!text-h5 !text-icon-high-emphasis",nd().SearchInput),hasShadow:!1,hasPendingRequest:P,hasAppendIcon:!1,showBackIcon:!0,searchTerm:f,isActive:!0,prependIconOnClick:function(e){null==e||e.stopPropagation(),null==y||y()},appendIconOnClick:function(e){null==e||e.stopPropagation(),v("")},onSearchTermChange:function(e){return v(e.target.value)},appendIcon:"close",prependIcon:"",inputMode:!0,onKeyDown:function(e){if("Enter"===e.key){if(!(0,na.k)(f)){T(e.target.value);return}null==y||y()}},placeholder:"جستجو در کالاهای دیجی‌کالا"})}),(0,o.jsx)("div",{onClick:function(e){e.stopPropagation()},children:(0,o.jsx)(nr.Z,(0,r.Z)({hideSearchHistory:!0,searchTerm:f,debouncedSearchTerm:b,pending:P,className:"top-0 right-0 pt-14 !pb-0",sendBigDataSearchAutoCompleteTracker:function(e){k(),(0,g.EA)({searchTerm:f,clickedItem:e})}},u))})]})}):null}var np=s(6302),nm=s(90777),nx=s(26439),nh=s(2604),nf=s(1081),nv={seller:{icon:"deliveryInPerson",iconColor:"low-emphasis"},digikala:{icon:"deliveryExpress",iconColor:"low-emphasis"},fresh:{icon:"deliveryFastFmcg",iconColor:"low-emphasis"},jet:{icon:"deliveryToday",iconColor:"low-emphasis"}},ng={seller:{icon:"deliveryInPerson",iconColor:(0,eO.$l)("color-delivery-ship-by-seller")},digikala:{icon:"deliveryExpress",iconColor:(0,eO.$l)("color-delivery-express")},fresh:{icon:"deliveryFastFmcg",iconColor:(0,eO.$l)("color-fresh-500")},jet:{icon:"deliveryToday",iconColor:(0,eO.$l)("color-delivery-jet-expansion")}},nj=s(8695),nb={seller:{icon:"deliveryInPerson",iconColor:(0,tS.$)("color-delivery-ship-by-seller")},"seller-jet":{icon:"deliveryToday",iconColor:(0,tS.$)("color-delivery-ship-by-seller")},digikala:{icon:"deliveryExpress",iconColor:(0,tS.$)("color-delivery-express")},fresh:{icon:"deliveryFastFmcg",iconColor:(0,tS.$)("color-fresh-500")},jet:{icon:"deliveryToday",iconColor:(0,tS.$)("color-delivery-jet-expansion")}};function nN(e){var t=e.variantShipmentMethod,s=(0,ti.d)(),i=s.isOpen,n=s.onOpen,a=s.onClose,r=t.variantShipmentMethodProviders,l=(0,c.useMemo)(function(){return r.map(function(e){var t=e.variantShipmentMethodProviderLabel,s=t.title,i=t.description,n=e.variantShipmentMethodProviderPrice,a=n.text,r=n.value,l=e.variantShipmentMethodProviderDescription,c=nb[e.shippingMode]||{},d=c.iconColor,u=c.icon,p=r||a,m=p?(0,o.jsx)("div",{className:"contents",children:(0,o.jsxs)("div",{className:"inline-flex items-center overflow-hidden text-ellipsis whitespace-nowrap",children:[(0,sI.h)(p)?(0,ed.j)(p):(0,eY.U)(p),(0,sI.h)(p)?(0,o.jsx)(L.J,{className:"mr-0.5 flex-shrink-0",size:16,icon:"toman"}):""]})}):"",h="";i&&((0,I.d)(x.X.AB_TEST_SHIPPING_TRANSPARENCY_SHIPPING_COST)&&(h=" و "),h+=(0,eY.U)(i));var f=function(e,t){return(0,o.jsxs)("div",{className:"flex ellipsis-1 items-center mr-2",children:[(0,o.jsx)("span",{className:e,children:(0,eY.U)(s)}),p&&(0,o.jsxs)("span",{className:t,children:[((0,I.d)(x.X.AB_TEST_SHIPPING_TRANSPARENCY_SHIPPING_COST)||h)&&(0,o.jsx)("span",{className:"text-neutral-500",children:" • "}),(0,I.d)(x.X.AB_TEST_SHIPPING_TRANSPARENCY_SHIPPING_COST)&&m,h]})]})};return{icon:u,iconColor:d,itemTitle:f("text-body-2 text-neutral-500","text-neutral-650 text-body2-strong"),modalItemTitle:f("text-body1-strong text-neutral-650","!text-neutral-650 text-body-1"),modalContent:(0,eY.U)(l)}})},[r]),d=l.length>1?"روش‌ها و هزینه‌های ارسال":"روش و هزینه ارسال";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:(0,es.d)("flex gap-3 px-4 py-0.5 justify-start",{"items-start":l.length>=2,"items-center":l.length<2}),onClick:n,children:[(0,o.jsx)("div",{className:(0,es.d)("relative",{"pt-1 xs:pt-1.5":l.length>=2}),children:(0,o.jsx)(L.J,{icon:"cube-shop-product-available",size:20,className:"p-2 rounded-circle bg-neutral-100"})}),(0,o.jsxs)("div",{className:"flex gap-1 grow flex-col py-3 border-b border-neutral-100",style:{borderStyle:"none none solid"},children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-button-2-180 text-neutral-900 ellipsis-1",children:d}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]}),(0,o.jsx)("ul",{children:l.map(function(e){var t=e.icon,s=e.iconColor,i=e.itemTitle;return(0,o.jsxs)("li",{className:"flex items-center ml-3",children:[(0,o.jsx)(L.J,{icon:t,color:s,size:18}),i]})})})]})]}),(0,o.jsx)(q.Modal,{isOpen:i,onDismiss:a,header:(0,o.jsx)("div",{className:"text-h5",children:d}),childrenClassName:"p-4 pb-5",bottomSheetContentClassName:"rounded-md",children:(0,o.jsxs)("div",{className:"flex flex-col gap-6",children:[l.map(function(e){var t=e.icon,s=e.iconColor,i=e.modalItemTitle,n=e.modalContent;return(0,o.jsxs)("div",{className:"text-neutral-650",children:[(0,o.jsxs)("li",{className:"flex items-center ml-1.5 mb-1",children:[(0,o.jsx)(L.J,{icon:t,size:18,color:s}),(0,o.jsx)("p",{className:"ellipsis-1 text-body1-strong-compact",children:i})]}),(0,o.jsx)("p",{className:"text-body-1",children:n})]})}),(0,o.jsx)("div",{className:"w-full rounded-md bg-neutral-100 -mt-3 text-h5 flex justify-center items-center cursor-pointer py-3",onClick:a,children:"باشه، فهمیدم"})]})})]})}function ny(e){var t=e.className,s=e.product,i=e.seller,n=e.openMoreInfoModalHandler,a=e.closeSellerSectionModal,r=e.handleOpenSuccessAddToCartModal,l=s||{},c=l.productPropertiesIsMedicalSupplement,d=l.productDefaultVariant.variantId,u=i||{},p=u.variantSeller,m=u.variantId,h=u.productVariantWarrantyTitleFa,f=u.productVariantGifts,v=void 0===f?[]:f,g=u.productVariantSellerTitle,j=u.productVariantSellerStars,b=u.productVariantStatisticsTotalRate,N=u.productVariantSellerPropertiesIsOfficial,y=u.productVariantSellerPropertiesIsTrusted,w=u.productVariantDigiPlusServicesSummary,C=void 0===w?[]:w,S=u.productVariantDigiclub,P=u.variantShipmentMethod,k=u.productVariantPriceIsApplicationIncredible,T=u.productVariantPriceIsLockedForDigiplus,D=u.productVariantPriceOrderLimit,M=u.productVariantId,O=u.productVariantMotorOilKyc,A=u.productVariantPriceRrpPrice,R=u.productVariantPriceSellingPrice,E=u.productVariantPriceDiscountPercent,V=(p||{}).sellerUrl,z=P||{},B=z.variantShipmentMethodDescription,F=z.variantShipmentMethodProviders,U="دیجی‌کالا"===g,q={icon:"p-2 rounded-circle bg-neutral-100",iconBadge:"absolute left-1.5 bottom-1.5 bg-neutral-100",title:"text-button-2 text-neutral-900",statusBadge:"text-body-1-compact text-neutral-900 whitespace-nowrap border-complete rounded-lg pr-1.5 pl-1 py-0.5 flex gap-1.5 justify-center items-center"},J=(S||{}).productDigiclubPoint,Q=(0,I.d)(x.X.AB_TEST_SHIPPING_TRANSPARENCY)?(0,o.jsx)(nN,{variantShipmentMethod:P}):(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 px-4",onClick:n(i,np.P.SHIPPING),children:[(0,o.jsx)("div",{className:"relative pt-1 xs:pt-1.5",children:(0,o.jsx)(L.J,{icon:"cube-shop-product-available",size:20,className:q.icon})}),(0,o.jsxs)("div",{className:"flex gap-1 grow flex-col py-3 border-b border-neutral-100",style:{borderStyle:"none none solid"},children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:q.title,children:B}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]}),(0,o.jsx)("ul",{children:F.map(function(e){var t=e.variantShipmentMethodProviderType,s=e.variantShipmentMethodProviderTitle,i=(e.variantShipmentMethodProviderHasLeadTime?nv[t]:ng[t])||{},n=i.iconColor,a=i.icon;return(0,o.jsxs)("li",{className:"flex ml-3 items-center",children:[(0,o.jsx)(L.J,{icon:a,color:n,size:18}),(0,o.jsx)("p",{className:"text-body-2 text-neutral-500 mr-2 ellipsis",children:(0,eY.U)(s)})]})})})]})]});return(0,o.jsxs)("div",{className:(0,es.d)("flex flex-col w-full",t),id:"seller-card-".concat(m),children:[(0,o.jsxs)("div",{className:"flex flex-col w-full",children:[(0,o.jsxs)("div",{className:"w-full flex flex-col justify-center items-start pt-5 px-4",children:[(0,o.jsx)("span",{className:"text-h5-compact text-neutral-850",children:c?"داروخانه":"فروشنده"}),d===m&&(0,o.jsx)("span",{className:"text-body-1-180 text-icon-high-emphasis",children:"شما در حال خرید از این فروشنده هستید"})]}),(0,o.jsxs)(Z.r,{to:V,className:"flex justify-start items-start gap-3 px-4",children:[(0,o.jsxs)("div",{className:"relative pt-1 xs:pt-1.5",children:[U?(0,o.jsx)(L.J,{icon:"cube-badge-dk-smile",color:"white",size:20,className:(0,es.d)(q.icon,"!bg-primary-500")}):(0,o.jsx)(L.J,{icon:"cube-shop-seller",size:20,className:q.icon}),N&&(0,o.jsx)(L.J,{className:q.iconBadge,color:(0,tS.$)("color-seller-official"),icon:"cube-badge-verified",size:12}),!N&&y&&(0,o.jsx)(L.J,{className:q.iconBadge,color:(0,tS.$)("color-rating-4-5"),icon:"cube-badge-verified",size:12})]}),(0,o.jsxs)("div",{className:"flex gap-1 grow flex-col py-3 border-b border-neutral-100",style:{borderStyle:"none none solid"},children:[(0,o.jsxs)("div",{className:"flex justify-start items-center",children:[(0,o.jsx)("span",{className:q.title,children:g}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:16}),N||U&&(0,o.jsx)("span",{className:"mr-2 rounded-lg text-button-2-180 text-seller-official px-2 bg-[rgb(var(--color-home-500-rgb),0.1)]",children:"رسمی"}),y||U&&(0,o.jsx)("span",{className:"mr-2 rounded-lg text-button-2-180 text-rating-4-5 px-2 bg-[rgb(var(--color-rating-4-5-rgb),0.1)]",children:"منتخب"})]}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[b>0&&(0,o.jsxs)("div",{className:q.statusBadge,children:["رضایت از کالا",(0,o.jsxs)("span",{className:"text-white text-body1-strong-compact rounded-lg px-2 py-0.5",style:{backgroundColor:(0,tS.$)((0,nx.$B)(b))},children:[(0,eY.U)(b),"٪"]})]}),j>0&&(0,o.jsxs)("div",{className:q.statusBadge,children:["عملکرد",(0,o.jsx)("span",{className:"text-white text-body1-strong-compact rounded-lg px-2 py-0.5",style:{backgroundColor:(0,tS.$)((0,nx.l8)(j))},children:(0,nx.E4)(j)})]})]})]})]}),h&&(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 px-4",children:[(0,o.jsx)("div",{className:"relative pt-1 xs:pt-1.5",children:(0,o.jsx)(L.J,{icon:"cube-shop-guarantee",size:20,className:q.icon})}),(0,o.jsx)("div",{className:"flex gap-1 grow flex-col py-3 border-b border-neutral-100",style:{borderStyle:"none none solid"},children:(0,o.jsx)("div",{className:"flex justify-start items-center",children:(0,o.jsx)("span",{className:q.title,children:(0,eY.U)(h)})})})]}),Q,!(0,_.x)(C)&&(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 px-4",children:[(0,o.jsx)("div",{className:"relative pt-1 xs:pt-1.5",children:(0,o.jsx)(L.J,{icon:"cube-badge-plus",size:20,className:q.icon})}),(0,o.jsxs)("div",{className:"flex gap-1 grow flex-col py-3 border-b border-neutral-100",style:{borderStyle:"none none solid"},children:[(0,o.jsx)("div",{className:"flex justify-between items-center",children:(0,o.jsx)("span",{className:q.title,children:"ویژه اعضای پلاس"})}),(0,o.jsx)("ul",{children:C.map(function(e){return(0,o.jsx)("li",{className:"flex ml-3 items-center",children:(0,o.jsx)("p",{className:"text-body-2-180 text-neutral-500 ellipsis",children:e})},e)})})]})]}),J>0&&(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 px-4",onClick:n(i,np.P.DIGICLUB),children:[(0,o.jsx)("div",{className:"relative pt-1 xs:pt-1.5",children:(0,o.jsx)(L.J,{icon:"cube-badge-club-coin",size:20,className:q.icon})}),(0,o.jsx)("div",{className:(0,es.d)("flex gap-1 grow flex-col py-3",{"border-b border-neutral-100":v.length>0}),style:{borderStyle:v.length>0?"none none solid":"none"},children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("span",{className:q.title,children:[(0,eY.U)(J)," امتیاز دیجی‌کلاب دریافت می‌کنید"]}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]})})]}),v.length>0&&(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 px-4",onClick:n(i,np.P.GIFT),children:[(0,o.jsx)("div",{className:"relative pt-1 xs:pt-1.5",children:(0,o.jsx)(L.J,{icon:"cube-shop-gift",size:20,className:q.icon})}),(0,o.jsx)("div",{className:"flex gap-1 grow flex-col py-3",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("span",{className:q.title,children:["دارای ",(0,eY.U)(v.length)," هدیه بعد از خرید"]}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]})})]})]}),(0,o.jsxs)("div",{className:"py-3 px-5 border-complete-t-200 flex justify-between items-center bg-white",children:[(0,o.jsx)("div",{className:"min-w-6/12 shrink-0",children:(0,o.jsx)(nj.a,{addToCartCallback:function(){a(),r(M)},hideSuccessAddToCartModal:!0,isApplicationIncredible:k,isLockedForDigiplus:T,maxCount:D,productVariantId:M,isSellerSection:!0,hasMotorOilKyc:O})}),(0,o.jsx)(tJ.t,{isVertical:!0,price:A,sellingPrice:R,productDiscountPercent:E,className:"mr-auto pr-4"})]})]})}var nw=s(71541),nI={SELLER:"SELLER",SHIPPING:"SHIPPING",GUARANTY:"GUARANTY",DIGICLUB:"DIGICLUB",GIFT:"GIFT"},nC=(a={},(0,tv.Z)(a,nI.SELLER,"اطلاعات تکمیلی فروشنده"),(0,tv.Z)(a,nI.SHIPPING,"جزئیات ارسال"),(0,tv.Z)(a,nI.GUARANTY,"جزئیات گارانتی"),(0,tv.Z)(a,nI.DIGICLUB,"امتیاز دیجی‌کلاب"),(0,tv.Z)(a,nI.GIFT,"لیست هدیه‌ها"),a);function nS(e){var t,s,i,n=e.isOpen,a=e.type,r=e.defaultVariant,l=e.onClose,c=r||{},d=c.productVariantWarrantyTitleFa,u=c.productVariantGifts,p=c.productVariantShipmentMethodsProviders,m=c.productVariantSellerId,x=c.productVariantSellerTitle,h=c.productVariantSellerRegistrationDate,f=c.productVariantSellerStars,v=c.productVariantSellerStatisticsShipOnTime,g=c.productVariantSellerStatisticsReturn,j=c.productVariantSellerStatisticsCancellation,b=c.productVariantStatisticsTotalRate,N=c.productVariantStatisticsTotalCount,y=c.productVariantStatisticsTotallySatisfiedRate,w=c.productVariantStatisticsSatisfiedRate,I=c.productVariantStatisticsNeutralRate,C=c.productVariantStatisticsDissatisfiedRate,S=c.productVariantStatisticsTotallyDissatisfiedRate,P=(i={},(0,tv.Z)(i,nI.SELLER,(0,o.jsx)(nw.x,{sellerId:m,sellerTitle:x,sellerRegistrationDate:h,sellerStars:f,sellerStatisticsShipOnTime:v,sellerStatisticsReturn:g,sellerStatisticsCancellation:j,statisticsTotalCount:N,statisticsTotalRate:b,totallySatisfiedRate:y,satisfiedRate:w,neutralRate:I,dissatisfiedRate:C,totallyDissatisfiedRate:S})),(0,tv.Z)(i,nI.SHIPPING,null==p?void 0:null===(t=p.map)||void 0===t?void 0:t.call(p,function(e){var t=e.productVariantShipmentMethodsProviderTitle,s=e.productVariantShipmentMethodsProviderDescription;return(0,o.jsxs)("div",{className:"mb-5",children:[(0,o.jsx)("p",{className:"text-h5",children:(0,eY.U)(t)}),(0,o.jsx)("p",{className:"text-neutral-700 text-button-2",children:s})]})})),(0,tv.Z)(i,nI.GUARANTY,(0,o.jsx)("div",{className:"mb-5",children:(0,o.jsx)("p",{className:"text-neutral-700 text-button-2",children:(0,eY.U)(d)})})),(0,tv.Z)(i,nI.DIGICLUB,(0,o.jsx)("div",{className:"mb-5",children:(0,o.jsx)("p",{className:"text-neutral-700 text-button-2",children:"بعد از پایان مهلت مرجوعی، برای دریافت امتیاز به صفحه ماموریت‌های کلابی سر بزنید."})})),(0,tv.Z)(i,nI.GIFT,null==u?void 0:null===(s=u.map)||void 0===s?void 0:s.call(u,function(e){var t=e.giftTitle,s=e.giftUrl,i=e.giftId,n=e.giftMainImage,a=e.giftRateCount,r=e.giftRate;return(0,o.jsx)(Z.r,{to:s,className:"br-list-vertical-no-padding-200",children:(0,o.jsxs)("div",{className:"flex flex-wrap py-5",children:[(0,o.jsx)(F.E,{image:n,width:100,height:100,className:"rounded",alt:t}),(0,o.jsxs)("div",{className:"flex flex-col justify-between grow",children:[(0,o.jsx)("p",{className:"text-subtitle text-neutral-700 mr-4",children:t}),(0,o.jsxs)("div",{className:"flex items-center sm:text flex-row-reverse",children:[(0,o.jsx)(L.J,{icon:"starFill",size:16,color:"rating-0-2"}),r&&(0,o.jsx)("span",{className:"px-1 pt-1 text-neutral-700",children:(0,eY.U)((r/20).toFixed(1))}),a&&(0,o.jsxs)("span",{className:"text-neutral-400 pt-1",children:["(",(0,eY.U)(a),")"]})]})]})]})},i)})),i);return(0,o.jsx)(ec.R,{scrollLocking:!0,isOpen:n,onClose:l,snapPoints:function(e){var t=e.maxHeight,s=e.minHeight,i=[s];return s>.7*t&&i.push(t),i},header:(0,o.jsx)("span",{className:"text-h5 bg-neutral-000",children:nC[a]}),children:(0,o.jsxs)("div",{className:"p-4",children:[P[a],(0,o.jsx)("div",{className:"w-full rounded-lg bg-neutral-100 text-h5 flex justify-center items-center cursor-pointer py-3",onClick:l,children:"متوجه شدم"})]})})}var nP=s(58389),nk=s.n(nP);function n_(e){var t=e.className,s=e.product,i=e.defaultVariant,n=e.sellers,a=e.lowestPrice,r=e.groupByColor,l=e.groupBySize,d=e.setDefaultVariantItem,u=(0,K.R)({modalId:"seller"}),p=u.isOpen,m=u.onOpen,h=u.onClose,f=(0,K.R)({modalId:"add-to-cart",shouldCloseOtherModals:!0}),v=f.isOpen,j=f.onClose,b=f.onOpen,N=(0,E.Z)((0,c.useState)(),2),y=N[0],w=N[1],C=(0,$.Z)({apiMethod:nh.m,apiData:{productId:s.productId}}).data,S=function(e){w(e),setTimeout(function(){b()},300)};(0,il.x)([{event:si.Fg,handler:function(e){m(),function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,i=0;requestAnimationFrame(function n(){var a=e();a?t(a):i<s&&(i++,setTimeout(function(){requestAnimationFrame(n)},0))})}(function(){return document.getElementById("seller-card-".concat(e))},function(e){e&&setTimeout(function(){e.scrollIntoView({inline:"center",behavior:"smooth",block:"center"}),setTimeout(function(){e.classList.add(nk().sellerCard__lowestPrice)},500)},500)})}}]);var P=(s||{}).productPropertiesIsMedicalSupplement,k=i||{},T=k.variantSeller,D=k.productVariantWarrantyTitleFa,M=k.productVariantGifts,O=void 0===M?[]:M,A=(k.productVariantSellerId,k.productVariantSellerTitle),R=k.productVariantSellerStars,V=k.productVariantStatisticsTotalRate,F=(k.productVariantSellerPropertiesIsNew,k.productVariantSellerPropertiesIsOfficial),U=k.productVariantSellerPropertiesIsTrusted,q=(k.productVariantSellerRatingTotalRate,k.productVariantSellerCode,k.productVariantSellerLogo,k.productVariantDigiPlusServicesSummary),J=void 0===q?[]:q,Q=k.productVariantDigiclub,H=(k.productVariantManufacturePrice,k.variantShipmentMethod),G=(k.productVariantHasImporterPrice,k.productVariantPriceSellingPrice);k.variantNotices;var Y=(0,c.useMemo)(function(){var e,t,s=null===(e=C.filter)||void 0===e?void 0:e.call(C,function(e){return n.some(function(t){return t.productVariantId===e.variantId})});if((null==s?void 0:s.length)>0)return s;var a=null===(t=C.find)||void 0===t?void 0:t.call(C,function(e){return e.variantId===i.variantId});return a?[a]:[]},[i.variantId,C,n]),W=(0,E.Z)((0,tq.Z)({eventData:{widgetName:"seller_voucher_pdp_touchpoint",pageInfo:{product_id:s.productId}},callback:g.n5}),1)[0],X=(0,z.zX)().emit,ee=(T||{}).sellerUrl,et=(0,K.R)({modalId:"seller-info"}),ei=et.isOpen,en=et.onClose,ea=et.onOpen,er=(0,E.Z)((0,c.useState)(null),2),el=er[0],eo=er[1],eu=(0,E.Z)((0,c.useState)(i),2),ep=eu[0],em=eu[1];function ex(e,t){return function(){em(e||i),eo(t),ea()}}var eh=H||{},ef=eh.variantShipmentMethodDescription,ev=eh.variantShipmentMethodProviders,eg="دیجی‌کالا"===A,ej={icon:"p-2 rounded-circle bg-neutral-100",iconBadge:"absolute left-1.5 bottom-1.5 bg-neutral-100",title:"text-button-2-180 text-neutral-900 ellipsis-1",statusBadge:"text-body-1-compact text-neutral-900 whitespace-nowrap border-complete-200 rounded-lg pr-2 pl-0.5 py-0.5 flex gap-1.5 justify-center items-center"},eb=(Q||{}).productDigiclubPoint;return(0,o.jsxs)("div",{id:"PdpSeller",className:(0,es.d)("flex flex-col w-full pb-3",t),children:[(0,o.jsxs)("div",{className:"w-full flex justify-between items-center pt-5 px-4",children:[(0,o.jsx)("span",{className:"text-h5-180 text-neutral-850",children:P?"داروخانه":"فروشنده"}),n.length>1&&(0,o.jsx)(B.z,{onClick:m,color:"black",mode:"text",removePadding:!0,children:(0,o.jsxs)("span",{className:"flex gap-1/5 justify-center items-center text-button-2 text-icon-high-emphasis",children:["انتخاب از ".concat((0,eY.U)(n.length-1)," ").concat(P?"داروخانه":"فروشنده"," دیگر"),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:18})]})})]}),!(0,_.x)(Y)&&(0,I.d)(x.X.AB_SELLER_VOUCHERS)&&(0,o.jsx)("div",{className:"px-4 py-2 mt-2",ref:W,onClick:function(){(0,nm.X)({productId:s.productId})},children:(0,o.jsx)(nf.s,{isNewPdp:!0,isCurrentVariant:1===Y.length&&Y[0].variantId===i.variantId,product:s,defaultVariantItem:i,setDefaultVariantItem:d,groupBySize:l,groupByColor:r,vouchers:Y})}),(0,o.jsxs)(Z.r,{to:ee,className:"flex justify-start items-center gap-3 px-4 py-0.5",children:[(0,o.jsxs)("div",{className:"relative",children:[eg?(0,o.jsx)(L.J,{icon:"cube-badge-dk-smile",color:"white",size:20,className:(0,es.d)(ej.icon,"!bg-primary-500")}):(0,o.jsx)(L.J,{icon:"cube-shop-seller",size:20,className:ej.icon}),F&&!eg&&(0,o.jsx)(L.J,{className:ej.iconBadge,color:(0,tS.$)("color-seller-official"),icon:"cube-badge-verified",size:12}),!F&&U&&!eg&&(0,o.jsx)(L.J,{className:ej.iconBadge,color:(0,tS.$)("color-rating-4-5"),icon:"cube-badge-verified",size:12})]}),(0,o.jsxs)("div",{className:"flex gap-1 grow flex-col py-3 border-b border-neutral-100 w-full",style:{borderStyle:"none none solid"},children:[(0,o.jsxs)("div",{className:"flex justify-start items-center w-full",children:[(0,o.jsx)("span",{className:ej.title,children:A}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:16}),(F||eg)&&(0,o.jsx)("span",{className:"mr-2 rounded-lg text-button-2-180 text-seller-official px-2 bg-[rgb(var(--color-home-500-rgb),0.1)]",children:"رسمی"}),(U||eg)&&(0,o.jsx)("span",{className:"mr-2 rounded-lg text-button-2-180 text-rating-4-5 px-2 bg-[rgb(var(--color-rating-4-5-rgb),0.1)]",children:"منتخب"})]}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[V>0&&(0,o.jsxs)("div",{className:ej.statusBadge,children:["رضایت از کالا",(0,o.jsxs)("span",{className:"text-white text-body1-strong-compact rounded-lg px-2 py-0.5",style:{backgroundColor:(0,tS.$)((0,nx.$B)(V))},children:[(0,eY.U)(V),"٪"]})]}),R>0&&(0,o.jsxs)("div",{className:ej.statusBadge,children:["عملکرد",(0,o.jsx)("span",{className:"text-white text-body1-strong-compact rounded-lg px-2 py-0.5",style:{backgroundColor:(0,tS.$)((0,nx.l8)(R))},children:(0,nx.E4)(R)})]})]})]})]}),D&&(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 px-4 py-0.5",children:[(0,o.jsx)("div",{className:"relative pt-1 xs:pt-1.5",children:(0,o.jsx)(L.J,{icon:"cube-shop-guarantee",size:20,className:ej.icon})}),(0,o.jsx)("div",{className:"flex gap-1 grow flex-col py-3 border-b border-neutral-100",style:{borderStyle:"none none solid"},children:(0,o.jsx)("div",{className:"flex justify-start items-center",children:(0,o.jsx)("span",{className:ej.title,children:(0,eY.U)(D)})})})]}),(0,I.d)(x.X.AB_TEST_SHIPPING_TRANSPARENCY)?(0,o.jsx)(nN,{variantShipmentMethod:H}):(0,o.jsxs)("div",{className:(0,es.d)("flex gap-3 px-4 py-0.5 justify-start",{"items-start":ev.length>=2,"items-center":ev.length<2}),onClick:ex(i,np.P.SHIPPING),children:[(0,o.jsx)("div",{className:(0,es.d)("relative",{"pt-1 xs:pt-1.5":ev.length>=2}),children:(0,o.jsx)(L.J,{icon:"cube-shop-product-available",size:20,className:ej.icon})}),(0,o.jsxs)("div",{className:"flex gap-1 grow flex-col py-3 border-b border-neutral-100",style:{borderStyle:"none none solid"},children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:ej.title,children:ef}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]}),(0,o.jsx)("ul",{children:ev.map(function(e){var t=e.variantShipmentMethodProviderType,s=e.variantShipmentMethodProviderTitle,i=(e.variantShipmentMethodProviderHasLeadTime?nv[t]:ng[t])||{},n=i.iconColor,a=i.icon;return(0,o.jsxs)("li",{className:"flex ml-3 items-center",children:[(0,o.jsx)(L.J,{icon:a,color:n,size:18}),(0,o.jsx)("p",{className:"text-body-2-180 text-neutral-500 mr-2 ellipsis",children:(0,eY.U)(s)})]})})})]})]}),!(0,_.x)(J)&&(0,o.jsxs)("div",{className:(0,es.d)("flex gap-3 px-4 py-0.5 justify-start",{"items-start":J.length>=2,"items-center":J.length<2}),children:[(0,o.jsx)("div",{className:(0,es.d)("relative",{"pt-1 xs:pt-1.5":J.length>=2}),children:(0,o.jsx)(L.J,{icon:"cube-badge-plus",size:20,className:ej.icon})}),(0,o.jsxs)("div",{className:"flex gap-1 grow flex-col py-3 border-b border-neutral-100",style:{borderStyle:"none none solid"},children:[(0,o.jsx)("div",{className:"flex justify-between items-center",children:(0,o.jsx)("span",{className:ej.title,children:"ویژه اعضای پلاس"})}),(0,o.jsx)("ul",{children:J.map(function(e){return(0,o.jsx)("li",{className:"flex ml-3 items-center",children:(0,o.jsx)("p",{className:"text-body-2-180 text-neutral-500 ellipsis",children:e})},e)})})]})]}),eb>0&&(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 px-4 py-0.5",onClick:ex(i,np.P.DIGICLUB),children:[(0,o.jsx)("div",{className:"relative pt-1 xs:pt-1.5",children:(0,o.jsx)(L.J,{icon:"cube-badge-club-coin",size:20,className:ej.icon})}),(0,o.jsx)("div",{className:(0,es.d)("flex gap-1 grow flex-col py-3",{"border-b border-neutral-100":O.length>0}),style:{borderStyle:O.length>0?"none none solid":"none"},children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("span",{className:ej.title,children:[(0,eY.U)(eb)," امتیاز دیجی‌کلاب دریافت می‌کنید"]}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]})})]}),O.length>0&&(0,o.jsxs)("div",{className:"flex justify-start items-start gap-3 px-4 py-0.5",onClick:ex(i,np.P.GIFT),children:[(0,o.jsx)("div",{className:"relative pt-1 xs:pt-1.5",children:(0,o.jsx)(L.J,{icon:"cube-shop-gift",size:20,className:ej.icon})}),(0,o.jsx)("div",{className:"flex gap-1 grow flex-col py-3 border-b border-neutral-100",style:{borderStyle:"none none solid"},children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("span",{className:ej.title,children:["دارای ",(0,eY.U)(O.length)," هدیه بعد از خرید"]}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]})})]}),!(0,_.x)(a)&&(null==a?void 0:a.productVariantPriceSellingPrice)>0&&G-a.productVariantPriceSellingPrice>0&&(0,o.jsx)("div",{className:"mt-2 mx-4",children:(0,o.jsxs)("div",{onClick:function(){X(si.Fg,null==a?void 0:a.productVariantId)},className:"flex justify-between items-center bg-background-caution px-4 py-3 rounded-md",children:[(0,o.jsxs)("div",{className:"flex gap-3 justify-start items-center text-body1-strong",children:[(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)(L.J,{icon:"cube-alert-info-outline",size:20,color:"white",className:(0,es.d)(ej.icon,"!bg-hint-text-caution")})}),(0,o.jsxs)("div",{className:"flex flex-col justify-center items-start gap-1",children:[(0,o.jsx)("span",{className:"text-body1-strong-180 text-icon-high-emphasis",children:"این کالا را ارزان‌تر بخرید"}),(0,o.jsxs)("span",{className:"text-neutral-500 text-body-1-180",children:["این کالا را \xab",(0,ed.j)(G-a.productVariantPriceSellingPrice)," ","تومان\xbb ارزان‌تر بخرید"]})]})]}),(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:20})]})}),!(0,_.x)(n)&&(0,o.jsx)(ec.R,{isOpen:p,onClose:h,fixedHeight:1,header:(0,o.jsxs)("div",{className:"flex flex-col justify-center items-start",children:[(0,o.jsx)("p",{className:"text-h5 text-neutral-700",children:"فروشنده‌های این کالا"}),(0,o.jsxs)("p",{className:"text-caption text-neutral-500",children:[(0,eY.U)(n.length)," فروشنده"]})]}),children:(0,o.jsx)("div",{className:"flex flex-col p-4 gap-4",children:(n||[]).map(function(e){return(0,o.jsx)(ny,{closeSellerSectionModal:h,handleOpenSuccessAddToCartModal:S,openMoreInfoModalHandler:ex,className:(0,es.d)("border-complete-200 rounded-md relative overflow-hidden",nk().sellerCard),product:s,seller:e},null==e?void 0:e.variantId)})})}),(0,o.jsx)(sh.w,{buttonProps:{size:"large"},isOpenModal:v,closeModal:j,productVariantId:y}),(0,o.jsx)(nS,{defaultVariant:ep,type:el,onClose:function(){en()},isOpen:ei})]})}function nT(e){var t=e.className,s=e.product,i=e.handleActiveSpecModal,n=s||{},a=n.productReview;return(n.productSpecifications,n.productId,(0,_.x)(a))?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s4.D,{isSmall:!0}),(0,o.jsxs)("div",{className:"w-full flex flex-col gap-3 justify-center items-center py-5",children:[(0,o.jsxs)("div",{className:"w-full flex justify-between items-center px-4",children:[(0,o.jsx)("span",{className:"text-h5-180 text-neutral-850",children:"مشخصات کالا"}),(0,o.jsx)(B.z,{onClick:i,color:"black",mode:"text",removePadding:!0,children:(0,o.jsxs)("span",{className:"flex gap-1/5 justify-center items-center text-button-2 text-icon-high-emphasis",children:["مشاهده همه",(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:18})]})})]}),(0,o.jsxs)("ul",{className:(0,es.d)("w-full flex justify-start gap-2 overflow-auto hide-scrollbar",t),children:[(0,o.jsx)("li",{className:"pr-2"}),(a||[]).map(function(e){return(0,o.jsx)("li",{className:"py-2 px-3 border-complete-200 rounded-md",children:(0,o.jsxs)("div",{className:"flex flex-col justify-center items-start gap-1",onClick:i,children:[(0,o.jsxs)("span",{className:"flex justify-start items-center text-body-2-compact text-neutral-600 whitespace-nowrap",children:[e.productReviewAttrTitle,(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:16})]}),(0,o.jsx)("span",{className:"text-body1-strong-compact max-w-[50vw] ellipsis whitespace-nowrap",children:e.productReviewAttrValues.join("، ")})]})})}),(0,o.jsx)("li",{className:"pr-2"})]})]})]})}function nD(e){var t=e.isOpen,s=e.onClose,i=e.activeTabIndex,n=e.content,a=e.handleActiveSpecModal,r=e.tabs,l=(0,E.Z)((0,c.useState)(i||0),2),d=l[0],u=l[1];(0,c.useEffect)(function(){return u(i),function(){u(0)}},[i,a]);var p=(0,c.useRef)();return(0,c.useEffect)(function(){var e,t;null===(e=p.current)||void 0===e||null===(t=e.scrollIntoView)||void 0===t||t.call(e,!0)},[n,i]),(0,o.jsxs)(ec.R,{isOpen:t,onClose:s,fixedHeight:.6,header:(0,o.jsx)("div",{className:"flex justify-between items-center",children:(0,o.jsx)("p",{className:"text-h5 text-neutral-700",children:"مشخصات و بررسی کالا"})}),children:[(0,o.jsx)("div",{id:"SPEC_MODAL_TAB_CONTAINER",className:"fixed sm:top-16 top-15 bg-white left-0 flex w-full overflow-auto hide-scrollbar border-t border-complete-t border-b border-complete-b z-10",children:r.map(function(e,t){return(0,o.jsxs)("div",{onClick:a(e.id),className:(0,eO.dh)("relative text-body1-strong text-neutral-500 py-2 px-3 cursor-pointer whitespace-nowrap",{"!text-icon-high-emphasis":d===e.id}),children:[e.title,(0,o.jsx)("div",{className:(0,eO.dh)("bottom-0 absolute h-1 rounded-t",{"bg-black":d===e.id,"bg-none":d!==e.id}),style:{width:"96%",right:"2%"}})]},e.id)})}),(0,o.jsx)("span",{className:"block h-0 pt-9",ref:p}),n]})}function nM(e){var t=e.productSpecification||{},s=t.specificationTitle,i=t.specificationAttributes;return(0,o.jsxs)(o.Fragment,{children:[s&&(0,o.jsx)("p",{className:"w-full text-h5 text-neutral-850 shrink-0 pb-3 pt-4",children:s}),(0,o.jsx)("table",{className:"border-collapse",children:(i||[]).filter(function(e){return!(0,eO.xb)(e.specificationAttributeValues[0].trim())}).map(function(e,t,s){return(0,o.jsxs)("tr",{className:t!==s.length-1&&"border-complete-b-200",children:[(0,o.jsx)("th",{className:"w-30 min-w-[120px] max-w-[120px] md:min-w-[180px] md:max-w-[180px] text-right text-body-1 py-1.5 px-2 bg-neutral-100 align-top text-icon-high-emphasis",children:e.specificationAttributeTitle}),(0,o.jsx)("td",{className:"text-body-1 py-1.5 px-2 align-top text-icon-high-emphasis w-full",children:e.specificationAttributeValues.map(function(e){return e})})]})})})]})}var nO=function(e,t){var s;return(null===(s=e[t+1])||void 0===s?void 0:s.reviewSectionTemplate)!=="image"};function nA(e){var t,s,i,n=e.activeIndex,a=e.product||{},r=a.productShortReview,l=a.productReviewSections,c=a.productSpecifications,d=r||{},u=d.productDescription,p=d.technicalPropertiesAdvantages,m=d.technicalPropertiesDisAdvantages;return(0,o.jsxs)(o.Fragment,{children:[2===n&&(0,o.jsx)("div",{className:"px-4 pb-4 flex flex-col gap-1",children:null==c?void 0:null===(t=c.map)||void 0===t?void 0:t.call(c,function(e,t){return(0,o.jsx)(nM,{productSpecification:e},t)})}),1===n&&(0,o.jsx)("div",{className:"px-4",children:null==l?void 0:l.map(function(e,t){return(0,o.jsx)(t4.g,{reviewSection:e,shouldHaveMargin:nO},t)})}),0===n&&(0,o.jsxs)("div",{className:"flex flex-col w-full items-center gap-3 py-4",children:[!(0,_.x)(u)&&(0,o.jsx)("p",{className:"text-body-1 px-5",dangerouslySetInnerHTML:{__html:u}}),(0,o.jsxs)("div",{className:(0,es.d)("flex gap-2 overflow-auto hide-scrollbar w-full",{"px-4":(0,_.x)(p)||(0,_.x)(m)}),children:[!(0,_.x)(p)&&!(0,_.x)(m)&&(0,o.jsx)("div",{className:"pr-3"}),!(0,_.x)(p)&&(0,o.jsxs)("div",{className:(0,es.d)("shrink-0 grow p-3 border-complete-200 rounded-md max-w-[240px] w-[240px]",{"!w-full !max-w-[100%]":(0,_.x)(m)}),children:[(0,o.jsx)("p",{className:"text-rating-4-5 text-body1-strong mb-3",children:"نکات مثبت"}),null===(s=null==p?void 0:p.slice(0,5))||void 0===s?void 0:s.map(function(e,t){return(0,o.jsxs)("div",{className:"flex items-start gap-2",children:[(0,o.jsx)(L.J,{icon:"addCircleFill",color:"rating-4-5",size:12,className:"text-rating-4-5 mt-1.5"}),(0,o.jsx)("p",{className:"text-body-2 text-icon-high-emphasis",children:e})]},t)})]}),!(0,_.x)(m)&&(0,o.jsxs)("div",{className:(0,es.d)("shrink-0 grow p-3 border-complete-200 rounded-md max-w-[240px] w-[240px]",{"!w-full !max-w-[100%]":(0,_.x)(p)}),children:[(0,o.jsx)("p",{className:"text-hint-text-error text-body1-strong mb-3",children:"نکات منفی"}),null===(i=null==m?void 0:m.slice(0,5))||void 0===i?void 0:i.map(function(e,t){return(0,o.jsxs)("div",{className:"flex items-start gap-2",children:[(0,o.jsx)(L.J,{icon:"removeCircle",size:12,color:"error",className:"text-hint-object-error mt-1.5"}),(0,o.jsx)("p",{className:"text-body-2 text-icon-high-emphasis",children:e})]},t)})]}),!(0,_.x)(p)&&!(0,_.x)(m)&&(0,o.jsx)("div",{className:"pr-3"})]})]})]})}function nR(e){var t=e.className,s=e.product,i=e.handleActiveSpecModal,n=(s||{}).productSpecifications,a=null==n?void 0:n.flatMap(function(e){return e.specificationAttributes||[]});return(0,o.jsxs)("div",{className:(0,es.d)("flex flex-col w-full pb-5",t),children:[(0,o.jsx)("h3",{className:"text-h5-180 text-neutral-850 pt-5 pb-3 px-5",children:"جدول مشخصات"}),(0,o.jsx)("table",{className:"mr-4 border-collapse mb-4",children:(a||[]).filter(function(e){return!(0,_.x)(e.specificationAttributeValues[0].trim())}).slice(0,et.s?a.length:5).map(function(e,t,s){return(0,o.jsxs)("tr",{className:t!==s.length-1&&"border-complete-b-200",children:[(0,o.jsx)("th",{className:"text-right text-body-1 py-1.5 px-2 whitespace-nowrap bg-neutral-100 align-top text-icon-high-emphasis",children:e.specificationAttributeTitle}),(0,o.jsx)("td",{className:"text-body-1 py-1.5 px-2 align-top text-icon-high-emphasis w-full",children:e.specificationAttributeValues.map(function(e){return e})})]})})}),a.filter(function(e){return!(0,_.x)(e.specificationAttributeValues[0].trim())}).length>5&&(0,o.jsx)("div",{className:"flex flex-col w-full items-center gap-4",children:(0,o.jsx)(B.z,{onClick:i,removePadding:!0,mode:"text",className:"pr-4 pl-3 py-1.5 !rounded-lg bg-neutral-100",children:(0,o.jsxs)("div",{className:"flex justify-center items-center gap-2 text-body2-strong text-icon-high-emphasis",children:["مشاهده ادامه مشخصات",(0,o.jsx)(L.J,{icon:"cube-nav-chevron-left",size:16})]})})})]})}var nE=s(4249),nV=(0,s(1324).q)({url:function(e){var t=e.productId,s=e.categoryId,i=e.brandId;return"/product/".concat(t,"/services/?category_id=").concat(s,"&brand_id=").concat(i)},transformer:function(e){return((e.data||{}).services||[]).map(function(e){var t,s,i,n,a,r,l,o,c;return{serviceName:null==e?void 0:e.name,serviceTitle:null==e?void 0:e.title,serviceDescription:null==e?void 0:e.description,serviceLinkText:null==e?void 0:e.linkText,serviceLinkColor:null==e?void 0:e.linkColor,serviceIcon:null==e?void 0:e.icon,serviceUrl:null==e?void 0:e.url,serviceType:null==e?void 0:e.type,serviceOfflineShopData:(s=(t=({data:null==e?void 0:e.data}).data||{}).content,i=t.type,a=(n=s||{}).cta,r=n.description,l=n.features,o=n.images,c=n.locations,{content:{contentButtonName:null==a?void 0:a.title,contentDescription:r,contentFeatures:(l||[]).map(function(e){return{items:((null==e?void 0:e.items)||[]).map(function(e){return{featureDescription:null==e?void 0:e.description,featureIcon:null==e?void 0:e.icon,featureTitle:null==e?void 0:e.title}}),title:null==e?void 0:e.title}}),contentImages:o,contentLocations:(c||[]).map(function(e){return{icon:e.icon,address:e.address}})},type:i})}})}}),nz=s(39157);function nB(e){var t=e.className,s=e.name,i=(e.id,e.productId),n=e.icon,a=e.title,r=e.description,l=e.badge,d=e.body,u=e.link,p=e.type,x=e.onClick,h=u?Z.r:"div",f=function(){(0,g.d0)({widgetName:"".concat(s,"_banner"),clickedItemName:"".concat(s,"_banner"),pageInfo:{product_id:i}}),null==x||x()},v=(0,E.Z)((0,tq.Z)({eventData:{widgetName:"".concat(s,"_banner"),pageInfo:{product_id:i}},callback:g.n5}),1)[0],j=(0,K.R)({modalId:s}),b=j.isOpen,N=j.onOpen,y=j.onClose,w=(0,E.Z)((0,c.useState)(0),2),I=w[0],C=w[1],S=(0,m.useRouter)();return"bottom_sheet"===p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{onClick:function(){f(),(0,eO.xb)(x)&&(N(),C(window.history.length))},className:(0,es.d)("w-full flex justify-start items-start py-3 px-4 gap-3 border-complete-200 rounded-md","min-w-[245px] grow cursor-pointer",t),children:[(0,o.jsx)("div",{ref:v,className:"w-9 h-9 min-w-9 min-h-9 rounded-full p-2 bg-app-background",children:n}),(0,o.jsxs)("div",{className:"w-[calc(100%-36px)] flex flex-col items-start justify-between h-full gap-2",children:[(0,o.jsxs)("div",{className:"w-full flex flex-col items-start justify-center gap-1",children:[(0,o.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,o.jsx)("div",{className:"text-body1-strong-180 text-icon-high-emphasis",children:a}),l&&(0,o.jsx)("div",{children:l})]}),(0,o.jsx)("div",{className:"text-body-1-180 text-neutral-500",children:r})]}),d]})]}),(0,o.jsx)(ec.R,{header:(0,o.jsx)("div",{className:"flex flex-col justify-center items-start",children:(0,o.jsx)("p",{className:"text-h5 text-neutral-700",children:a})}),className:"relative",fixedHeight:.9,isOpen:b,snapPoints:function(e){return[.9*e.maxHeight]},onClose:function(){Array(window.history.length-I).fill("history").forEach(function(e,t){S.back()}),y()},children:(0,o.jsx)("iframe",{className:"w-full h-[calc(90vh-70px)]",src:u,title:a})})]}):(0,o.jsxs)(h,{shouldHandleUrlAndOnClick:!0,to:u,onClick:f,target:"_blank",className:(0,es.d)("w-full flex justify-start items-start py-3 px-4 gap-3 border-complete-200 rounded-md","min-w-[245px] grow",t),children:[(0,o.jsx)("div",{ref:v,className:"w-9 h-9 min-w-9 min-h-9 rounded-full p-2 bg-app-background",children:n}),(0,o.jsxs)("div",{className:"w-[calc(100%-36px)] flex flex-col items-start justify-between h-full gap-2",children:[(0,o.jsxs)("div",{className:"w-full flex flex-col items-start justify-center gap-1",children:[(0,o.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,o.jsx)("div",{className:"text-body1-strong-180 text-icon-high-emphasis",children:a}),l&&(0,o.jsx)("div",{children:l})]}),(0,o.jsx)("div",{className:"text-body-1-180 text-neutral-500",children:r})]}),d]})]})}var nL=sv()(function(){return s.e(2791).then(s.bind(s,12791)).then(function(e){return e.DigiplusSubscriptionModal})},{loadableGenerated:{webpack:function(){return[12791]}},ssr:!1});function nF(e){var t=e.product,s=e.defaultVariantItem;e.pdpPromotionBanner,e.touchPoints;var i=t||{},n=i.productId,a=i.productHasOfflineShopStock,r=i.productTitleFa,l=i.productBrand,d=i.productCategory,u=(s||{}).variantId,p=(0,$.V)({apiMethod:nE.P,apiData:{productId:n}}).data,m=null==p?void 0:p[u],x=m||{},h=x.digipayCreditAmount,f=(x.digipayPrePaymentAmount,x.digipayInstallmentCount),v=x.digipayInstallmentAmount,g=x.digipayRedirectUrl,j=(0,sp.v)(X.p.digiplusIsActivated),b=(s||{}).productVariantDigiplusServices,N=null==b?void 0:b.filter(function(e){return"ارسال رایگان"!==e.serviceTitle}),y=(0,K.R)({modalId:"plus-subscription-modal"}),w=y.isOpen,I=y.onClose,C=y.onOpen,S=(0,K.R)({modalId:"bnpl"}),P=(S.isOpen,S.onClose,S.onOpen,(0,K.R)({modalId:"offlineShop"})),k=P.isOpen,T=P.onClose,D=P.onOpen,M=(0,E.Z)((0,c.useState)({}),2),O=M[0],A=M[1],R=(0,$.V)({apiMethod:nV,apiData:{productId:n,categoryId:d.categoryId,brandId:l.brandId}}).data,V=[!(0,_.x)(m),!j&&!(0,_.x)(N)].filter(Boolean);return(0,_.x)(R)&&(0,_.x)(V)&&!a?null:(0,o.jsxs)(o.Fragment,{children:[!(0,_.x)(V)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s4.D,{}),(0,o.jsxs)("div",{id:"PdpThirdParties",className:"pt-2 pb-5",children:[(0,o.jsx)("span",{className:"block text-h5-180 text-neutral-850 px-4 py-3",children:"خدمات پرداخت و ارسال"}),(0,o.jsxs)("div",{className:"flex gap-3 overflow-auto justify-start hide-scrollbar",children:[(0,o.jsx)("span",{className:"pr-1 h-1"}),!(0,_.x)(m)&&(0,o.jsx)(nB,{name:"c_credit",productId:n,link:g,icon:(0,o.jsx)(L.J,{size:20,icon:"digipay",color:(0,tS.$)("color-digipay")}),title:"خرید اقساطی با دیجی پی",description:(0,o.jsxs)("span",{children:[(0,eY.U)(f)," ماهه و با ماهی"," ",(0,o.jsx)("span",{className:"text-body1-strong-180 text-neutral-650",children:(0,ed.j)(v)})," ","تومان،"," ",(0,o.jsx)("span",{className:"text-body1-strong-180 text-neutral-650",children:(0,ed.j)(h)})," ","تومان اعتبار پیشنهادی برای این کالا"]}),body:(0,o.jsxs)("div",{className:"text-body2-strong-180 pr-2 pl-1 py-0.5 text-digipay flex justify-center items-center rounded-lg border-digipay border-solid border-[1px]",children:["دریافت وام",(0,o.jsx)(L.J,{icon:"chevronLeft",size:16,color:(0,tS.$)("color-digipay")})]})}),!1,!j&&!(0,_.x)(N)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nB,{name:"plus",productId:n,onClick:C,icon:(0,o.jsx)(L.J,{size:20,icon:"cube-badge-plus",color:(0,tS.$)("color-plus-500")}),title:"ارسال رایگان سفارش‌ها برای اعضای پلاس",description:(N||[]).map(function(e){return(0,o.jsxs)(o.Fragment,{children:[null==e?void 0:e.serviceTitle,(0,o.jsx)("br",{})]})}),body:(0,o.jsxs)("div",{className:"text-body2-strong-180 pr-2 pl-1 py-0.5 text-plus-500 flex justify-center items-center rounded-lg border-plus-500 border-solid border-[1px]",children:["خرید اشتراک ‌پلاس",(0,o.jsx)(L.J,{icon:"chevronLeft",size:16,color:(0,tS.$)("color-plus-500")})]})}),(0,o.jsx)(nL,{shouldCloseOnPageChange:!1,isDigiplusTemporaryModal:!0,isHideDirectDebitPlan:!0,isOpenModal:w,onCloseModal:I})]}),(0,o.jsx)("span",{className:"pr-1 h-1"})]})]})]}),(!(0,_.x)(R)||a)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s4.D,{}),(0,o.jsxs)("div",{id:"PdpThirdParties",className:"pt-2 pb-5",children:[(0,o.jsx)("span",{className:"block text-h5-180 text-neutral-850 px-4 py-3",children:"دیگر سرویس‌های دیجی‌کالا"}),(0,o.jsxs)("div",{className:"flex gap-3 overflow-auto justify-start hide-scrollbar",children:[(0,o.jsx)("span",{className:"pr-1 h-1"}),!(0,_.x)(R)&&(null==R?void 0:R.map(function(e){return(0,o.jsx)(nB,{id:e.serviceName,name:e.serviceName,type:e.serviceType,productId:n,link:"offline_shop"!==e.serviceName&&e.serviceUrl,onClick:function(){a&&"offline_shop"===e.serviceName&&(A(e.serviceOfflineShopData),D())},icon:(0,o.jsx)(F.E,{src:e.serviceIcon,width:20,height:20}),title:e.serviceTitle,description:e.serviceDescription,body:(0,o.jsxs)("div",{className:"text-body2-strong-180 pr-2 pl-1 py-0.5 flex justify-center items-center rounded-lg border-solid border-[1px]",style:{color:e.serviceLinkColor,borderColor:e.serviceLinkColor},children:[e.serviceLinkText,(0,o.jsx)(L.J,{icon:"chevronLeft",size:16,color:e.serviceLinkColor})]})},e.serviceUrl)})),(0,o.jsx)("span",{className:"pr-1 h-1"})]})]}),(0,o.jsx)(nz.w,{title:r,isOpen:k,onClose:T,data:O})]})]})}function nU(e){var t=e.rightElements,s=e.leftElements,i=e.content,n=e.className;return(0,o.jsxs)("div",{className:(0,es.d)("flex justify-center items-center gap-2 !border-b-neutral-200",n),children:[(0,o.jsx)("div",{className:"flex justify-center items-center gap-1",children:t}),(0,o.jsx)("div",{className:"flex-1 py-3",children:i}),(0,o.jsx)("div",{className:"flex justify-center items-center gap-1",children:s})]})}var nZ=s(88408);function nq(e){var t,s,i=e.product,n=e.touchPoints,a=e.bigDataTrackerData,l=e.pdpPromotionBanner,u=(e.shippingFeePromotion,e.magnetPosts),p=e.dynamicCarousel,h=e.dkService,f=i||{},v=f.productStatus,g=f.productId,j=f.productReviewSections,b=f.productShortReview,N=f.productFidibo,y=f.productNewBadges,w=f.productSpecifications,C=f.productProperties,S=(0,c.useRef)(),P=(0,c.useRef)(),k=(0,E.Z)((0,c.useState)(335),2),T=k[0],M=k[1],O=(0,E.Z)((0,c.useState)(et.s),2),A=O[0],R=O[1],en=(0,E.Z)((0,c.useState)(!1),2),ea=en[0],er=en[1],el=(0,E.Z)((0,c.useState)(!1),2),eo=el[0],ec=el[1],ed=(0,E.Z)((0,c.useState)(void 0),2),eu=ed[0],eb=ed[1],eN=(0,E.Z)((0,c.useState)(!1),2),ey=eN[0],ew=eN[1],eI=(0,E.Z)((0,c.useState)(),2),eC=eI[0],eS=eI[1],ek=l||{},e_=ek.voucherBanner,eT=ek.productPromotion,eD=(h||{}).serviceID,eO=C.productPropertiesIsShipBySellerRestricted,eA=(0,c.useCallback)(function(){ec(!0),setTimeout(function(){return ec(!1)},5e3)},[]),eE=(0,d.v9)(X.p.isLoggedIn),eV=(0,$.V)({apiMethod:ei.W,apiData:{productId:g},disabled:!eE}),ez=eV.data,eB=eV.setPageData,eL=(0,K.R)({modalId:"insurance"}),eF=eL.isOpen,eU=eL.onClose,eZ=eL.onOpen,eq=(0,K.R)({modalId:"dkServiceModal"}),eJ=eq.isOpen,eQ=eq.onClose,eH=eq.onOpen,eG=(0,ej.r)({productId:g}),e$=eG.showCpcCarousel,eK=eG.cpcTitle,eY=eG.cpcProducts,eW=(eG.cpcDescription,eG.miniCpcProduct),eX={SPEC:{name:"SPEC",title:"مشخصات"},REVIEW:{name:"REVIEW",title:"بررسی تخصصی"},COMMENTS:{name:"COMMENTS",title:"دیدگاه و پرسش"},SUGGESTION:{name:"SUGGESTION",title:"پیشنهاد ما"}},e0=i||{},e1=e0.productDefaultVariant,e2=e0.productShowType;(0,c.useEffect)(function(){var e;M((null===(e=S.current)||void 0===e?void 0:e.getBoundingClientRect().height)+(e2===H.v$.FASHION?415:290))},[S.current,P.current]);var e5=((0,W.pL)()||{}).cartItemsCount,e3=(0,Y.a)({product:i}),e4=e3.groupBySize,e6=e3.groupByColor,e8=e3.sellers,e7=e3.breadCrumbs,e9=e3.defaultVariantItem,te=e3.setDefaultVariantItem,tt=(N||{}).productFidiboType,ts=e9||{},ti=ts.variantInsurance,tn=ts.productVariantColorId,ta=ts.productVariantSizeId,tr=e1||{},tl=tr.productVariantPriceSellingPrice,to=tr.productVariantBadges,tc=(0,c.useMemo)(function(){if(!((0,_.x)(e6)&&(0,_.x)(e4)||(0,_.x)(e9))){var e,t=tn?null==e6?void 0:e6[tn]:null==e4?void 0:e4[ta];return null==t?void 0:null===(e=t.find)||void 0===e?void 0:e.call(t,function(e){return e.productVariantPriceSellingPrice<tl})}},[e9,e6,e4]),td=(0,m.useRouter)(),tu=(0,K.R)({modalId:"more-actions"}),tp=tu.isOpen,tm=tu.onClose,tx=tu.onOpen,th=(0,K.R)({modalId:"search"}),tf=th.isOpen,tv=th.onClose,tg=th.onOpen,tj={rightElements:[(0,o.jsx)(B.z,{removePadding:!0,className:"p-2",onClick:function(){var e,t=null==document?void 0:document.referrer,s=t.startsWith("https://www.digikala.com");(0,ee.S)()?td.back():(0,_.x)(t)||!s?td.push((0,G.ws)()):null==window||null===(e=window.close)||void 0===e||e.call(window)},mode:"text",children:(0,o.jsx)(L.J,{size:24,icon:"close"})})],leftElements:[(0,o.jsx)(B.z,{removePadding:!0,className:"p-2",onClick:tg,mode:"text",children:(0,o.jsx)(L.J,{size:24,icon:"cube-action-search"})}),(0,o.jsxs)("div",{className:"p-2 overflow-visible",children:[(0,o.jsx)(Z.r,{to:(0,G.gX)(),children:(0,o.jsx)(L.J,{size:24,icon:"cube-shop-cart-outline",count:e5>0?e5:void 0,countBgColor:"primary"})}),(0,o.jsx)(J.u,{tooltipOffset:[-12,0],hasArrow:!0,label:"رفتن به سبد خرید",position:"bottom-start",openTooltip:eo})]}),(0,o.jsx)(em.s,{className:"p-2",onClick:tx}),(0,o.jsxs)(q.Modal,{shouldCloseOnPageChange:!1,isOpen:tp,onDismiss:tm,children:[(0,o.jsx)(s3,{onCloseParentModal:tm,product:i}),(0,o.jsx)(eh.Y,{productId:g}),(0,o.jsx)(ev.d,{productId:g}),(0,o.jsx)(ef.w,{productId:g,userReactions:ez,onObserveUpdated:function(e){eB(function(t){var s;return(0,_.x)(null==t?void 0:null===(s=t.product)||void 0===s?void 0:s.productUserReactions)||(t.product.productUserReactions.productHasIncredibleOfferObserverActive=e),(0,r.Z)({},t)})}})]})]},tb=function(){er((null==window?void 0:window.pageYOffset)>=255);var e=Object.values(eX).find(function(e){var t=document.getElementById(e.name);if(!t)return!1;var s=t.getBoundingClientRect();return(null==s?void 0:s.top)<window.innerHeight/2&&(null==s?void 0:s.top)>0||(null==s?void 0:s.bottom)>window.innerHeight/2});e&&eb(e.name),A||R(!0)};(0,c.useEffect)(function(){(0,_.x)(window.location.hash)||tb()},[]);var tN=function(e){var t=document.getElementById(e).getBoundingClientRect().top+window.pageYOffset-79;window.scrollTo({top:t,behavior:"smooth"})};(0,z.b)({onScroll:tb});var ty=!(0,D.t)(H.eM.MARKETABLE,v),tw=(0,K.R)({modalId:"spec-modal"}),tI=tw.isOpen,tC=tw.onClose,tS=tw.onOpen,tP=function(e){return function(){eS(e),tS()}};return(0,o.jsxs)("div",{style:{paddingTop:T,userSelect:"none"},children:[(0,o.jsxs)("div",{className:"w-full fixed top-0 left-0 z-3 bg-white",ref:S,children:[(0,o.jsx)(s$,{isShipmentRestricted:eO,onTabClick:tN,activeTab:eu,tabs:eX,className:(0,es.d)("transition-all w-full top-12",{"border-complete-b-200":ea}),style:{transition:"0.1s",opacity:ea?"1":"0",pointerEvents:ea?"auto":"none"}}),(0,o.jsx)(nU,{className:(0,es.d)("px-2 py-1 w-full bg-white z-2"),rightElements:tj.rightElements,leftElements:tj.leftElements}),(0,o.jsx)(nu,{onCloseSearchModal:tv,isShowingSearchModal:tf})]}),(0,o.jsxs)("div",{ref:P,id:"gallery",className:"fixed w-full top-12 left-0 z-1",children:[(0,o.jsx)(eR,{breadcrumbs:e7,className:"pt-0.5 pb-1.5 bg-white"}),(0,o.jsx)(sL,{className:"bg-neutral-100 max-h-screen h-screen",hasRequestedForComments:ey,updateCommentsRequested:function(){ew(!0)},product:i})]}),(0,o.jsxs)("div",{id:"content",className:"z-2 relative bg-white border-complete-t rounded-t-lg overflow-hidden pb-3",children:[(0,o.jsxs)("section",{id:"SPEC",children:[(0,o.jsx)(sU,{className:"-mb-2",defaultVariantItem:e9}),(0,o.jsxs)("div",{className:"bg-white rounded-t-lg relative z-3 overflow-hidden",children:[!(0,_.x)(null==eT?void 0:eT.background)&&(0,o.jsx)("div",{className:"w-full",children:(0,o.jsx)(F.E,{src:null==eT?void 0:eT.background})}),(0,o.jsx)(eg.H,{voucherBanner:e_}),(0,o.jsxs)("div",{className:"flex justify-between px-4 pt-4 gap-4",children:[(0,o.jsx)(eR,{isBrand:!0,product:i}),(0,o.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,o.jsx)(eM,{productTitle:null==i?void 0:i.productTitle,productId:g}),(0,o.jsx)(eP,{userReactions:ez,productId:g})]})]})]}),(0,o.jsx)(ia,{bigDataTrackerData:a,onCommentsClick:function(){R(!0),setTimeout(function(){return tN("COMMENTS")},300)},onQuestionsClick:function(){R(!0),setTimeout(function(){return tN("QUESTIONS")},300)},className:"mt-3 mb-4 px-4",product:i}),(tt===Q.L.AUDIO||tt===Q.L.EPUB)&&(0,o.jsx)(se,{product:i}),!ty&&((0,I.d)(x.X.AB_TEST_SHIPPING_TRANSPARENCY)?(0,o.jsx)(t2,{className:"mb-5",defaultVariantItem:e9}):(0,o.jsx)(t0,{product:i,className:"mb-5",defaultVariantItem:e9})),!ty&&(0,o.jsx)(nZ.x,{product:i,defaultVariantItem:e9,setDefaultVariantItem:te,groupBySize:e4,groupByColor:e6}),(0,o.jsx)(nT,{product:i,handleActiveSpecModal:tP(2)}),!(0,_.x)(ti)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s4.D,{isSmall:!0}),(0,o.jsx)(sQ,{isInsuranceModalOpen:eF,onInsuranceModalClose:eU,onInsuranceModalOpen:eZ,className:"px-4",defaultVariant:e9})]}),!(0,_.x)(h)&&(0,I.d)("DK_SERVICE_TOUCH_POINT")&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s4.D,{isSmall:!0}),(0,o.jsx)(ep,{isDkServiceModalOpen:eJ,onDkServiceModalClose:eQ,onDkServiceModalOpen:eH,className:"px-4",defaultVariant:e9,dkService:h})]}),!ty&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s4.D,{}),(0,o.jsx)(n_,{setDefaultVariantItem:te,groupBySize:e4,groupByColor:e6,lowestPrice:tc,sellers:(0,V.Z)(e8),product:i,defaultVariant:e9})]}),(null==p?void 0:p.title)&&(0,o.jsx)("div",{children:(0,o.jsx)(ex.Q,{dynamicCarouselData:p})}),A&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nF,{touchPoints:n,product:i,defaultVariantItem:e9,pdpPromotionBanner:l}),(0,o.jsx)(s4.D,{}),(0,o.jsx)(ns,{className:"px-4",product:i})]})]}),!A&&(0,o.jsx)("div",{className:"min-h-[500px]"}),A&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("section",{id:"REVIEW",children:[(0,o.jsx)(s4.D,{}),((0,_.x)(j)||et.s)&&(0,o.jsx)(i5,{product:i,handleActiveSpecModal:tP(0)}),!(0,_.x)(j)&&(0,o.jsx)(t6,{product:i,handleActiveSpecModal:tP(1)}),(0,o.jsx)(s4.D,{isSmall:!0}),(0,o.jsx)(nR,{product:i,handleActiveSpecModal:tP(2)})]}),(0,o.jsxs)("section",{id:"COMMENTS",children:[(0,o.jsx)(s4.D,{}),(0,o.jsx)(tZ,{sectionClassName:"relative overflow-hidden",product:i}),(0,o.jsxs)("section",{id:"QUESTIONS",children:[(0,o.jsx)(s4.D,{}),(0,o.jsx)(iG,{product:i})]}),!(0,_.x)(u)&&(0,o.jsxs)("section",{id:"MAGNET",children:[(0,o.jsx)(s4.D,{}),(0,o.jsx)(sG,{magnetPosts:u})]})]}),!(0,_.x)(eW)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s4.D,{}),(0,o.jsx)(tK,{bigDataTrackerData:a,product:i,carouselData:{miniCpcProduct:eW,showCpcCarousel:e$,cpcTitle:eK,cpcProducts:eY}})]}),(0,o.jsxs)("section",{id:"SUGGESTION",className:"min-h-screen",children:[(0,o.jsx)(s4.D,{}),(0,o.jsx)(U.Z,{children:(0,o.jsx)(i2,{productId:g})})]}),(0,o.jsxs)("section",{className:(0,es.d)("pb-18",{"pb-35":(null==tc?void 0:tc.productVariantPriceSellingPrice)>0&&tl-tc.productVariantPriceSellingPrice>0&&!ty&&!(0,_.x)((0,V.Z)(to).concat((0,V.Z)(y))),"pb-23":(null==tc?void 0:tc.productVariantPriceSellingPrice)>0&&tl-tc.productVariantPriceSellingPrice>0&&(0,_.x)((0,V.Z)(to).concat((0,V.Z)(y))),"pb-25":!ty&&!(0,_.x)((0,V.Z)(to).concat((0,V.Z)(y)))&&!((null==tc?void 0:tc.productVariantPriceSellingPrice)>0&&tl-tc.productVariantPriceSellingPrice>0)}),id:"DKP",children:[(0,o.jsx)(s4.D,{}),(0,o.jsx)(t3,{productID:g})]})]})]}),(0,o.jsx)(nD,{isOpen:tI,onClose:tC,activeTabIndex:eC,handleActiveSpecModal:function(e){return function(){eS(e)}},content:(0,o.jsx)(nA,{activeIndex:eC,product:i}),tabs:(t=[],(0,_.x)(null==b?void 0:b.productDescription)||t.push({title:"معرفی کالا",id:0}),(0,_.x)(j)||t.push({title:"بررسی تخصصی",id:1}),(0,_.x)(w)||t.push({title:"جدول مشخصات",id:2}),t)}),(0,o.jsx)(sk,{isNotMarketable:ty,lowestPrice:tc,showFomoBadges:ea&&!ty,productNewBadges:y,isInsuranceActive:!(0,_.x)(e9.variantInsurance),insuranceSellingPrice:null==e9?void 0:null===(s=e9.variantInsurance)||void 0===s?void 0:s.insuranceSellingPrice,onInsuranceModalOpen:eZ,defaultVariant:e9,productId:g,setShowCartTooltip:eA,dkServiceIds:[eD]})]})}var nJ=(0,C.D)({component:function(e){var t,s,i,n,a=e.ssrData,u=(0,m.useRouter)(),C=u.isReady,M=u.query.productParams,O=(0,d.I0)(),E=(0,T.V)(null==M?void 0:M[0]);(0,c.useEffect)(function(){C&&O((0,w.FG)(E))},[C]),(0,c.useEffect)(function(){g.a4.reset()},[]),(0,c.useEffect)(function(){var e,t,s;b.k.setProduct(null===(e=null==a?void 0:a[0])||void 0===e?void 0:e.product),j.u.setProduct(null===(t=null==a?void 0:a[0])||void 0===t?void 0:t.product),(0,_.x)(a)||g.a4.setProduct(null===(s=null==a?void 0:a[0])||void 0===s?void 0:s.product).sendEvent()},[a]);var V=(null==a?void 0:a[0])||{},z=V.product,B=V.touchPoints,L=V.relatedProducts,F=V.pdpPromotionBanner,U=V.alsoBoughtProducts,Z=V.bigDataTrackerData,q=V.shippingFeePromotion,J=V.recommendationsData,Q=V.dynamicCarousel,H=V.dkService,G=(0,N.e)(Z),$=(0,d.v9)(y.b.isPendingInit),K=(0,c.useMemo)(function(){return!$&&(0,I.d)(x.X.AB_TEST_BUY_BOX_WINNER)&&(null==z?void 0:z.productSecondDefaultVariant)?(0,l.Z)((0,r.Z)({},z),{productDefaultVariant:null==z?void 0:z.productSecondDefaultVariant}):z},[$,z]),Y=(0,v.C)().isDesktop;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p(),{children:E&&(0,o.jsx)("link",{rel:"alternate",href:(0,h.AM)({productId:String(E)})})}),(null==K?void 0:K.productIsInactive)?(0,o.jsx)(A.R,{relatedProducts:L,alsoBoughtProducts:U,bigDataTrackerData:(0,I.d)(x.X.BIGDATA_TRACKER_RECTIFIED_KEYS)?Z:G}):(s=(t=K||{}).productType,i=t.productIsInactive,n=(0,D.t)(s,f.f.DK_ELECTRONIC_GIFT_CARD),K?Y||(0,S.$i)()||(0,k.J)()||i||n||(0,P.Y)()?(0,o.jsx)(R.n,{magnetPosts:null==a?void 0:a[1],product:K,pdpPromotionBanner:F,touchPoints:B,dynamicCarousel:Q,dkService:H,alsoBoughtProducts:U,relatedProducts:L,recommendationsData:J,productId:E,bigDataTrackerData:(0,I.d)(x.X.BIGDATA_TRACKER_RECTIFIED_KEYS)?G:Z,shippingFeePromotion:q}):(0,o.jsx)(nq,{bigDataTrackerData:(0,I.d)(x.X.BIGDATA_TRACKER_RECTIFIED_KEYS)?Z:G,magnetPosts:null==a?void 0:a[1],product:K,touchPoints:B,dynamicCarousel:Q,pdpPromotionBanner:F,shippingFeePromotion:q,dkService:H}):null)]})},getAPIMethods:function(e){var t=e.query.productParams,s=(0,T.V)(null==t?void 0:t[0]);return[{apiMethod:O.c,apiData:{productId:s}},{apiMethod:M.g,apiData:{productId:s}}]},layoutProps:{showDigiplusSubscriptionRenewal:!0,desktopContentWidth:"4xl",chatKey:"pdp",noContentPadding:!0,contentTopPadding:16,hasBottomNav:!1,hasMobileHeader:!1}})},2562:function(e){e.exports={pdpCommentSectionThumbnailItem:"styles_pdpCommentSectionThumbnailItem__Z_eoX"}},19297:function(e){e.exports={PdpCommentSectionDesktopThumbnail__item:"styles_PdpCommentSectionDesktopThumbnail__item__fWha4",PdpCommentSectionDesktopThumbnail__summaryDesktop:"styles_PdpCommentSectionDesktopThumbnail__summaryDesktop__NgPc6"}},45264:function(e){e.exports={mediaSlideItem:"styles_mediaSlideItem__SFJHK"}},98996:function(e){e.exports={PdpCommentSectionModal__addCommentWrapper:"styles_PdpCommentSectionModal__addCommentWrapper___6SGc",PdpCommentSectionModal__addCommentButton:"styles_PdpCommentSectionModal__addCommentButton__dIn21",PdpCommentSectionModal__slideItem:"styles_PdpCommentSectionModal__slideItem__jcf1k"}},68471:function(e){e.exports={Carousel__card:"styles_Carousel__card__aMCCk",Carousel__aiBadge:"styles_Carousel__aiBadge__ZKUC4"}},85560:function(e){e.exports={"PdpCommentContentFooter__purchasedItem--color":"styles_PdpCommentContentFooter__purchasedItem--color__WaeYS"}},91624:function(e){e.exports={DeliveryState:"styles_DeliveryState__1eVx4",DeliveryDigikala:"styles_DeliveryDigikala__CHLMc",DeliverySeller:"styles_DeliverySeller__Vz_jL",DeliveryDigikalaAndSeller:"styles_DeliveryDigikalaAndSeller__etl9O",DeliverySellerAndDigikala:"styles_DeliverySellerAndDigikala__f7LEc"}},86329:function(e){e.exports={Fidibo__ProgressBar:"styles_Fidibo__ProgressBar__KRQpe"}},5556:function(e){e.exports={Gallery__showMoreBG:"styles_Gallery__showMoreBG__08mVl"}},84127:function(e){e.exports={ProductInfo__expandButton:"styles_ProductInfo__expandButton__apubr",ProductInfo__notMarketable:"styles_ProductInfo__notMarketable__y_Jiv",ProductInfo__summeryBadge:"styles_ProductInfo__summeryBadge__PZS8O"}},88519:function(e){e.exports={PdpQuestionAnswerDetailModalMediaSlider__thumbnail:"styles_PdpQuestionAnswerDetailModalMediaSlider__thumbnail__ikM_V","PdpQuestionAnswerDetailModalMediaSlider__thumbnail--selected":"styles_PdpQuestionAnswerDetailModalMediaSlider__thumbnail--selected__V7EYJ"}},97973:function(e){e.exports={PdpQuestionAnswerDetailModal__desktopSlider:"styles_PdpQuestionAnswerDetailModal__desktopSlider__QiW_c"}},15689:function(e){e.exports={extra_answer_card:"styles_extra_answer_card__hNpiQ"}},47313:function(e){e.exports={PdpQuestionSectionDesktopContent__input:"styles_PdpQuestionSectionDesktopContent__input__G5FGR"}},6712:function(e){e.exports={PdpQuestionSectionMobileModal__questionBox:"styles_PdpQuestionSectionMobileModal__questionBox__59zdK",PdpQuestionSectionMobileModal__addQuestion:"styles_PdpQuestionSectionMobileModal__addQuestion__Mdsqi"}},11494:function(e){e.exports={ProductList__pagesContainer:"styles_ProductList__pagesContainer__kTouP",ProductList__item:"styles_ProductList__item__Cl1OB","ProductList__pagesContainer--withoutSidebar":"styles_ProductList__pagesContainer--withoutSidebar__sDsrQ",ProductList__navbar__hidden:"styles_ProductList__navbar__hidden__NreLn"}},92499:function(e){e.exports={SearchInput:"styles_SearchInput__rFjnc"}},58389:function(e){e.exports={sellerCard:"styles_sellerCard__ZUIYK",changeBg:"styles_changeBg__ICjfD",sellerCard__lowestPrice:"styles_sellerCard__lowestPrice__FLz1S"}},53018:function(e){e.exports={InsuranceModal__buttons:"insurance-modal_InsuranceModal__buttons__QH9Hg"}}}]);