(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[633],{1026:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/plus/landing",function(){return t(9223)}])},27534:function(e,n,t){"use strict";t.d(n,{M:function(){return s}});var i=t(11259),r=t(12978),a=t(95542),s=(0,t(1324).q)({url:"/digiplus/",transformer:function(e){var n,t,s,o,u,l=e.data||{},d=l.can_buy_subscription,c=l.cta_sentence,p=l.faq,f=l.plans,g=l.user,v=l.subscription;return{digiplusCanBuySubscription:!!d,digiplusPrimaryButtonText:c,digiplusFaqs:null==p?void 0:null===(n=p.map)||void 0===n?void 0:n.call(p,function(e){return(0,a.K)({data:e})}),digiplusPlans:null==f?void 0:null===(t=f.map)||void 0===t?void 0:t.call(f,function(e){return(0,r.G)({data:e})}),digiplusSubscription:(0,i.O)({data:v}),digiplusUser:{userFirstName:(o=(s=g||{}).first_name)||"",userLastName:(u=s.last_name)||"",userName:o?"".concat(o||""," ").concat(u||""):""}}},isPageGetRequest:!0})},9223:function(e,n,t){"use strict";t.r(n),t.d(n,{__getServerSideProps:function(){return N},default:function(){return k}});var i=t(40171),r=t(66383),a=t(52322),s=t(2784),o=t(25237),u=t.n(o),l=t(97729),d=t.n(l),c=t(4541),p=t(64665),f=t(88413),g=t(26442),v=t(64177),_=t(80803),m=t(8830),h=t(42080),S=t(27314),P=t(87049),b=t(8155),y=t(6013),D=t(42306),I=t(4818),E=t(41435),C=t(98661),R=t(27534),T=u()(function(){return t.e(2889).then(t.bind(t,12791)).then(function(e){return e.DigiplusSubscriptionModal})},{loadableGenerated:{webpack:function(){return[12791]}},ssr:!1}),k=(0,I.D)({component:function(e){var n=e.ssrData,t=e.pending,i=(0,_.d)(),o=i.isOpen,u=i.onOpen,l=i.onClose,I=(0,h.e)({isOpen:o}).zIndex,R=(0,m.R)({modalId:"plus-subscription-modal"}),k=R.isOpen,N=R.onOpen,A=R.onClose,q=(0,S.e)().redirect,M=(0,r.Z)((0,s.useState)(),2),O=M[0],x=M[1],F=(n||{}).digiplusPlans,w=(0,P.v)(y.p.isLoggedIn),L=(0,P.v)(y.p.digiplusData).digiplusIsActivated,V=(0,v.C)(),j=V.isDesktop,Z=V.windowWidth;(0,s.useEffect)(function(){(0,E.x)(F)||x(null==F?void 0:F.find(function(e){return null==e?void 0:e.planIsSelected}))},[F]);var G=function(e){(0,b.d0)({clickedItemName:e,widgetName:f.Jy})},U=function(e){return function(){x(e)}},W=function(){q({url:g.iV})},B=function(){G("kyc button"),q({url:g.s8})},J=function(e){G(e),N()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{children:(0,a.jsx)("title",{children:(0,C.t)({title:"پلاس",suffix:"خدمات ویژه کاربران دیجی‌کالا"})})}),(0,D.d)(p.X.PLUS_JET)?(0,a.jsx)(c.LandingPageV2,{data:n,isPlusUser:L,onOpenSubscriptionModal:J,onGoToProfile:W,onGoToKYC:B,isDesktop:j,isPending:t,isLoggedIn:!!w,onSelectPlan:U,selectedPlan:O,isOpenPerkModal:o,onOpenPerkModal:u,onClosePerkModal:l,zIndex:I,windowWidth:Z}):(0,a.jsx)(c.LandingPage,{data:n,isPlusUser:L,onOpenSubscriptionModal:J,onGoToProfile:W,onGoToKYC:B,isDesktop:j,isPending:t,isLoggedIn:!!w,onSelectPlan:U,selectedPlan:O,isOpenPerkModal:o,onOpenPerkModal:u,onClosePerkModal:l,zIndex:I,windowWidth:Z}),(0,a.jsx)(T,{defaultSelectedPlan:O,isOpenModal:k,onCloseModal:A})]})},getAPIMethods:function(){return[{apiMethod:R.M}]},layoutProps:{chatKey:"digiplus",noContentPadding:!0,desktopFullWidth:!0},noDefaultLoader:!0}),N=(0,i.I)({getSSRMethods:k.getAPIMethods})},53430:function(e,n,t){"use strict";t.d(n,{Sm:function(){return i},VW:function(){return r},fr:function(){return a}});var i={ACTIVE:"ACTIVE",PENDING:"PENDING",INACTIVE:"INACTIVE"},r={ACTIVE:"ACTIVE",ENDED:"ENDED",RESERVED:"RESERVED"},a={PREVIOUS:"previous",CURRENT:"current"}},12978:function(e,n,t){"use strict";function i(e){var n,t,i=e.data||{},r=i.id,a=i.title,s=i.subtitle,o=i.description,u=i.number_of_days,l=i.price,d=i.status,c=i.discount,p=i.discount_percent,f=i.new_user_discount,g=i.new_user_discount_percent,v=i.price_per_month,_=i.partner,m=i.cro_id,h=i.icon,S=i.total_payable_price,P=i.active_direct_debit,b=i.direct_debit_discount_description,y=i.free_shipment_count,D=i.fresh_free_shipment_count,I=i.jet_free_shipment_count,E=i.message,C=i.selected,R=i.recommended,T=i.plan_type;return{planId:r,planCROId:m,planTitle:a,planSubTitle:s,planDescription:o,planBadge:{badgeTitle:(n=({data:i.badge}).data||{}).title,badgeIcon:n.icon},planNumberOfDays:u,planPrice:l,planStatus:d,planDiscount:c,planDiscountPercent:p,planNewUserDiscount:f,planNewUserDiscountPercent:g,planPartner:_,planIcon:h,planTotalPayablePrice:S,planActiveDirectDebit:P,planDirectDebitDiscountDescription:b,planPricePerMonth:v,planFreeShipmentCount:y,planFreshFreeShipmentCount:D,planJetFreeShipmentCount:I,planMessage:{planMessageTitle:(t=E||{}).title,planMessageDescription:t.description,planMessageHideKYCButton:t.hide_kyc_btn,planMessageType:t.type},planIsSelected:C,planIsRecommended:R,planType:T}}t.d(n,{G:function(){return i}})},11259:function(e,n,t){"use strict";t.d(n,{O:function(){return l},x:function(){return u}});var i=t(53430),r=t(41435),a=t(12978),s=t(79968),o={active:i.VW.ACTIVE,ended:i.VW.ENDED,reserved:i.VW.RESERVED};function u(e){var n=e.data||{},t=n.id,i=n.plan_id,r=n.title,a=n.status,s=n.base_free_shipment,o=n.end_date,u=n.payed_price,l=n.purchased_date,d=n.invoice_url;return{digiplusDeliveryPackageId:t,digiplusDeliveryPackagePlanId:i,digiplusDeliveryPackageTitle:r,digiplusDeliveryPackageStatus:a,digiplusDeliveryPackageBaseFreeShipment:s,digiplusDeliveryPackageRemainingFreeShipment:n.remaining_free_shipment,digiplusDeliveryPackagePayedPrice:u,digiplusDeliveryPackagePurchasedDate:l,digiplusDeliveryPackageInvoiceUrl:d,digiplusDeliveryPackageEndDate:o}}function l(e){var n,t,i=e.data||{},l=i.id,d=i.title,c=i.start_at,p=i.end_at,f=i.remaining_days,g=i.all_used_free_shipments,v=i.remaining_free_shipments,_=i.remaining_free_shipments_fresh,m=i.remaining_free_shipments_jet,h=i.free_shipment_count,S=i.fresh_free_shipment_count,P=i.jet_free_shipment_count,b=i.remaining_days_till_start,y=i.total_free_shipments,D=i.status,I=i.price,E=i.discount,C=i.cash_back_details,R=i.has_invoice,T=i.plan,k=i.purchased_packages;return{digiplusSubscriptionId:l,digiplusSubscriptionTitle:d,digiplusSubscriptionStartAt:c,digiplusSubscriptionEndAt:p,digiplusSubscriptionRemainingDays:f,digiplusSubscriptionAllUsedFreeShipments:g,digiplusSubscriptionRemainingFreeShipments:v,digiplusSubscriptionRemainingFreeShipmentsFresh:_,digiplusSubscriptionRemainingFreeShipmentsJet:m,digiplusSubscriptionRemainingFreeShipmentCount:h,digiplusSubscriptionRemainingFreshFreeShipmentCount:S,digiplusSubscriptionRemainingJetFreeShipmentCount:P,digiplusSubscriptionRemainingDaysTillStart:b,digiplusSubscriptionTotalFreeShipments:y,digiplusSubscriptionStatus:o[D],digiplusSubscriptionPlan:(0,a.G)({data:T}),digiplusSubscriptionPurchasedPackages:null==k?void 0:null===(n=k.map)||void 0===n?void 0:n.call(k,function(e){return u({data:e})}),digiplusSubscriptionPrice:I,digiplusSubscriptionDiscount:E,digiplusSubscriptionCashBack:{digiplusCashbackPaidAmount:(t=C||{}).paid,digiplusCashbackPendingAmount:t.pending,digiplusCashbackTotalAmount:t.total},digiplusSubscriptionHasInvoice:!(0,r.x)(R),digiplusSubscriptionInvoiceLink:(0,s.f)({data:R})}}},95542:function(e,n,t){"use strict";t.d(n,{K:function(){return u}});var i=t(70865),r=t(64248),a=t(70582),s=t(79968),o=t(75743);function u(e){var n,t=e.data,u=e.prefix,l=t||{},d=l.id,c=l.title,p=l.see_more_url,f=l.icon,g=l.questions,v=(0,a.W)({data:f,prefix:"faqIcon"});return(0,r.Y)((0,i.Z)({faqIcon:(0,a.W)({data:f}),faqId:d,faqTitle:c,faqSeeMoreUrl:(0,s.f)({data:p}),faqQuestions:(null==g?void 0:null===(n=g.map)||void 0===n?void 0:n.call(g,function(e){return(0,o.Q)({data:e})}))||[]},v),{prefix:u})}},4818:function(e,n,t){"use strict";t.d(n,{D:function(){return f}});var i=t(70865),r=t(52322),a=t(64665),s=t(2784),o=t(5632),u={};function l(e){var n=u[e];void 0!==n&&window.scrollTo(0,n)}var d=t(42306),c=t(98324),p=t.n(c);function f(e){var n=e.component,t=e.getAPIMethods,c=e.layoutProps,f=e.isPrivate,g=e.noDefaultLoader,v=e.pageActivatorFeature,_=e.redirectIfLogin,m=e.afterLogin,h=e.disableSSR,S=e.dataProps,P=e.saveScrollPosition,b=void 0!==P&&P,y=function(e){return(!function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=(0,o.useRouter)(),t=n.pathname;(0,s.useEffect)(function(){if(e){var i=function(){u[t]=window.scrollY},r=function(){setTimeout(function(){l(t)},0)};n.events.on("routeChangeStart",i),n.events.on("routeChangeComplete",r);var a=setTimeout(function(){l(t)},1e3);return function(){clearTimeout(a),n.events.off("routeChangeStart",i),n.events.off("routeChangeComplete",r)}}},[t,n,e])}(b),(0,d.d)(a.X.LITE_PAGE_ANIMATION))?(0,r.jsx)("div",{className:p().container,children:(0,r.jsx)(n,(0,i.Z)({},e))}):(0,r.jsx)(n,(0,i.Z)({},e))};return y.getAPIMethods=t,y.layoutProps=c,y.isPrivate=f,y.noDefaultLoader=g,y.pageActivatorFeature=v,y.redirectIfLogin=_,y.afterLogin=m,y.disableSSR=h,y.dataProps=S,y.saveScrollPosition=b,y}},40171:function(e,n,t){"use strict";t.d(n,{I:function(){return m}});var i=t(98788),r=t(70865),a=t(96670),s=t(22970),o=t(66582),u=t(89469),l=t(4547),d=t(79968),c=t(42306),p=t(41435),f=t(29890),g=t(74740),v=t(50020);function _(){return(_=(0,i.Z)(function(e){var n,t,i,a,o,c,f,_,m,h,S,P,b,y,D,I,E,C,R,T;return(0,s.__generator)(this,function(s){switch(s.label){case 0:if(n=e.getSSRMethods,t=e.query,i=e.queryParams,a=e.queryProps,o=e.renderAgent,f=(null==(c=(null==n?void 0:n({query:t,renderAgent:o}))||[])?void 0:c.length)>1?[]:{},_=null,u.ON)return[2,Promise.resolve({ssrData:f,queryData:_})];s.label=1;case 1:if(s.trys.push([1,8,,9]),(0,v.k)(a))return[3,3];return[4,null===(h=(m=(0,g.m)(a)?a({query:i}):a).apiMethod)||void 0===h?void 0:h.call(m,(0,r.Z)({},(0,g.m)(a.urlParamsTransformer)?a.urlParamsTransformer(t):t,(0,g.m)(a.apiData)?a.apiData((0,r.Z)({},i)):a.apiData),{queryParams:i})];case 2:_=s.sent(),s.label=3;case 3:if((0,p.x)(c))return[2,{ssrData:f,queryData:_}];if((null==c?void 0:c.length)!==1)return[3,5];return[4,(S=null==c?void 0:c[0]).apiMethod(S.apiData,{queryParams:i})];case 4:return f=s.sent(),[3,7];case 5:return[4,Promise.all(c.map(function(e){return(0,e.apiMethod)(e.apiData,{queryParams:i})}))];case 6:f=s.sent(),s.label=7;case 7:return[2,{ssrData:f,queryData:_}];case 8:return E=(null==(P=s.sent())?void 0:null===(b=P.data)||void 0===b?void 0:b.status)?null==P?void 0:null===(y=P.data)||void 0===y?void 0:y.status:(null==P?void 0:P.status)?null==P?void 0:P.status:500,C=(null==P?void 0:null===(D=P.data)||void 0===D?void 0:D.status)===301?(0,d.f)({data:null==P?void 0:null===(I=P.data)||void 0===I?void 0:I.redirect_url}):"",500===E&&(console.log("EXCEPTION-PREFETCH",P),(0,l.g)("API-500-ERROR",{endpoints:null==c?void 0:null===(R=c.map)||void 0===R?void 0:R.call(c,function(e){return null==e?void 0:e.url}),status:E,dataStatus:null==P?void 0:null===(T=P.data)||void 0===T?void 0:T.status,reqStatus:null==P?void 0:P.status})),404===E&&(0,l.g)("API 404!"),[2,Promise.resolve({ssrData:f,queryData:_,statusCode:E,redirectUrl:C})];case 9:return[2]}})})).apply(this,arguments)}var m=function(e){var n,t=e.getSSRMethods,l=e.pageActivatorFeature,d=e.queryProps,p=e.callback;return u.ON?void 0:(n=(0,i.Z)(function(e){var n,i,u,g,v,m,h,S,P,b,y,D,I;return(0,s.__generator)(this,function(s){switch(s.label){case 0:if(u={renderAgent:function(){var n,t,i;try{return(0,o.bG)(null===(t=e.req.headers)||void 0===t?void 0:t["user-agent"]).isMobile?"mobile":"desktop"}catch(r){console.log("ERROR user-agent:",null===(i=e.req.headers)||void 0===i?void 0:i["user-agent"],r)}return(null===(n=e.req.headers)||void 0===n?void 0:n["x-render-agent"])||"desktop"}()},e.res.setHeader("Cache-Control","public, max-age=".concat(21600)),l&&!(0,c.d)(l))return[2,{notFound:!0,props:{SSR_INTERNALS:u}}];g=null===(n=Object.keys(e.query||{}))||void 0===n?void 0:null===(i=n.filter)||void 0===i?void 0:i.call(n,function(n){var t;return!(null===(t=e.params)||void 0===t?void 0:t[n])}),v={},m=!0,h=!1,S=void 0;try{for(P=g[Symbol.iterator]();!(m=(b=P.next()).done);m=!0)v[y=b.value]=e.query[y]}catch(E){h=!0,S=E}finally{try{m||null==P.return||P.return()}finally{if(h)throw S}}if(!t&&!d)return[2,{props:{SSR_INTERNALS:u}}];return[4,function(e){return _.apply(this,arguments)}({getSSRMethods:t,renderAgent:u.renderAgent,queryProps:d,query:e.query,queryParams:v,pathname:e.path})];case 1:if(404===(D=s.sent()).statusCode)return[2,{notFound:!0,props:{SSR_INTERNALS:u}}];if(301===D.statusCode)return[2,{redirect:{destination:D.redirectUrl,permanent:!0},props:{SSR_INTERNALS:u}}];if(D.statusCode&&(e.res.statusCode=D.statusCode||200),I=null==p?void 0:p({props:D,query:e.query,params:e.params,queryParams:v}))return[2,(0,a.Z)((0,r.Z)({},I),{props:(0,a.Z)((0,r.Z)({},I.props||{}),{SSR_INTERNALS:u})})];return[2,{props:(0,a.Z)((0,r.Z)({},function e(n){if((0,f.k)(n)){var t=[];return n.forEach(function(n,i){void 0!==n&&(n===Object(n)?t[i]=e(n):t[i]=n)}),t}var i={};return Object.keys(n).forEach(function(t){var r=n[t];void 0!==r&&(r===Object(r)?i[t]=e(r):i[t]=r)}),i}(D)),{SSR_INTERNALS:u})}]}})}),function(e){return n.apply(this,arguments)})}},98661:function(e,n,t){"use strict";function i(e){var n=e.title,t=void 0===n?"":n,i=e.suffix,r=void 0===i?"":i,a=e.prefix,s=void 0===a?"":a;return"".concat(s?"".concat(s," - "):"","دیجی‌کالا").concat(t?" - ".concat(t):"").concat(r?" - ".concat(r):"")}t.d(n,{t:function(){return i}})},98324:function(e){e.exports={container:"styles_container__TOHrJ","fade-out":"styles_fade-out__Z1zNL"}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=1026)}),_N_E=e.O()}]);