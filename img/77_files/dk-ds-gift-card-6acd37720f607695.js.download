(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7071],{20414:function(t,r,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/main/dk-ds-gift-card",function(){return e(42318)}])},11390:function(t,r,e){"use strict";e.d(r,{u:function(){return s}});var n=e(82075),a=e(8398),o=e(1324),u=e(62069),i=e(56632),s=(0,o.q)({url:function(t){var r=t.categoryCode;return"/dynamic-category-page/".concat("".concat(r).replace("category-",""),"/")},transformer:function(t){var r=t.data;return(0,n.r)({data:r,isDynamicCategory:!0})},inputTransformer:(0,i.c_)(a.d,u.D),isPageGetRequest:!0})},48060:function(t,r,e){"use strict";e.d(r,{k:function(){return u}});var n=e(52322),a=e(15973),o=e(19587);function u(t){var r=t.ssrData,e=t.pending,u=(0,o.K)({data:null==r?void 0:r.data,widgetProps:{}});return(0,n.jsx)(a.E,{data:u,pending:e})}},42318:function(t,r,e){"use strict";e.r(r),e.d(r,{__getServerSideProps:function(){return c},default:function(){return l}});var n=e(40171),a=e(70865),o=e(52322),u=e(4818),i=e(11390),s=e(48060),d=(0,u.D)({component:function(t){return(0,o.jsx)(s.k,(0,a.Z)({},t))},getAPIMethods:function(){return[{apiMethod:i.u,apiData:{categoryCode:"category-giftcard"}}]},layoutProps:function(){return{chatKey:"search",noContentPadding:!0,desktopFullWidth:!0,desktopContentWidth:null}},noDefaultLoader:!0}),l=d,c=(0,n.I)({getSSRMethods:d.getAPIMethods,queryProps:d.dataProps})},4818:function(t,r,e){"use strict";e.d(r,{D:function(){return v}});var n=e(70865),a=e(52322),o=e(64665),u=e(2784),i=e(5632),s={};function d(t){var r=s[t];void 0!==r&&window.scrollTo(0,r)}var l=e(42306),c=e(98324),f=e.n(c);function v(t){var r=t.component,e=t.getAPIMethods,c=t.layoutProps,v=t.isPrivate,p=t.noDefaultLoader,y=t.pageActivatorFeature,g=t.redirectIfLogin,h=t.afterLogin,S=t.disableSSR,m=t.dataProps,P=t.saveScrollPosition,_=void 0!==P&&P,q=function(t){return(!function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],r=(0,i.useRouter)(),e=r.pathname;(0,u.useEffect)(function(){if(t){var n=function(){s[e]=window.scrollY},a=function(){setTimeout(function(){d(e)},0)};r.events.on("routeChangeStart",n),r.events.on("routeChangeComplete",a);var o=setTimeout(function(){d(e)},1e3);return function(){clearTimeout(o),r.events.off("routeChangeStart",n),r.events.off("routeChangeComplete",a)}}},[e,r,t])}(_),(0,l.d)(o.X.LITE_PAGE_ANIMATION))?(0,a.jsx)("div",{className:f().container,children:(0,a.jsx)(r,(0,n.Z)({},t))}):(0,a.jsx)(r,(0,n.Z)({},t))};return q.getAPIMethods=e,q.layoutProps=c,q.isPrivate=v,q.noDefaultLoader=p,q.pageActivatorFeature=y,q.redirectIfLogin=g,q.afterLogin=h,q.disableSSR=S,q.dataProps=m,q.saveScrollPosition=_,q}},62069:function(t,r,e){"use strict";e.d(r,{D:function(){return d}});var n=e(4547),a=e(89617),o=e(51071),u=e(83050),i=e(6013),s=e(79593);function d(){if(!s.s)try{var t=o.h.getState(),r=i.p.userCity(t),e=u.E.userDefaultCity(t),d=a.I.defaultCity(t);return(null==r?void 0:r.cityId)||(null==e?void 0:e.cityId)||(null==d?void 0:d.cityId)}catch(l){(0,n.g)("Failed to get current city ID",{error:l});return}}},40171:function(t,r,e){"use strict";e.d(r,{I:function(){return h}});var n=e(98788),a=e(70865),o=e(96670),u=e(22970),i=e(66582),s=e(89469),d=e(4547),l=e(79968),c=e(42306),f=e(41435),v=e(29890),p=e(74740),y=e(50020);function g(){return(g=(0,n.Z)(function(t){var r,e,n,o,i,c,v,g,h,S,m,P,_,q,R,C,I,D,N,E;return(0,u.__generator)(this,function(u){switch(u.label){case 0:if(r=t.getSSRMethods,e=t.query,n=t.queryParams,o=t.queryProps,i=t.renderAgent,v=(null==(c=(null==r?void 0:r({query:e,renderAgent:i}))||[])?void 0:c.length)>1?[]:{},g=null,s.ON)return[2,Promise.resolve({ssrData:v,queryData:g})];u.label=1;case 1:if(u.trys.push([1,8,,9]),(0,y.k)(o))return[3,3];return[4,null===(S=(h=(0,p.m)(o)?o({query:n}):o).apiMethod)||void 0===S?void 0:S.call(h,(0,a.Z)({},(0,p.m)(o.urlParamsTransformer)?o.urlParamsTransformer(e):e,(0,p.m)(o.apiData)?o.apiData((0,a.Z)({},n)):o.apiData),{queryParams:n})];case 2:g=u.sent(),u.label=3;case 3:if((0,f.x)(c))return[2,{ssrData:v,queryData:g}];if((null==c?void 0:c.length)!==1)return[3,5];return[4,(m=null==c?void 0:c[0]).apiMethod(m.apiData,{queryParams:n})];case 4:return v=u.sent(),[3,7];case 5:return[4,Promise.all(c.map(function(t){return(0,t.apiMethod)(t.apiData,{queryParams:n})}))];case 6:v=u.sent(),u.label=7;case 7:return[2,{ssrData:v,queryData:g}];case 8:return I=(null==(P=u.sent())?void 0:null===(_=P.data)||void 0===_?void 0:_.status)?null==P?void 0:null===(q=P.data)||void 0===q?void 0:q.status:(null==P?void 0:P.status)?null==P?void 0:P.status:500,D=(null==P?void 0:null===(R=P.data)||void 0===R?void 0:R.status)===301?(0,l.f)({data:null==P?void 0:null===(C=P.data)||void 0===C?void 0:C.redirect_url}):"",500===I&&(console.log("EXCEPTION-PREFETCH",P),(0,d.g)("API-500-ERROR",{endpoints:null==c?void 0:null===(N=c.map)||void 0===N?void 0:N.call(c,function(t){return null==t?void 0:t.url}),status:I,dataStatus:null==P?void 0:null===(E=P.data)||void 0===E?void 0:E.status,reqStatus:null==P?void 0:P.status})),404===I&&(0,d.g)("API 404!"),[2,Promise.resolve({ssrData:v,queryData:g,statusCode:I,redirectUrl:D})];case 9:return[2]}})})).apply(this,arguments)}var h=function(t){var r,e=t.getSSRMethods,d=t.pageActivatorFeature,l=t.queryProps,f=t.callback;return s.ON?void 0:(r=(0,n.Z)(function(t){var r,n,s,p,y,h,S,m,P,_,q,R,C;return(0,u.__generator)(this,function(u){switch(u.label){case 0:if(s={renderAgent:function(){var r,e,n;try{return(0,i.bG)(null===(e=t.req.headers)||void 0===e?void 0:e["user-agent"]).isMobile?"mobile":"desktop"}catch(a){console.log("ERROR user-agent:",null===(n=t.req.headers)||void 0===n?void 0:n["user-agent"],a)}return(null===(r=t.req.headers)||void 0===r?void 0:r["x-render-agent"])||"desktop"}()},t.res.setHeader("Cache-Control","public, max-age=".concat(21600)),d&&!(0,c.d)(d))return[2,{notFound:!0,props:{SSR_INTERNALS:s}}];p=null===(r=Object.keys(t.query||{}))||void 0===r?void 0:null===(n=r.filter)||void 0===n?void 0:n.call(r,function(r){var e;return!(null===(e=t.params)||void 0===e?void 0:e[r])}),y={},h=!0,S=!1,m=void 0;try{for(P=p[Symbol.iterator]();!(h=(_=P.next()).done);h=!0)y[q=_.value]=t.query[q]}catch(I){S=!0,m=I}finally{try{h||null==P.return||P.return()}finally{if(S)throw m}}if(!e&&!l)return[2,{props:{SSR_INTERNALS:s}}];return[4,function(t){return g.apply(this,arguments)}({getSSRMethods:e,renderAgent:s.renderAgent,queryProps:l,query:t.query,queryParams:y,pathname:t.path})];case 1:if(404===(R=u.sent()).statusCode)return[2,{notFound:!0,props:{SSR_INTERNALS:s}}];if(301===R.statusCode)return[2,{redirect:{destination:R.redirectUrl,permanent:!0},props:{SSR_INTERNALS:s}}];if(R.statusCode&&(t.res.statusCode=R.statusCode||200),C=null==f?void 0:f({props:R,query:t.query,params:t.params,queryParams:y}))return[2,(0,o.Z)((0,a.Z)({},C),{props:(0,o.Z)((0,a.Z)({},C.props||{}),{SSR_INTERNALS:s})})];return[2,{props:(0,o.Z)((0,a.Z)({},function t(r){if((0,v.k)(r)){var e=[];return r.forEach(function(r,n){void 0!==r&&(r===Object(r)?e[n]=t(r):e[n]=r)}),e}var n={};return Object.keys(r).forEach(function(e){var a=r[e];void 0!==a&&(a===Object(a)?n[e]=t(a):n[e]=a)}),n}(R)),{SSR_INTERNALS:s})}]}})}),function(t){return r.apply(this,arguments)})}},56632:function(t,r,e){"use strict";e.d(r,{c_:function(){return i}});var n=e(70865),a=e(68762),o=e.n(a),u=e(4547);function i(t,r){return function(e){var a=t?t(e):e;if(r)try{var i=r();if(i){var s,d=(s=function(t){if(!t)return"";var r={city_id:String(t)},e=JSON.stringify(r,Object.keys(r).sort());return o()(e).substring(0,12)}(i))?{_rch:s}:{};return(0,n.Z)({},a||{},d)}}catch(l){(0,u.g)("Failed to generate _rch parameter",{error:l,cityId:null==r?void 0:r()})}return a}}},98324:function(t){t.exports={container:"styles_container__TOHrJ","fade-out":"styles_fade-out__Z1zNL"}}},function(t){t.O(0,[2075,5517,9774,2888,179],function(){return t(t.s=20414)}),_N_E=t.O()}]);