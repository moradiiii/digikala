(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4164],{25203:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/incredible-offers-teasing",function(){return n(58824)}])},23680:function(e,t,n){"use strict";n.d(t,{$:function(){return T}});var r=n(47842),i=n(66383),s=n(52322),a=n(2784),o=n(43997),c=n(18577),d=n(40191),l=n(57931),u=n(86825),m=n(11559),p=n(64177),g=n(27314),f=n(6013),_=n(75490),x=n(32296),h="observe-list",v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;try{var t=localStorage.getItem(e)||"[]";return JSON.parse(t)}catch(n){return[]}},b=function(e){return v(h).includes(e)},y=function(e){var t=v(h);t.includes(e)||(t.push(e),localStorage.setItem(h,JSON.stringify(t)))},N=function(e){var t=v(h);t.includes(e)&&localStorage.setItem(h,JSON.stringify(t.filter(function(t){return t!==e})))},I=n(8693),C=n.n(I);function T(e){var t,n=e.productId,h=e.isForDealOfTheDay,v=(0,o.v9)(f.p.isLoggedIn),I=(0,g.e)().redirect,T=(0,i.Z)((0,a.useState)(!1),2),O=T[0],j=T[1],S=(0,p.C)().isDesktop,P=(0,m.E)({apiMethod:x.I,onSuccess:function(){y(n),j(!0),(0,_.p)({message:"اطلاع‌رسانی شگفت‌انگیز ثبت شد."})}}).request,w=(0,m.E)({apiMethod:d.K,onSuccess:function(){N(n),j(!1),(0,_.p)({message:"اطلاع‌رسانی شگفت‌انگیز حذف شد."})}}).request,D=function(e){e.preventDefault(),I({toLoginRegisterRoute:!0,withBackUrl:!0})},E=function(){b(n)?w({productId:n,type:u.l.ON_INCREDIBLE_OFFER}):P({productId:n,type:u.l.ON_INCREDIBLE_OFFER})};return O||b(n)?(0,s.jsx)(l.z,{size:S?"medium":"small",shape:"outlined",prependIcon:"notificationActiveOutline",iconColor:h?"white":(0,c.$l)("color-neutral-600"),className:(0,c.dh)(!h&&"mt-2",(t={},(0,r.Z)(t,C()["Observe__button--white"],h),(0,r.Z)(t,C()["Observe__button--black"],!h),t)),onClick:function(){w({productId:n,type:u.l.ON_INCREDIBLE_OFFER})},children:"دیگر خبرم نکن"}):(0,s.jsx)(l.z,{size:S?"medium":"small",shape:"outlined",prependIcon:"notificationOffOutline",iconColor:h?"white":"primary",color:h?"white":"primary",className:!h&&"mt-2",onClick:function(e){v?E():D(e)},children:"خبرم کن"})}},32296:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(45227),i=(0,n(1324).q)({type:r.XN.POST,url:function(e){var t=e.productId;return"product/".concat(t,"/observe/add/")},inputTransformer:function(e){var t=e.sendSms;return{send_email:e.sendEmail,send_sms:t,send_notification:e.sendNotification,type:e.type}}})},24360:function(e,t,n){"use strict";n.d(t,{e:function(){return d}});var r=n(70865),i=n(96670),s=n(50930),a=n(18577),o=n(8155),c=n(41435);function d(e){var t,n,d=e.response,l=e.params,u=e.identifier,m=e.cpcData,p=(0,r.Z)((0,i.Z)((0,r.Z)({},l||{}),{sort:(null==l?void 0:l.sort)?null==l?void 0:l.sort:null==d?void 0:null===(t=d.sort)||void 0===t?void 0:t.sortDefaultOptionId}),u(d));a.s$||(window.plpProductsData=(0,s.Z)(window.plpProductsData).concat((0,s.Z)((null==m?void 0:m.hasMobileSidebar)?[null==m?void 0:null===(n=m.cpcProducts)||void 0===n?void 0:n[0]]:[]),(0,s.Z)((0,c.x)(null==d?void 0:d.products)?[]:Object.values(d.products).map(function(e,t){var n;return(0,r.Z)({productPage:null==d?void 0:null===(n=d.pager)||void 0===n?void 0:n.pagerCurrentPage,productIndex:t},e)}))),window.plpData={data:d,identifiers:p}),(0,c.x)(d)||(0,o.Wp)(d,p,m)}},58824:function(e,t,n){"use strict";n.r(t),n.d(t,{__getServerSideProps:function(){return U},default:function(){return H}});var r=n(40171),i=n(52322),s=n(31909),a=n(2607),o=n(93723),c=n(94371),d=n(88413),l=n(46572),u=n(64177),m=n(55357),p=n(4818),g=n(41435),f=n(72677),_=n(24360),x=n(47842),h=n(45227),v=n(90917),b=n(92552),y=n(1324),N=n(12694),I=(0,y.q)({url:"/teasing-incredible/",transformer:function(e){var t,n=e.data||{},r=n.main_categories,i=n.timer,s=n.incredible_products_list;return{incredibleOffersTimer:i,incredibleOffersMainCategories:null==r?void 0:null===(t=r.map)||void 0===t?void 0:t.call(r,function(e){return(0,v.n)({data:e})}),incredibleOffersIncredibleProducts:(0,b.k)({data:s})}},inputTransformer:function(e){var t=e[h.Tx.CATEGORY_ID];return(0,N.s)((0,x.Z)({},h.Tx.CATEGORY_ID,t))},isPageGetRequest:!0}),C=(0,y.q)({url:"/teasing-incredible/products/",transformer:b.k}),T=n(70865),O=n(53795),j=n(23680);function S(e){var t=e.productId,n=JSON.parse(JSON.stringify(e));return delete n.productDefaultVariant.productVariantPriceTimer,(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(O._,(0,T.Z)({hideProductPriceBadges:!0,actionSlot:(0,i.jsx)(j.$,{productId:t}),canShowSoldPercentage:!0},n))})}var P=n(66383),w=n(5632),D=n.n(w),E=n(3005),R=n(1964),k=n(3336),M={timerText:"text-subtitle-strong text-neutral-800",timerSubText:"text-caption text-neutral-500",timerItem:"flex flex-col items-center justify-center bg-white w-7 h-7 rounded-sm",timer:"text-subtitle-strong text-neutral-800 text-center",container:"flex gap-1 items-center right-0 h-6"};function Z(e){var t=e.incredibleOffersTimer,n=(0,E.J)(R.k.getCurrentDateTime().getTime()+1e3*t,{},D().reload),r=n&&(0,k.H)(n)&&n.split(" : ")||[],s=(0,P.Z)(r||[],3),a=s[0],o=s[1],c=s[2];return(0,i.jsxs)("div",{className:M.container,children:[(0,i.jsx)("div",{className:M.timerItem,children:(0,i.jsx)("div",{className:M.timer,children:a})}),(0,i.jsx)("div",{className:M.timerText,children:":"}),(0,i.jsx)("div",{className:M.timerItem,children:(0,i.jsx)("div",{className:M.timer,children:o})}),(0,i.jsx)("div",{className:M.timerText,children:":"}),(0,i.jsx)("div",{className:M.timerItem,children:(0,i.jsx)("div",{className:M.timer,children:c})})]})}var A=n(97411),B=n(45756),F=n(82332),q=n(98723),L=n(10896),G=n(52380),J=n.n(G);function K(e){var t=e.category,n=e.isSelected,r=e.className,a=e.CROId,o=(0,w.useRouter)();return(0,i.jsxs)(q.r,{CROId:a,to:(0,L.K)({queries:(0,x.Z)({},h.Tx.CATEGORY_ID,t.categoryId),url:o.pathname}),className:(0,f.d)("h-full flex flex-col items-center py-2 cursor-pointer",{"bg-neutral-100 rounded-medium":n},r),children:[(0,i.jsx)(s.E,{image:t.categoryImage,imageClassName:J().Image,className:"mx-3 mb-2 rounded-circle"}),(0,i.jsx)("span",{className:(0,f.d)("text-center px-1 text-neutral-900",{"text-body-2":!n,"text-body2-strong":n}),children:t.categoryTitle})]})}var z=n(98713),W=n.n(z);function Y(e){var t=e.categories,n=e.className,r=(0,w.useRouter)(),s=(t.find(function(e){return(0,F.t)(e.categoryId,r.query[h.Tx.CATEGORY_ID])})||{}).categoryId;return(0,i.jsx)("div",{className:(0,f.d)("flex py-5",n),children:(0,i.jsx)(A.l,{sliderProps:{navButtonsCROId:B.h.AMAZING_ARROWS},items:t.map(function(e,t){return(0,i.jsx)(K,{CROId:"".concat(B.h.AMAZING_CIRCLE_BADGE).concat(t),category:e,isSelected:(0,F.t)(e.categoryId,s),className:(0,f.d)("mr-2",W().MainCategoryItem)},e.categoryId)}),className:"w-full"})})}var X=n(37412),$=n.n(X),V=(0,p.D)({component:function e(t){var n=t.ssrData,r=(0,u.C)().isDesktop,d=(0,l.L)({getSSRMethods:e.getAPIMethods,ssrData:n,shouldScrollOnChange:!1}).data||{},p=d.incredibleOffersMainCategories,_=d.productsDiscountStartTime,x=void 0===_?600:_,h=d.incredibleOffersTimer,v=(0,m.et)(),b=v.data,y=v.fetchNextPage,N=v.hasNextPage,I=v.items,C=v.pending,T=v.params,O=v.fetchPage,j=v.pageNumber,P=v.changeParams;return(0,i.jsxs)(i.Fragment,{children:[r?(0,i.jsx)(a.Z,{isStatic:!0,isDesktopStatic:!0,children:(0,i.jsx)("div",{className:(0,f.d)("relative text-center p-2",$().TeasingContainer),children:(0,i.jsxs)("div",{className:"relative inline-flex flex-col justify-center items-center p-4 gap-2 bg-white",children:[(0,i.jsx)(s.E,{height:38,src:"/statics/img/svg/typography/teasing.svg",alt:"فردای شگفت‌انگیز"}),(0,i.jsx)("span",{className:"text-caption-strong text-icon-black bg-white",children:"تخفیف‌های فردا رو از دست نده!"}),x>0&&(0,i.jsx)(Z,{incredibleOffersTimer:h})]})})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.D,{children:[(0,i.jsx)(o.D.BackButton,{}),(0,i.jsx)(o.D.ShareButton,{})]}),(0,i.jsx)("div",{className:(0,f.d)("relative text-center p-2",$().TeasingContainer),children:(0,i.jsxs)("div",{className:"relative inline-flex flex-col justify-center items-center gap-2 bg-white",children:[(0,i.jsx)(s.E,{height:24,src:"/statics/img/svg/typography/teasing.svg",alt:"فردای شگفت‌انگیز"}),(0,i.jsx)("span",{className:"text-caption-strong text-icon-black bg-white",children:"تخفیف‌های فردا رو از دست نده!"}),x>0&&(0,i.jsx)(Z,{incredibleOffersTimer:h})]})})]}),(0,i.jsx)("div",{className:"px-4 container-4xl-w mx-auto",children:!(0,g.x)(p)&&(0,i.jsx)(Y,{categories:p})}),(0,i.jsx)("div",{className:"px-4 container-4xl-w mx-auto",children:(0,i.jsx)(c.c,{pages:I,fetchNextPage:y,fetchPage:O,pageNumber:j,hasNextPage:N,pending:C,changeParams:P,data:b,params:T,disableClassicPagination:!0,itemComponent:S})})]})},getAPIMethods:function(e){return[{apiMethod:I,apiData:e.query}]},dataProps:{apiMethod:C,apiData:function(e){return e},disabled:!1,shouldUseLocation:!1,onSuccess:function(e){var t=e.params,n=e.response;(0,_.e)({params:t,response:n,identifier:function(){return{pageName:d.fc}}})}},layoutProps:{desktopFullWidth:!0,chatKey:"incredible-offers",hasMobileHeader:!1}}),H=V,U=(0,r.I)({getSSRMethods:V.getAPIMethods,queryProps:V.dataProps})},40191:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});var r=n(45227),i=(0,n(1324).q)({type:r.XN.POST,url:function(e){var t=e.productId;return"product/".concat(t,"/observe/remove/")},inputTransformer:function(e){var t=e.sendSms;return{send_email:e.sendEmail,send_sms:t,send_notification:e.sendNotification,type:e.type}}})},53795:function(e,t,n){"use strict";n.d(t,{_:function(){return u}});var r=n(70865),i=n(26297),s=n(52322),a=n(2784),o=n(99896),c=n(96057),d=n(16991),l=n(64177);function u(e){var t=e.pending,n=(0,i.Z)(e,["pending"]),u=(0,l.C)().windowWidth,m=(0,a.useMemo)(function(){return u<d.j.SM?o.p:c.b},[u]);return(0,s.jsx)(m,(0,r.Z)({isSkeleton:t,productTitleTag:"h2"},n))}},86825:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});var r={ON_STOCK:"on_stock",ON_INCREDIBLE_OFFER:"on_incredible_offer"}},8693:function(e){e.exports={"Observe__button--white":"styles_Observe__button--white__PCwuW","Observe__button--black":"styles_Observe__button--black__xOhPm"}},52380:function(e){e.exports={Image:"styles_Image__sti7K"}},98713:function(e){e.exports={MainCategoryItem:"styles_MainCategoryItem__SAaAx"}},37412:function(e){e.exports={TeasingContainer:"styles_TeasingContainer__MdpJ9",TeasingContainer__main:"styles_TeasingContainer__main__CSL80",TeasingContainer__button:"styles_TeasingContainer__button__3N_sA",TeasingContainer__badge:"styles_TeasingContainer__badge__P9S9b",TeasingContainer__productItems:"styles_TeasingContainer__productItems__CYhyJ",TeasingContainer__dot:"styles_TeasingContainer__dot__rATDz",TeasingContainer__gradient:"styles_TeasingContainer__gradient__aGBak","TeasingContainer__gradient--fresh":"styles_TeasingContainer__gradient--fresh___B2pV","TeasingContainer__gradient--primary":"styles_TeasingContainer__gradient--primary__yfgK_"}}},function(e){e.O(0,[3325,3459,6547,4704,5214,3209,5088,6057,9896,2122,8065,4027,6572,9774,2888,179],function(){return e(e.s=25203)}),_N_E=e.O()}]);